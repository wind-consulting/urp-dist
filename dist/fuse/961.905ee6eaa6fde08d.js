"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[961],{85961:(Pe,Z,s)=>{s.r(Z),s.d(Z,{LeaveModule:()=>m});var u=s(36895),T=s(30144),i=s(30671),y=s(44223),l=s(24006),h=s(65938),e=s(94650),N=s(48768),b=s(18998),E=s(284),p=s(59549),x=s(99602),D=s(3238),q=s(84385);function U(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"cong\xe9 de maladie"),e.qZA())}function S(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"cong\xe9 pay\xe9e"),e.qZA())}function I(t,n){if(1&t&&(e.TgZ(0,"mat-option",19),e.YNc(1,U,2,0,"div",20),e.YNc(2,S,2,0,"div",20),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Q6J("ngIf","SICK_LEAVE"===a.type),e.xp6(1),e.Q6J("ngIf","PAYED_LEAVE"===a.type)}}class f{constructor(n,a,o,c){this.toast=n,this.data=a,this.leaveService=o,this.dialogRef=c,this.companyEnabledLeaveList=[],this.minDate=new Date,this.requestLeaveForm=new l.cw({uuid:new l.NI(""),id:new l.NI(""),start_date:new l.NI(new Date,[l.kI.required]),end_date:new l.NI(new Date,[l.kI.required]),reason:new l.NI("",[l.kI.required]),status:new l.NI(""),collaborator:new l.NI(""),manager_1:new l.NI(""),leave:new l.NI("",[l.kI.required])})}ngOnInit(){console.log(this.data.bossDepartment)}AjouterRequestLeave(){this.isContractFormValid()&&(this.changeDateToLocalDate(),this.requestLeaveForm.value.manager_1=this.data.bossDepartment.uuid,this.requestLeaveForm.value.collaborator=localStorage.getItem("useruuid"),this.requestLeaveForm.value.status="PENDING",this.leaveService.createLeaveRequest(this.requestLeaveForm.value).subscribe({next:n=>{console.log(n),this.dialogRef.close(n),this.toast.success({detail:"Succ\xe8s! Votre demande de cong\xe9 est ajout\xe9e avec succ\xe8s",duration:5e3})},error:n=>{this.displayMessageError(n.error.message)}}))}displayMessageError(n){let a="";switch(n){case"daysInAdvanceLimit":case"exceedsLimit":a="Le nombre d'employ\xe9s ayant demand\xe9 un cong\xe9 sur cette p\xe9riode est complet.";break;case"exceedsLimitAndAcceptsNegativeCredit":a="Le nombre d'employ\xe9s ayant demand\xe9 un cong\xe9 sur cette p\xe9riode est complet et votre cr\xe9dit actuel est insuffisant.";break;case"creditInsufficient":a="Votre cr\xe9dit actuel est insuffisant."}this.toast.error({detail:a,duration:5e3})}isContractFormValid(){return this.requestLeaveForm.controls.leave.valid&&this.requestLeaveForm.controls.reason.valid&&this.requestLeaveForm.controls.start_date.valid&&this.requestLeaveForm.controls.end_date.valid}changeDateToLocalDate(){this.requestLeaveForm.value.end_date=new Date(this.requestLeaveForm.value.end_date),this.requestLeaveForm.value.start_date=new Date(this.requestLeaveForm.value.start_date)}initialValues(){}}f.\u0275fac=function(n){return new(n||f)(e.Y36(N.s),e.Y36(h.WI),e.Y36(b.t),e.Y36(h.so))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-add-request-leave"]],decls:40,vars:12,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-full"],[1,"flex","justify-center"],["src","../../../../../../assets/imgs/ajout-pencil.svg",1,"w-[45px]","h-[45px]"],[1,"text-black","dark:text-white","font-bold","flex","justify-center"],[1,"grid","grid-cols-1","mt-8"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["appearance","outline",1,"w-full"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","",3,"formControlName"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matInput","",3,"min","matDatepicker","formControlName"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","submit",1,"button-yellow"],[3,"value"],[4,"ngIf"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div")(5,"label",4),e._uU(6,"Ajouter un type de contrat"),e.qZA()()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return a.AjouterRequestLeave()}),e.TgZ(9,"div",7)(10,"mat-form-field",8)(11,"mat-label"),e._uU(12,"Type"),e.qZA(),e.TgZ(13,"mat-select",9),e.YNc(14,I,3,3,"mat-option",10),e.qZA()()(),e.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label"),e._uU(18,"Description*"),e.qZA(),e.TgZ(19,"textarea",11),e._uU(20,"                    "),e.qZA()()(),e.TgZ(21,"div",7)(22,"mat-form-field",12)(23,"mat-label"),e._uU(24,"Date d\xe9but"),e.qZA(),e._UZ(25,"input",13)(26,"mat-datepicker-toggle",14)(27,"mat-datepicker",null,15),e.qZA()(),e.TgZ(29,"div",7)(30,"mat-form-field",12)(31,"mat-label"),e._uU(32,"Date fin"),e.qZA(),e._UZ(33,"input",13)(34,"mat-datepicker-toggle",14)(35,"mat-datepicker",null,16),e.qZA()(),e.TgZ(37,"div",17)(38,"button",18),e._uU(39,"Ajouter"),e.qZA()()()()()),2&n){const o=e.MAs(28),c=e.MAs(36);e.xp6(8),e.Q6J("formGroup",a.requestLeaveForm),e.xp6(5),e.Q6J("formControlName","leave"),e.xp6(1),e.Q6J("ngForOf",a.data.leaveEnabled),e.xp6(5),e.Q6J("formControlName","reason"),e.xp6(6),e.Q6J("min",a.minDate)("matDatepicker",o)("formControlName","start_date"),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.Q6J("min",a.requestLeaveForm.value.start_date)("matDatepicker",c)("formControlName","end_date"),e.xp6(1),e.Q6J("for",c)}},dependencies:[u.sg,u.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,E.Nt,p.KE,p.hX,p.R9,x.Mq,x.hl,x.nW,D.ey,q.gD]});class Y{constructor(n,a,o,c,d,v){this.collaborator=n,this.currentSickLeaveCredit=a,this.currentPayedLeaveCredit=o,this.sickLeave_rule=c,this.payed_rule=d,this.credit_history=v}}var w=s(34698),L=s(6556),A=s(97392),C=s(98739);const Q=["leavePaginator"];function R(t,n){1&t&&(e.TgZ(0,"th",38),e._uU(1," #"),e.qZA())}function J(t,n){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const a=n.index;e.xp6(1),e.hij(" ",a+1," ")}}function P(t,n){1&t&&(e.TgZ(0,"th",38),e._uU(1," Date de d\xe9but"),e.qZA())}function k(t,n){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.start_date," ")}}function B(t,n){1&t&&(e.TgZ(0,"th",38),e._uU(1," Date de fin"),e.qZA())}function F(t,n){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.end_date," ")}}function j(t,n){1&t&&(e.TgZ(0,"th",38),e._uU(1," Status"),e.qZA())}function z(t,n){1&t&&(e.TgZ(0,"span",44),e._uU(1,"En Attente"),e.qZA())}function H(t,n){1&t&&(e.TgZ(0,"span",45),e._uU(1," Accept\xe9"),e.qZA())}function M(t,n){1&t&&(e.TgZ(0,"span",46),e._uU(1," Partiellement accept\xe9"),e.qZA())}function G(t,n){1&t&&(e.TgZ(0,"span",47),e._uU(1,"R\xe9fus\xe9"),e.qZA())}function O(t,n){if(1&t&&(e.TgZ(0,"td",39),e.YNc(1,z,2,0,"span",40),e.YNc(2,H,2,0,"span",41),e.YNc(3,M,2,0,"span",42),e.YNc(4,G,2,0,"span",43),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf","PENDING"===a.status),e.xp6(1),e.Q6J("ngIf","APPROVED"===a.status),e.xp6(1),e.Q6J("ngIf","PARTIALLY_APPROVED"==a.status),e.xp6(1),e.Q6J("ngIf","DENIED"===a.status)}}function V(t,n){1&t&&(e.TgZ(0,"th",38),e._uU(1," Type"),e.qZA())}function $(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Cong\xe9 Pay\xe9"),e.qZA())}function K(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Cong\xe9 de Maladie"),e.qZA())}function X(t,n){if(1&t&&(e.TgZ(0,"td",39),e.YNc(1,$,2,0,"div",35),e.YNc(2,K,2,0,"div",35),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf","PAYED_LEAVE"===a.leave.type),e.xp6(1),e.Q6J("ngIf","SICK_LEAVE"===a.leave.type)}}function W(t,n){if(1&t&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.leave.type," ")}}function ee(t,n){1&t&&(e.TgZ(0,"th",38),e._uU(1," Raison"),e.qZA())}function te(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"td",39)(1,"mat-icon",48),e.NdJ("click",function(){const d=e.CHM(a).$implicit,v=e.oxw();return e.KtG(v.openDialogShowRaison(d.reason))}),e._uU(2," event_note "),e.qZA()()}}function ne(t,n){1&t&&e._UZ(0,"tr",49)}function ae(t,n){1&t&&e._UZ(0,"tr",50)}function oe(t,n){1&t&&(e.TgZ(0,"div")(1,"div",51),e._uU(2," Aucune donn\xe9e disponible dans le tableau"),e.qZA(),e._UZ(3,"hr"),e.qZA())}const ie=function(){return[5,10,20]};class _{constructor(n,a,o,c){this.leaveService=n,this.sirhService=a,this.dialog=o,this.departmentService=c,this.uuidCollaborator=localStorage.getItem("useruuid"),this.displayedColumnsCollaborator=["#","Starting_date","Ending_date","Status","Type","Reason"],this.leaves=[],this.leavesEnabled=[],this.collaboratorHistory=new Y("",0,0,"","","")}ngOnInit(){this.getBossDepartment(),this.getLeavesEnabled(),this.getLeaves(),this.getLeaveHistory()}getLeaves(){this.leaveService.getAllLeaveByCollab(this.uuidCollaborator).subscribe(n=>{this.leaves=n,this.dataSourceLeaves=new i.by(this.leaves),this.setLeavesPaginator()})}setLeavesPaginator(){this.dataSourceLeaves.paginator=this.leavePaginator}openDialogShowRaison(n){this.dialog.open(y.S,{data:{contract:n},width:"25%"}).afterClosed().subscribe(o=>{})}addLeaveRequest(){this.dialog.open(f,{data:{leaveEnabled:this.leavesEnabled,bossDepartment:this.bossDepatment}}).afterClosed().subscribe(a=>{null!=a&&(this.leaves.push(a),this.dataSourceLeaves=new i.by(this.leaves),this.setLeavesPaginator())})}getLeavesEnabled(){this.leaveService.getAllcompanyEnabledLeaveByType("SICK_LEAVE").subscribe(n=>{this.leavesEnabled.push(n)}),this.leaveService.getAllcompanyEnabledLeaveByType("PAYED_LEAVE").subscribe(n=>{this.leavesEnabled.push(n)})}getLeaveHistory(){this.leaveService.getAllLeaveByCollaboratorbyUuid(this.uuidCollaborator).subscribe(n=>{this.collaboratorHistory=n})}getBossDepartment(){this.sirhService.getCollaboratorByUuid(this.uuidCollaborator).subscribe(n=>{this.departmentService.getBossFromDepartment(n.department.uuid).subscribe(a=>{this.bossDepatment=a,null!=this.bossDepatment&&this.bossDepatment.uuid===this.uuidCollaborator&&(this.bossDepatment="")})})}}_.\u0275fac=function(n){return new(n||_)(e.Y36(b.t),e.Y36(w.G),e.Y36(h.uw),e.Y36(L.n))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-absence"]],viewQuery:function(n,a){if(1&n&&e.Gf(Q,5),2&n){let o;e.iGM(o=e.CRH())&&(a.leavePaginator=o.first)}},decls:70,vars:11,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium","mt-4"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],[1,"w-[330px]","H-[50px]","bg-"],["type","button",1,"button-yellow-plus","mt-8","px-5","py-2.5","text-center","inline-flex","items-center","w-full",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-8"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"flex","flex-col","gap-8"],[1,"text-base"],[1,"grid","grid-rows-1","grid-flow-col","gap-1"],[1,"title-3","pt-8"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","class","text-center ...",4,"matHeaderCellDef"],["mat-cell","","class","text-center ...",4,"matCellDef"],["matColumnDef","Starting_date"],["matColumnDef","Ending_date"],["matColumnDef","Status"],["matColumnDef","Type"],["matColumnDef","Reason"],[1,"md:w-2"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions","pageSize"],["leavePaginator",""],["mat-header-cell","",1,"text-center","..."],["mat-cell","",1,"text-center","..."],["class","bg-[#CE857E] text-white text-xs font-bold mr-2 px-6  py-1 rounded-full",4,"ngIf"],["class","bg-yellow-400 text-white text-xs font-bold mr-2 px-7 py-1 rounded-full",4,"ngIf"],["class","bg-yellow-500 text-white text-xs font-bold mr-2 px-7 py-1 rounded-full",4,"ngIf"],["class","bg-zinc-900 text-white text-xs font-bold mr-2 px-8 py-1 rounded-full",4,"ngIf"],[1,"bg-[#CE857E]","text-white","text-xs","font-bold","mr-2","px-6","py-1","rounded-full"],[1,"bg-yellow-400","text-white","text-xs","font-bold","mr-2","px-7","py-1","rounded-full"],[1,"bg-yellow-500","text-white","text-xs","font-bold","mr-2","px-7","py-1","rounded-full"],[1,"bg-zinc-900","text-white","text-xs","font-bold","mr-2","px-8","py-1","rounded-full"],["matSuffix","",1,"finger",3,"click"],["mat-header-row",""],["mat-row",""],[1,"text-center","emptyTable"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5," Cong\xe9 "),e.qZA()(),e.TgZ(6,"div",5)(7,"div")(8,"a",6),e._uU(9,"Accueil"),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"mat-icon",8),e.TgZ(12,"a",9),e._uU(13,"Absence & Pointage"),e.qZA()(),e.TgZ(14,"div",7),e._UZ(15,"mat-icon",8),e.TgZ(16,"span",10),e._uU(17,"Absence"),e.qZA()()()()(),e.TgZ(18,"div",11)(19,"div",12)(20,"div",13)(21,"button",14),e.NdJ("click",function(){return a.addLeaveRequest()}),e._uU(22," Ajouter une demande cong\xe9 "),e._UZ(23,"mat-icon",15),e.qZA(),e.TgZ(24,"div",16)(25,"div",17)(26,"div",18)(27,"div",19)(28,"div",20)(29,"div"),e._uU(30," Solde cong\xe9 pay\xe9:"),e.qZA(),e.TgZ(31,"div"),e._uU(32),e.qZA()()(),e.TgZ(33,"div",19)(34,"div",20)(35,"div"),e._uU(36," Solde cong\xe9 maladie:"),e.qZA(),e.TgZ(37,"div"),e._uU(38),e.qZA()()()()()()(),e.TgZ(39,"h2",21),e._uU(40," Liste des demandes de cong\xe9 "),e.qZA(),e.TgZ(41,"div",16)(42,"div",17)(43,"div",22)(44,"table",23),e.ynx(45,24),e.YNc(46,R,2,0,"th",25),e.YNc(47,J,2,1,"td",26),e.BQk(),e.ynx(48,27),e.YNc(49,P,2,0,"th",25),e.YNc(50,k,2,1,"td",26),e.BQk(),e.ynx(51,28),e.YNc(52,B,2,0,"th",25),e.YNc(53,F,2,1,"td",26),e.BQk(),e.ynx(54,29),e.YNc(55,j,2,0,"th",25),e.YNc(56,O,5,4,"td",26),e.BQk(),e.ynx(57,30),e.YNc(58,V,2,0,"th",25),e.YNc(59,X,3,2,"td",26),e.YNc(60,W,2,1,"td",26),e.BQk(),e.ynx(61,31),e.TgZ(62,"div",32),e.YNc(63,ee,2,0,"th",25),e.YNc(64,te,3,0,"td",26),e.qZA(),e.BQk(),e.YNc(65,ne,1,0,"tr",33),e.YNc(66,ae,1,0,"tr",34),e.qZA(),e.YNc(67,oe,4,0,"div",35),e._UZ(68,"mat-paginator",36,37),e.qZA()()()()()()),2&n&&(e.xp6(11),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(17),e.hij("",a.collaboratorHistory.currentPayedLeaveCredit," jours"),e.xp6(6),e.hij("",a.collaboratorHistory.currentSickLeaveCredit," jours"),e.xp6(6),e.Q6J("dataSource",a.dataSourceLeaves),e.xp6(21),e.Q6J("matHeaderRowDef",a.displayedColumnsCollaborator),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumnsCollaborator),e.xp6(1),e.Q6J("ngIf",0===a.leaves.length),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(10,ie))("pageSize",5))},dependencies:[u.O5,A.Hw,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,C.NW,p.R9]});var se=s(2274);const le=["leavePaginatorEquipe"];function ce(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," #"),e.qZA())}function de(t,n){if(1&t&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&t){const a=n.index;e.xp6(1),e.hij(" ",a+1," ")}}function re(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Collaborateur "),e.qZA())}function me(t,n){if(1&t&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.collaborateurName," ")}}function ue(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Date de d\xe9but"),e.qZA())}function pe(t,n){if(1&t&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.start_date," ")}}function fe(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Date de fin"),e.qZA())}function _e(t,n){if(1&t&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.end_date," ")}}function ge(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Status"),e.qZA())}function ve(t,n){1&t&&(e.TgZ(0,"span",40),e._uU(1,"En Attente"),e.qZA())}function he(t,n){1&t&&(e.TgZ(0,"span",41),e._uU(1," Partiellement accept\xe9"),e.qZA())}function xe(t,n){1&t&&(e.TgZ(0,"span",42),e._uU(1," Accept\xe9"),e.qZA())}function be(t,n){1&t&&(e.TgZ(0,"span",43),e._uU(1,"R\xe9fus\xe9"),e.qZA())}function Ae(t,n){if(1&t&&(e.TgZ(0,"td",35),e.YNc(1,ve,2,0,"span",36),e.YNc(2,he,2,0,"span",37),e.YNc(3,xe,2,0,"span",38),e.YNc(4,be,2,0,"span",39),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf","PENDING"===a.status),e.xp6(1),e.Q6J("ngIf","PARTIALLY_APPROVED"==a.status),e.xp6(1),e.Q6J("ngIf","APPROVED"===a.status),e.xp6(1),e.Q6J("ngIf","DENIED"===a.status)}}function Ce(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Type"),e.qZA())}function Ze(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Cong\xe9 Pay\xe9"),e.qZA())}function Te(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1," Cong\xe9 de Maladie"),e.qZA())}function ye(t,n){if(1&t&&(e.TgZ(0,"td",35),e.YNc(1,Ze,2,0,"div",31),e.YNc(2,Te,2,0,"div",31),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf","PAYED_LEAVE"===a.leave.type),e.xp6(1),e.Q6J("ngIf","SICK_LEAVE"===a.leave.type)}}function Ee(t,n){if(1&t&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.leave.type," ")}}function De(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Raison"),e.qZA())}function qe(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"td",35)(1,"mat-icon",44),e.NdJ("click",function(){const d=e.CHM(a).$implicit,v=e.oxw();return e.KtG(v.openDialogShowRaison(d.reason))}),e._uU(2," event_note "),e.qZA()()}}function we(t,n){1&t&&(e.TgZ(0,"th",34),e._uU(1," Action "),e.qZA())}function Le(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"mat-icon",44),e.NdJ("click",function(){e.CHM(a);const c=e.oxw().$implicit,d=e.oxw();return e.KtG(d.openEditDialog(c))}),e._uU(1,"edit"),e.qZA()}}function Ne(t,n){1&t&&(e.TgZ(0,"mat-icon",47),e._uU(1,"edit "),e.qZA())}function Ue(t,n){if(1&t&&(e.TgZ(0,"td",35),e.YNc(1,Le,2,0,"mat-icon",45),e.YNc(2,Ne,2,0,"mat-icon",46),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.Q6J("ngIf","PENDING"===a.status),e.xp6(1),e.Q6J("ngIf","PENDING"!==a.status)}}function Se(t,n){1&t&&e._UZ(0,"tr",48)}function Ie(t,n){1&t&&e._UZ(0,"tr",49)}function Ye(t,n){1&t&&(e.TgZ(0,"div")(1,"div",50),e._uU(2," Aucune donn\xe9e disponible dans le tableau"),e.qZA(),e._UZ(3,"hr"),e.qZA())}const Qe=function(){return[5,10,20]};class g{constructor(n,a,o,c){this.leaveService=n,this.sirhService=a,this.dialog=o,this.departmentService=c,this.uuidCollaborator=localStorage.getItem("useruuid"),this.displayedColumnsLeaveEquipe=["#","Collaborator","Starting_date","Ending_date","Status","Type","Reason","Action"],this.leaves=[],this.leavesEquipe=[]}ngOnInit(){this.getLeavesEquipe()}getLeavesEquipe(){this.leaveService.getAllLeaveByBoss(this.uuidCollaborator).subscribe(n=>{this.leavesEquipe=n,this.leavesEquipe.forEach(a=>this.sirhService.getCollaboratorByUuid(a.collaborator).subscribe(o=>a.collaborateurName=o.firstname+" "+o.lastname)),this.dataSourceLeavesEquipe=new i.by(this.leavesEquipe),this.setLeavesEquipePaginator()})}setLeavesEquipePaginator(){this.dataSourceLeavesEquipe.paginator=this.leavePaginatorEquipe}openEditDialog(n){this.dialog.open(se.u,{data:{result:n}}).afterClosed().subscribe(o=>{this.leavesEquipe.map((c,d)=>{c.uuid===o.uuid&&(this.leavesEquipe[d].status=o.status,this.dataSourceLeavesEquipe=new i.by(this.leavesEquipe),this.setLeavesEquipePaginator())})})}openDialogShowRaison(n){this.dialog.open(y.S,{data:{contract:n},width:"25%"}).afterClosed().subscribe(o=>{})}}g.\u0275fac=function(n){return new(n||g)(e.Y36(b.t),e.Y36(w.G),e.Y36(h.uw),e.Y36(L.n))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-absence-demande-chef"]],viewQuery:function(n,a){if(1&n&&e.Gf(le,5),2&n){let o;e.iGM(o=e.CRH())&&(a.leavePaginatorEquipe=o.first)}},decls:58,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium","mt-4"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],[1,"title-3","pt-8"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","class","text-center ...",4,"matHeaderCellDef"],["mat-cell","","class","text-center ...",4,"matCellDef"],["matColumnDef","Collaborator"],["matColumnDef","Starting_date"],["matColumnDef","Ending_date"],["matColumnDef","Status"],["matColumnDef","Type"],["matColumnDef","Reason"],[1,"md:w-2"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions","pageSize"],["leavePaginatorEquipe",""],["mat-header-cell","",1,"text-center","..."],["mat-cell","",1,"text-center","..."],["class","bg-[#CE857E] text-white text-xs font-bold mr-2 px-6  py-1 rounded-full",4,"ngIf"],["class","bg-yellow-500 text-white text-xs font-bold mr-2 px-7 py-1 rounded-full",4,"ngIf"],["class","bg-yellow-400 text-white text-xs font-bold mr-2 px-7 py-1 rounded-full",4,"ngIf"],["class","bg-zinc-900 text-white text-xs font-bold mr-2 px-8 py-1 rounded-full",4,"ngIf"],[1,"bg-[#CE857E]","text-white","text-xs","font-bold","mr-2","px-6","py-1","rounded-full"],[1,"bg-yellow-500","text-white","text-xs","font-bold","mr-2","px-7","py-1","rounded-full"],[1,"bg-yellow-400","text-white","text-xs","font-bold","mr-2","px-7","py-1","rounded-full"],[1,"bg-zinc-900","text-white","text-xs","font-bold","mr-2","px-8","py-1","rounded-full"],["matSuffix","",1,"finger",3,"click"],["class","finger","matSuffix","",3,"click",4,"ngIf"],["class","notAllowed","matTooltip","Demande d\xe9j\xe0 accord\xe9e","matTooltipPosition","left","matSuffix","",4,"ngIf"],["matTooltip","Demande d\xe9j\xe0 accord\xe9e","matTooltipPosition","left","matSuffix","",1,"notAllowed"],["mat-header-row",""],["mat-row",""],[1,"text-center","emptyTable"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5," Cong\xe9 "),e.qZA()(),e.TgZ(6,"div",5)(7,"div")(8,"a",6),e._uU(9,"Accueil"),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"mat-icon",8),e.TgZ(12,"a",9),e._uU(13,"Absence & Pointage"),e.qZA()(),e.TgZ(14,"div",7),e._UZ(15,"mat-icon",8),e.TgZ(16,"span",10),e._uU(17,"Absence"),e.qZA()()()()(),e.TgZ(18,"div",11)(19,"div",12)(20,"h2",13),e._uU(21," Liste des demandes de cong\xe9 "),e.qZA(),e.TgZ(22,"div",14)(23,"div",15)(24,"div",16)(25,"table",17),e.ynx(26,18),e.YNc(27,ce,2,0,"th",19),e.YNc(28,de,2,1,"td",20),e.BQk(),e.ynx(29,21),e.YNc(30,re,2,0,"th",19),e.YNc(31,me,2,1,"td",20),e.BQk(),e.ynx(32,22),e.YNc(33,ue,2,0,"th",19),e.YNc(34,pe,2,1,"td",20),e.BQk(),e.ynx(35,23),e.YNc(36,fe,2,0,"th",19),e.YNc(37,_e,2,1,"td",20),e.BQk(),e.ynx(38,24),e.YNc(39,ge,2,0,"th",19),e.YNc(40,Ae,5,4,"td",20),e.BQk(),e.ynx(41,25),e.YNc(42,Ce,2,0,"th",19),e.YNc(43,ye,3,2,"td",20),e.YNc(44,Ee,2,1,"td",20),e.BQk(),e.ynx(45,26),e.TgZ(46,"div",27),e.YNc(47,De,2,0,"th",19),e.YNc(48,qe,3,0,"td",20),e.qZA(),e.BQk(),e.ynx(49,28),e.TgZ(50,"div",27),e.YNc(51,we,2,0,"th",19),e.YNc(52,Ue,3,2,"td",20),e.qZA(),e.BQk(),e.YNc(53,Se,1,0,"tr",29),e.YNc(54,Ie,1,0,"tr",30),e.qZA(),e.YNc(55,Ye,4,0,"div",31),e._UZ(56,"mat-paginator",32,33),e.qZA()()()()()()),2&n&&(e.xp6(11),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(10),e.Q6J("dataSource",a.dataSourceLeavesEquipe),e.xp6(28),e.Q6J("matHeaderRowDef",a.displayedColumnsLeaveEquipe),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumnsLeaveEquipe),e.xp6(1),e.Q6J("ngIf",0===a.leavesEquipe.length),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(8,Qe))("pageSize",5))},dependencies:[u.O5,A.Hw,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,C.NW,p.R9]});const Re=[{path:"absence",component:_},{path:"Liste demande",component:g}];class r{}r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[T.Bz.forChild(Re),T.Bz]});var Je=s(3848);class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[u.ez,r,A.Ps,Je.Nh,i.p0,C.TU,l.UX,E.c,x.FA,D.Ng,q.LD]})}}]);