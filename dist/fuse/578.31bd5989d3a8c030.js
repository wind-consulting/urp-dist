"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[578],{57578:(W,T,c)=>{c.r(T),c.d(T,{DashCaisseModule:()=>q});var m=c(36895),_=c(24300),v=c(30430),f=c(30144),o=c(24006),r=c(30671);class h{constructor(i,t){this.start=i,this.end=t}}var e=c(94650),g=c(48768),Z=c(29443),C=c(99602),d=c(59549),b=c(284),y=c(73546),E=c(98739);const ae=["etatCaissePaginator"];function oe(n,i){if(1&n&&(e.TgZ(0,"div")(1,"label",28),e._uU(2,"Solde depart : "),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.soldeDepart)}}function se(n,i){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1," 0 "),e.qZA())}function re(n,i){if(1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.montantFinal,"")}}function le(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," Date "),e.qZA())}function ce(n,i){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.created,"dd/MM/yyyy HH:mm")," ")}}function me(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," Date Valeur "),e.qZA())}function pe(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function de(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.valueDate," ")}}function ue(n,i){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,pe,2,0,"span",6),e.YNc(2,de,2,1,"span",6),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.valueDate),e.xp6(1),e.Q6J("ngIf",null!=t.valueDate)}}function _e(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," Description "),e.qZA())}function fe(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Virement"),e.qZA())}function ge(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Esp\xe8ce"),e.qZA())}function he(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cheque"),e.qZA())}function Ce(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Traite mensuelle"),e.qZA())}function xe(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Carte cr\xe9dit"),e.qZA())}function ve(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Montant caisse"),e.qZA())}function be(n,i){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,fe,2,0,"span",6),e.YNc(2,ge,2,0,"span",6),e.YNc(3,he,2,0,"span",6),e.YNc(4,Ce,2,0,"span",6),e.YNc(5,xe,2,0,"span",6),e.YNc(6,ve,2,0,"span",6),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","VIR"==t.payType),e.xp6(1),e.Q6J("ngIf","CSH"==t.payType),e.xp6(1),e.Q6J("ngIf","CHQ"==t.payType),e.xp6(1),e.Q6J("ngIf","PRO"==t.payType),e.xp6(1),e.Q6J("ngIf","CRD"==t.payType),e.xp6(1),e.Q6J("ngIf",null==t.payType)}}function Te(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1,"R\xe9f\xe9rence "),e.qZA())}function Ze(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function ye(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.invoice?null:t.invoice.invoiceNumber,"")}}function we(n,i){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,Ze,2,0,"span",6),e.YNc(2,ye,2,1,"span",6),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==(null==t.invoice?null:t.invoice.invoiceNumber)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.invoice?null:t.invoice.invoiceNumber))}}function Ae(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," D\xe9bit "),e.qZA())}function De(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.amount)}}function Ie(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Ue(n,i){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,De,2,1,"span",6),e.YNc(2,Ie,2,0,"span",6),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","DEBIT"==t.sens),e.xp6(1),e.Q6J("ngIf","CREDIT"==t.sens)}}function Ne(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," Cr\xe9dit "),e.qZA())}function qe(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Ee(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.amount)}}function ke(n,i){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,qe,2,0,"span",6),e.YNc(2,Ee,2,1,"span",6),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","DEBIT"==t.sens),e.xp6(1),e.Q6J("ngIf","CREDIT"==t.sens)}}function Fe(n,i){1&n&&e._UZ(0,"tr",42)}function Be(n,i){1&n&&e._UZ(0,"tr",43)}function Je(n,i){if(1&n&&(e.TgZ(0,"table",29),e.ynx(1,30),e.YNc(2,le,2,0,"th",31),e.YNc(3,ce,3,4,"td",32),e.BQk(),e.ynx(4,33),e.YNc(5,me,2,0,"th",31),e.YNc(6,ue,3,2,"td",32),e.BQk(),e.ynx(7,34),e.YNc(8,_e,2,0,"th",31),e.YNc(9,be,7,6,"td",32),e.BQk(),e.ynx(10,35),e.YNc(11,Te,2,0,"th",31),e.YNc(12,we,3,2,"td",32),e.BQk(),e.ynx(13,36),e.YNc(14,Ae,2,0,"th",31),e.YNc(15,Ue,3,2,"td",32),e.BQk(),e.ynx(16,37),e.YNc(17,Ne,2,0,"th",31),e.YNc(18,ke,3,2,"td",32),e.BQk(),e.YNc(19,Fe,1,0,"tr",38),e.YNc(20,Be,1,0,"tr",39),e.qZA()),2&n){const t=e.oxw();e.Q6J("dataSource",t.dataSourceEtatCaisse),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumnsEtatCaisse),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsEtatCaisse)}}function Se(n,i){1&n&&(e.TgZ(0,"div",44)(1,"div",45),e._UZ(2,"img",46),e.qZA(),e.TgZ(3,"span",47),e._uU(4,"Aucune donn\xe9e disponible dans le tableau "),e.qZA(),e._UZ(5,"hr"),e.qZA())}const Qe=function(){return[5,10,20]};class w{constructor(i,t,a){this.toast=i,this.buillingService=t,this.formBuilder=a,this.listeEtatCaisse=[],this.displayedColumnsEtatCaisse=["date","dateValeur","description","reference","debit","credit"],this.soldeDepart=0,this.today=(new Date).toJSON().split("T")[0],this.searchForm=new o.cw({start_date:new o.NI(null),end_date:new o.NI(null)}),this.intervalDate=new h(new Date,new Date),this.newIntervalDate=new h(new Date,new Date),this.montantFinal=0,this.isRequired=!0}ngOnInit(){this.getAllTransactions()}getAllTransactions(){this.buillingService.getAllTransactions().subscribe(i=>{this.listeEtatCaisse=i,this.getAllInvoices(),this.dataSourceEtatCaisse=new r.by(this.listeEtatCaisse),this.soldeDepart=this.montantFinal,this.setCaissePaginator()})}setCaissePaginator(){this.dataSourceEtatCaisse.paginator=this.etatCaissePaginator}getAllInvoices(){let i=-1;this.buillingService.getAllInvoices().subscribe(t=>{this.allInvoices=t,this.listeEtatCaisse.forEach(a=>{i++,"DEBIT"==a.sens?this.montantFinal-=a.amount:this.montantFinal+=a.amount,this.allInvoices.forEach(s=>{s.uuid==a.invoice&&(this.listeEtatCaisse[i].invoice=s)})})})}addDays(i,t){var a=new Date(i);return a.setDate(a.getDate()+t),a}setInterval(){this.intervalDate.end=this.addDays(this.searchForm.value.end_date,1),this.intervalDate.start=this.searchForm.value.start_date,this.searchForm.value.start_date>this.searchForm.value.end_date?this.toast.warning({detail:"Warning! Enter une date valide",duration:5e3}):(this.getAllTransactionsBetweenTwoDates(this.intervalDate),this.getTransactionHistory(this.intervalDate),this.setCaissePaginator())}getAllTransactionsBetweenTwoDates(i){this.buillingService.getAllTransactionsBetweenTwoDates(i).subscribe(t=>{this.montantFinal=0,this.listeEtatCaisse=t,this.dataSourceEtatCaisse=new r.by(this.listeEtatCaisse),this.setCaissePaginator(),this.getAllInvoices()})}getTransactionHistory(i){this.buillingService.getTransactionHistory(i).subscribe(t=>{t?this.getTransactionHistoryGreater(i,t):this.buillingService.getAllTransactionsBeforeDate(this.intervalDate).subscribe(a=>{a.forEach(s=>{"DEBIT"==s.sens?this.soldeDepart-=s.amount:this.soldeDepart+=s.amount})})})}getTransactionHistoryGreater(i,t){this.buillingService.getTransactionHistoryGreater(i).subscribe(a=>{a?(this.newDateResponse=new Date(t.date),this.newDateGreater=new Date(a.date),this.newDateStart=new Date(i.start),this.interval=(this.newDateStart.getTime()-this.newDateResponse.getTime())/864e5,this.interval2=(this.newDateStart.getTime()-this.newDateGreater.getTime())/864e5):this.interval2=32,t?this.interval<Math.abs(this.interval2)?(this.newIntervalDate.start=t.date,this.newIntervalDate.end=this.intervalDate.start,this.getAllTransacBetwTwoDatesdesiSoldeDepar(this.newIntervalDate),this.soldeDepart+=t.amount):(this.newIntervalDate.start=this.intervalDate.start,this.newIntervalDate.end=a.date,this.getAllTransacBetwTwoDatesIncrSoldeDepar(this.newIntervalDate),this.soldeDepart+=a.amount):this.soldeDepart=0})}getAllTransacBetwTwoDatesdesiSoldeDepar(i){this.buillingService.getAllTransactionsBetweenTwoDates(i).subscribe(t=>{t.forEach(a=>{"DEBIT"==a.sens?this.soldeDepart-=a.amount:this.soldeDepart+=a.amount})})}getAllTransacBetwTwoDatesIncrSoldeDepar(i){this.buillingService.getAllTransactionsBetweenTwoDates(i).subscribe(t=>{t.forEach(a=>{"DEBIT"==a.sens?this.soldeDepart+=a.amount:this.soldeDepart-=a.amount})})}removeDescriptionControl(){this.searchForm=this.formBuilder.group({start_date:[""],end_date:[""]}),this.isRequired=!1}reset(){this.listeEtatCaisse=[],this.dataSourceEtatCaisse=new r.by(this.listeEtatCaisse),this.soldeDepart=0,this.montantFinal=0,this.searchForm.value.end_date=new Date,this.intervalDate=new h(new Date,new Date),this.removeDescriptionControl(),this.buillingService.getAllTransactions().subscribe(t=>{this.listeEtatCaisse=t,this.dataSourceEtatCaisse=new r.by(this.listeEtatCaisse),this.getAllInvoices(),this.soldeDepart=this.montantFinal,this.setCaissePaginator()})}}w.\u0275fac=function(i){return new(i||w)(e.Y36(g.s),e.Y36(Z.e),e.Y36(o.qu))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-etat-general-caisse"]],viewQuery:function(i,t){if(1&i&&e.Gf(ae,5),2&i){let a;e.iGM(a=e.CRH())&&(t.etatCaissePaginator=a.first)}},decls:47,vars:16,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],[1,"title-3","pt-8","font-bold"],[1,"grid","grid-cols-2","gap-4","content-center"],[1,"grid","grid-rows-1","grid-flow-col","mt-10"],[4,"ngIf"],[1,"flex","justify-center","mx-auto","h-18"],[1,"text-center","shadow-lg","shadow-gray-300","w-1/5","bg-mat-card"],[1,"mt-8"],[1,"search-div","mt-9","py-5"],[1,"container","mx-5","px-4"],[3,"formGroup"],[1,"grid","grid-cols-4","gap-4"],["appearance","outline","subscriptSizing","dynamic",1,"search","w-full"],["matInput","","formControlName","start_date",3,"matDatepicker","max","required"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","end_date",3,"matDatepicker","max","required"],["picker2",""],[1,"button-yellow-search","font-bold","ml-8",3,"click"],[1,"button-black-reset","font-bold",3,"click"],[1,"search-div","mt-7","py-5"],[1,"tab","overflow-x-auto"],["mat-table","","class","overflow-x-auto w-full ",3,"dataSource",4,"ngIf"],["class","flex flex-col my-2",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["etatCaissePaginator",""],[1,"text-neutral-950","font-bold"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","dateValeur"],["matColumnDef","description"],["matColumnDef","reference"],["matColumnDef","debit"],["matColumnDef","credit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-header-row",""],["mat-row",""],[1,"flex","flex-col","my-2"],[1,"flex","justify-center","mt-10"],["src","assets/imgs/undraw_select.svg",1,"w-4/12"],[1,"text-3xl","text-center","my-6"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4," Etat Caisse G\xe9n\xe9rale "),e.qZA(),e.TgZ(5,"div",4)(6,"div",5),e.YNc(7,oe,5,1,"div",6),e.qZA()(),e.TgZ(8,"div",7)(9,"mat-card",8)(10,"mat-card-subtitle",9),e._uU(11,"Montant Total :"),e.qZA(),e.YNc(12,se,2,0,"mat-card-title",6),e.YNc(13,re,2,1,"mat-card-title",6),e.qZA()(),e.TgZ(14,"div",10)(15,"div",11)(16,"form",12)(17,"div",13)(18,"div")(19,"mat-form-field",14)(20,"mat-label"),e._uU(21,"Date de d\xe9but *"),e.qZA(),e._UZ(22,"input",15)(23,"mat-datepicker-toggle",16)(24,"mat-datepicker",null,17),e.qZA()(),e.TgZ(26,"div")(27,"mat-form-field",14)(28,"mat-label"),e._uU(29,"Date de fin * "),e.qZA(),e._UZ(30,"input",18)(31,"mat-datepicker-toggle",16)(32,"mat-datepicker",null,19),e.qZA()(),e.TgZ(34,"div")(35,"button",20),e.NdJ("click",function(){return t.setInterval()}),e._uU(36,"Rechercher"),e.qZA()(),e.TgZ(37,"div")(38,"button",21),e.NdJ("click",function(){return t.reset()}),e._uU(39,"Reset"),e.qZA()()()()()(),e.TgZ(40,"div",22)(41,"div",11)(42,"div",23),e.YNc(43,Je,21,3,"table",24),e.YNc(44,Se,6,0,"div",25),e._UZ(45,"mat-paginator",26,27),e.qZA()()()()()()),2&i){const a=e.MAs(25),s=e.MAs(33);e.xp6(7),e.Q6J("ngIf",0!=t.soldeDepart),e.xp6(5),e.Q6J("ngIf",0===(null==t.listeEtatCaisse?null:t.listeEtatCaisse.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==t.listeEtatCaisse?null:t.listeEtatCaisse.length)),e.xp6(3),e.Q6J("formGroup",t.searchForm),e.xp6(6),e.Q6J("matDatepicker",a)("max",t.today)("required",t.isRequired),e.xp6(1),e.Q6J("for",a),e.xp6(7),e.Q6J("matDatepicker",s)("max",t.today)("required",t.isRequired),e.xp6(1),e.Q6J("for",s),e.xp6(12),e.Q6J("ngIf",0!=t.listeEtatCaisse.length),e.xp6(1),e.Q6J("ngIf",0===t.listeEtatCaisse.length),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(15,Qe))}},dependencies:[m.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,C.Mq,C.hl,C.nW,d.KE,d.hX,d.R9,b.Nt,y.a8,y.$j,y.n5,E.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,m.uU],styles:[".bg-mat-card[_ngcontent-%COMP%]{background-color:#f8f9f9;height:100px}"]});class Ye{constructor(i,t,a){this.caisse=i,this.amount=t,this.sens=a}}var u=c(65938),V=(()=>{return(n=V||(V={}))[n.SAVING_BANK_ACCOUNT=0]="SAVING_BANK_ACCOUNT",n[n.CURRENT_BANK_ACCOUNT_OR_CARD=1]="CURRENT_BANK_ACCOUNT_OR_CARD",n[n.CASH_ACCOUNT_LIQUID=2]="CASH_ACCOUNT_LIQUID",V;var n})(),Re=c(15439),Pe=c.n(Re),X=c(68675),ee=c(54004),A=c(30895);class k{constructor(i,t,a){this.caisseService=i,this.toast=t,this.dialogRef=a,this.deviseListe=[],this.addDeviseForm=new o.cw({nom:new o.NI("",[o.kI.required]),tauxechange:new o.NI("",[o.kI.required])})}ngOnInit(){}onFormSubmit(){this.addDeviseForm.valid&&this.caisseService.addcurrency({name:this.addDeviseForm.value.nom,exchangeRate:this.addDeviseForm.value.tauxechange}).subscribe(t=>{this.deviseListe=t,this.dialogRef.close(this.deviseListe),this.toast.success({detail:"Succ\xe8s! Devise ajout\xe9e avec succ\xe8s",duration:3e3})},t=>{console.log(t),this.toast.error({detail:"Erreur! ",duration:3e3})})}}k.\u0275fac=function(i){return new(i||k)(e.Y36(A.t),e.Y36(g.s),e.Y36(u.so))},k.\u0275cmp=e.Xpm({type:k,selectors:[["app-add-devise"]],decls:24,vars:1,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-100"],[1,"flex","justify-center","mb-2"],["src","../../../../../../assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center"],[1,"text-black","dark:text-white","font-bold"],[1,"grid","grid-cols-1"],["id","form1","role","form","ngNativeValidate","",3,"formGroup"],[1,"mb-4"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","w-full"],["matInput","","formControlName","nom","name","nom"],["matInput","","type","number","pattern","[0-9.-]*","name","tauxechange","formControlName","tauxechange"],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","submit",1,"button-yellow",3,"click"]],template:function(i,t){1&i&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div")(3,"div",1)(4,"div",2),e._UZ(5,"img",3),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Vous \xeates sur le point d'ajouter un devise"),e.qZA()()(),e.TgZ(9,"div",6)(10,"form",7)(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),e._uU(14,"Nom "),e.qZA(),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",8)(17,"mat-form-field",9)(18,"mat-label"),e._uU(19,"Taux d'\xe9change"),e.qZA(),e._UZ(20,"input",11),e.qZA()(),e.TgZ(21,"div",12)(22,"button",13),e.NdJ("click",function(){return t.onFormSubmit()}),e._uU(23,"Ajouter"),e.qZA()()()()()(),e.BQk()),2&i&&(e.xp6(10),e.Q6J("formGroup",t.addDeviseForm))},dependencies:[o.Fj,o.wV,o.JJ,o.JL,o.c5,o.sg,o.u,d.KE,d.hX,b.Nt,u.xY,u.H8]});var Oe=c(24183),Me=c(9396);class D{constructor(){this.comptecomptablelist=[{id:1,label:"1 - Fonds propres  provisions pour risques et char"},{id:10,label:" 10 - Capital et r\xe9serves"},{id:101,label:"101 - Capital"},{id:104,label:"104 - Primes li\xe9es au capital social"},{id:105,label:"105 - Ecarts de r\xe9\xe9valuation"},{id:106,label:"106 - R\xe9serves"},{id:107,label:"107 - Ecart d'equivalence"},{id:108,label:"108 - Compte de l'exploitant"},{id:109,label:"109 - Actionnaires : capital souscrit - non appel\xe9"},{id:11,label:"11 - Report \xe0 nouveau (solde cr\xe9diteur ou d\xe9biteur)"},{id:110,label:"110 - Report \xe0 nouveau (solde cr\xe9diteur)"},{id:119,label:"119 - Report \xe0 nouveau (solde d\xe9biteur)"},{id:12,label:"12 - R\xe9sultat de l'exercice (b\xe9n\xe9fice ou perte)"},{id:120,label:"120 - R\xe9sultat de l'exercice (b\xe9n\xe9fice)"},{id:129,label:"129 - R\xe9sultat de l exercice perte"},{id:13,label:"13 - Subventions d investissement"},{id:13,label:"13 - Subventions d investissement"},{id:131,label:"131 - Subventions d \xe9quipement"},{id:138,label:"138 - Autres subventions d investissement"},{id:139,label:"139 - Subventions d 'investissement inscrites au co..."},{id:14,label:"14 - Provisions r\xe9glement\xe9es"},{id:142,label:"142 - Provisions r\xe9glement\xe9es relatives aux immobi..."},{id:143,label:"143 - Provisions r\xe9glement\xe9es relatives aux stocks"}]}}D.\u0275fac=function(i){return new(i||D)},D.\u0275prov=e.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"});var Ve=c(86344),G=c(47957),L=c(3238),K=c(84385),j=c(86257),H=c(4859),x=c(97392);function Ge(n,i){1&n&&(e.TgZ(0,"div",50)(1,"div",51)(2,"div",52)(3,"h2",53),e._uU(4," Ajouter un nouveau compte bancaire "),e.qZA()(),e.TgZ(5,"div",54)(6,"div")(7,"a",55),e._uU(8," Caisse"),e.qZA()(),e.TgZ(9,"div",56),e._UZ(10,"mat-icon",57),e.TgZ(11,"span",58),e._uU(12," Ajouter un nouveau compte bancaire"),e.qZA()()()()()),2&n&&(e.xp6(10),e.Q6J("svgIcon","heroicons_solid:chevron-right"))}function Le(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",59)(1,"button",60),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.retourToPageCompteBancaire(1))}),e._UZ(2,"mat-icon",61),e._uU(3," Retour "),e.qZA()()}}function je(n,i){1&n&&(e.TgZ(0,"div",62),e._uU(1," Informations du propri\xe9taire"),e.qZA())}function He(n,i){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function ze(n,i){1&n&&(e.TgZ(0,"div",62),e._uU(1,"Compte du propri\xe9taire"),e.qZA())}function $e(n,i){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t.uuid),e.xp6(1),e.Oqu(t.name)}}function Ke(n,i){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function We(n,i){1&n&&(e.TgZ(0,"div",62),e._uU(1,"Comptable du propri\xe9taire"),e.qZA())}function Xe(n,i){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.label,"")}}function et(n,i){if(1&n&&(e.TgZ(0,"mat-option",63),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.label,"")}}class I{constructor(i,t,a,s,l,p,O,M,ie,ne,vn,bn){this.builder=i,this.nationalitiesService=t,this.caisseservice=a,this.bankService=s,this.compteComtable=l,this.countriesService=p,this.toast=O,this.route=M,this.router=ie,this.dialog=ne,this.data=vn,this.dialogRef=bn,this.isLinear=!0,this.keytypecomptes=[],this.typecomptes=V,this.comptecomptablelist=[],this.codecomptablelist=[{id:1,label:"BQ - Bank journal"}],this.listcountries=[]}ngOnInit(){this.notShow=this.data.dataKey,this.getTypeCompte(),this.initForm(),this.initFormCompProp(),this.initFormComptable(),this.setFiltredNationnality(),this.getCurrencies(),this.getCompteComtable(),this.getCountries(),this.setFiltredBank()}initForm(){this.myFormInfoProprietaire=this.builder.group({ref:["",[o.kI.required,o.kI.minLength(3)]],rib:["",[o.kI.required,o.kI.minLength(20),o.kI.pattern(/^[0-9]\d*$/)]],proprietaire:this.builder.control("",o.kI.required),pays:this.builder.control("",o.kI.required),adresse:this.builder.control("",o.kI.required)})}initFormCompProp(){this.myFormCompProprietaire=this.builder.group({libelle:this.builder.control("",o.kI.required),swift:this.builder.control("",o.kI.required),soldeInit:this.builder.control("",o.kI.required),soldeMin:this.builder.control("",o.kI.required),TypeCompte:this.builder.control("",o.kI.required),etat:this.builder.control("",o.kI.required),devise:this.builder.control("",o.kI.required),bank:this.builder.control("",o.kI.required)})}initFormComptable(){this.myFormComptable=this.builder.group({comptable:this.builder.control("",o.kI.required),codeComp:this.builder.control("",o.kI.required),commentaire:this.builder.control("",o.kI.required)})}onSelectNationnality(i){let t=i.option.value;this.countriesService.listcountries.map(a=>{a.name===t&&(this.countryValue=a.alpha2)})}onSelectBank(i){let t=i.option.value;this.banks.map(a=>{a===t&&this.myFormCompProprietaire.controls.bank.setValue(t)})}setFiltredBank(){this.filteredBank=this.myFormCompProprietaire.controls.bank.valueChanges.pipe((0,X.O)(""),(0,ee.U)(i=>this._filterBank(i||"")))}_filterBank(i){return this.banks=this.bankService.banks,this.banks.filter(a=>a.toString().toLowerCase().includes(i.toString().toLowerCase()))}setFiltredNationnality(){this.filteredNationnalities=this.myFormInfoProprietaire.controls.pays.valueChanges.pipe((0,X.O)(""),(0,ee.U)(i=>this._filter(i||"")))}_filter(i){const a=[];return this.countriesService.listcountries.forEach(l=>{a.push(l.name)}),this.nationalities=a,this.nationalities.filter(l=>l.toString().toLowerCase().includes(i.toString().toLowerCase()))}getTypeCompte(){this.keytypecomptes=Object.keys(this.typecomptes).filter(i=>!isNaN(Number(i)))}getselectedtype(i){this.selected=i.value,this.myFormCompProprietaire.value.TypeCompte=this.typecomptes[this.selected]}getselectedstatus(i){this.selected=i.value,this.myFormCompProprietaire.value.etat=this.selected}getCurrencies(){this.caisseservice.getAllCurrenciesByTenantId().subscribe(i=>{this.currencies=i,i.forEach(t=>{this.currentTenantId=t.tenant_id})})}getselectedcurrency(i){this.selected=i.value,this.myFormCompProprietaire.value.devise=this.selected}getCountries(){this.listcountries=this.countriesService.listcountries}getselectedbankname(i){this.myFormCompProprietaire.value.bank=i.value.toUpperCase()}getCompteComtable(){this.comptecomptablelist=this.compteComtable.comptecomptablelist}getselectedcomptecomtable(i){this.selected=i.value,this.myFormComptable.value.comptable=this.selected.toUpperCase()}getselectedcodecomtable(i){this.selected=i.value,this.myFormComptable.value.codeComp=this.selected.toUpperCase()}getselectedcountry(i){this.selected=i.value,this.myFormInfoProprietaire.value.pays=this.selected.toUpperCase()}onAddcompteFormSubmit(){if(this.myFormInfoProprietaire.valid&&this.myFormCompProprietaire.valid&&this.myFormComptable.valid){let i={ref:this.myFormInfoProprietaire.value.ref,accountNumber:this.myFormInfoProprietaire.value.rib,ownerName:this.myFormInfoProprietaire.value.proprietaire,ownerAddress:this.myFormInfoProprietaire.value.adresse,label:this.myFormCompProprietaire.value.libelle,swift:this.myFormCompProprietaire.value.swift,initialAmount:this.myFormCompProprietaire.value.soldeInit,minimalAmount:this.myFormCompProprietaire.value.soldeMin,accountType:this.myFormCompProprietaire.value.TypeCompte,state:this.myFormCompProprietaire.value.etat,currency:{uuid:this.myFormCompProprietaire.value.devise},bankName:this.myFormCompProprietaire.value.bank,accountingAccountCode:this.myFormComptable.value.codeComp,comment:this.myFormComptable.value.commentaire,country:this.countryValue.toUpperCase(),accountDate:Pe()().toDate(),tenantId:this.currentTenantId,accountingAccount:this.myFormComptable.value.comptable};this.caisseservice.addcompte(i).subscribe(t=>{this.notShow&&this.dialogRef.close(t),this.toast.success({detail:"Succ\xe8s! Le compte bancaire est ajout\xe9e avec succ\xe8s",duration:5e3}),this.retourToPageCompteBancaire(1)},t=>{this.toast.error({detail:"Erreur! ",duration:5e3})})}}retourToPageCompteBancaire(i){this.router.navigate(["../compte-bancaire"],{relativeTo:this.route}).then(t=>{},t=>{console.log(t)})}addDevise(){this.dialog.open(k,{}).afterClosed().subscribe(t=>{this.currencies.push(t)})}}function tt(n,i){if(1&n&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t.uuid),e.xp6(1),e.Oqu(t.accountNumber)}}I.\u0275fac=function(i){return new(i||I)(e.Y36(o.qu),e.Y36(Oe.d),e.Y36(A.t),e.Y36(Me.y),e.Y36(D),e.Y36(Ve.K),e.Y36(g.s),e.Y36(f.gz),e.Y36(f.F0),e.Y36(u.uw),e.Y36(u.WI),e.Y36(u.so,8))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-add-compte-bancaire"]],decls:141,vars:21,consts:[[1,"flex","flex-col","flex-auto","min-w-0","bg-white"],["class","flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between p-6 sm:py-8 sm:px-10  bg-card dark:bg-transparent",4,"ngIf"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-2","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],["class"," mr-3",4,"ngIf"],[1,"row"],[3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup"],[2,"display","grid","padding","5%","padding-top","0"],["matStepLabel",""],[1,"grid","gap-6","mb-6","md:grid-cols-2","mt-10"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","w-full"],["matInput","","name","ref","formControlName","ref"],["matInput","","name","rib","formControlName","rib","maxlength","20","placeholder","12-345-0000000000000-28"],[1,"text-yellow-500","text-xs","my-0"],["matInput","","name","proprietaire","formControlName","proprietaire"],["appearance","outline",1,"w-full"],["matInput","","formControlName","pays",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"md:col-span-2"],["matInput","","name","adresse","formControlName","adresse"],[1,"grid","justify-items-end"],["matStepperNext","",1,"button-black"],["matInput","","name","libelle","formControlName","libelle"],["type","number","pattern","[0-9.-]*","matInput","","name","swift","formControlName","swift"],["type","number","pattern","[0-9.-]*","matInput","","name","soldeInit","formControlName","soldeInit"],["type","number","pattern","[0-9.-]*","matInput","","name","soldeMin","formControlName","soldeMin"],["name","TypeCompte","formControlName","TypeCompte",3,"selectionChange"],["value","0"],["value","1"],["value","2"],["name","etat","formControlName","etat",3,"selectionChange"],["value","OUVERT"],["value","FERME"],[1,"flex","items-center"],["name","devise","formControlName","devise",3,"selectionChange"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-10","text-yellow-400",3,"svgIcon"],["matInput","","formControlName","bank",3,"matAutocomplete"],["auto2","matAutocomplete"],["name","comptable","formControlName","comptable",3,"selectionChange"],["name","codeComp","formControlName","codeComp",3,"selectionChange"],["matInput","","name","commentaire","formControlName","commentaire"],[1,"relative","mt-10","..."],[1,"absolute","bottom-0","right-0","grid","grid-cols-2","gap-2","..."],["type","button",1,"button-black"],["type","submit",1,"button-yellow",3,"click"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2","mb-5"],[1,"title-1","font-bold"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"mr-3"],["mat-stroked-button","",3,"click"],["svgIcon","mat_outline:arrow_back"],[1,"stepper-label","font-bold","text-2xl"],[3,"value"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"div",0),e.YNc(2,Ge,13,1,"div",1),e.TgZ(3,"div",2),e.YNc(4,Le,4,0,"div",3),e.qZA(),e.TgZ(5,"div",4)(6,"mat-vertical-stepper",5,6)(8,"mat-step",7)(9,"form",8)(10,"div",9),e.YNc(11,je,2,0,"ng-template",10),e.TgZ(12,"div",11)(13,"div")(14,"mat-form-field",12)(15,"mat-label"),e._uU(16,"Ref"),e.qZA(),e._UZ(17,"input",13),e.qZA()(),e.TgZ(18,"div")(19,"mat-form-field",12)(20,"mat-label"),e._uU(21,"RIB/RIF"),e.qZA(),e._UZ(22,"input",14),e.qZA(),e.TgZ(23,"label",15),e._uU(24," Doit obtenir exactement 20 chiffres* "),e.qZA()(),e.TgZ(25,"div")(26,"mat-form-field",12)(27,"mat-label"),e._uU(28,"Nom du propri\xe9taire"),e.qZA(),e._UZ(29,"input",16),e.qZA()(),e.TgZ(30,"div")(31,"mat-form-field",17)(32,"mat-label"),e._uU(33,"Pays"),e.qZA(),e._UZ(34,"input",18),e.TgZ(35,"mat-autocomplete",19,20),e.NdJ("optionSelected",function(s){return t.onSelectNationnality(s)}),e.YNc(37,He,2,2,"mat-option",21),e.ALo(38,"async"),e.qZA()()(),e.TgZ(39,"div",22)(40,"mat-form-field",12)(41,"mat-label"),e._uU(42,"Adresse"),e.qZA(),e._UZ(43,"input",23),e.qZA()()(),e.TgZ(44,"div",24)(45,"button",25),e._uU(46,"Suivant"),e.qZA()()()()(),e.TgZ(47,"mat-step",7)(48,"form",8)(49,"div",9),e.YNc(50,ze,2,0,"ng-template",10),e.TgZ(51,"div",11)(52,"div")(53,"mat-form-field",12)(54,"mat-label"),e._uU(55,"Libelle compte caisse "),e.qZA(),e._UZ(56,"input",26),e.qZA()(),e.TgZ(57,"div")(58,"mat-form-field",12)(59,"mat-label"),e._uU(60,"SWIFT bancaire"),e.qZA(),e._UZ(61,"input",27),e.qZA()(),e.TgZ(62,"div")(63,"mat-form-field",12)(64,"mat-label"),e._uU(65,"Solde initial "),e.qZA(),e._UZ(66,"input",28),e.qZA()(),e.TgZ(67,"div")(68,"mat-form-field",12)(69,"mat-label"),e._uU(70,"Solde minimum autoris\xe9 "),e.qZA(),e._UZ(71,"input",29),e.qZA()(),e.TgZ(72,"div")(73,"mat-form-field",12)(74,"mat-label"),e._uU(75,"Type de compte "),e.qZA(),e.TgZ(76,"mat-select",30),e.NdJ("selectionChange",function(s){return t.getselectedtype(s)}),e.TgZ(77,"mat-option",31),e._uU(78,"Compte bancaire d'\xe9pargne"),e.qZA(),e.TgZ(79,"mat-option",32),e._uU(80,"Compte bancaire actuel _ou_carte"),e.qZA(),e.TgZ(81,"mat-option",33),e._uU(82,"Compte de tr\xe9sorerie liquide"),e.qZA()()()(),e.TgZ(83,"div")(84,"mat-form-field",12)(85,"mat-label"),e._uU(86,"Etat "),e.qZA(),e.TgZ(87,"mat-select",34),e.NdJ("selectionChange",function(s){return t.getselectedstatus(s)}),e.TgZ(88,"mat-option",35),e._uU(89,"Ouvert"),e.qZA(),e.TgZ(90,"mat-option",36),e._uU(91,"Fermer"),e.qZA()()()(),e.TgZ(92,"div")(93,"div",37)(94,"mat-form-field",12)(95,"mat-label"),e._uU(96,"Devise"),e.qZA(),e.TgZ(97,"mat-select",38),e.NdJ("selectionChange",function(s){return t.getselectedcurrency(s)}),e.YNc(98,$e,2,2,"mat-option",21),e.qZA()(),e.TgZ(99,"button",39),e.NdJ("click",function(){return t.addDevise()}),e._UZ(100,"mat-icon",40),e.qZA()()(),e.TgZ(101,"div")(102,"mat-form-field",17)(103,"mat-label"),e._uU(104,"Nom Banque "),e.qZA(),e._UZ(105,"input",41),e.TgZ(106,"mat-autocomplete",19,42),e.NdJ("optionSelected",function(s){return t.onSelectBank(s)}),e.YNc(108,Ke,2,2,"mat-option",21),e.ALo(109,"async"),e.qZA()()()(),e.TgZ(110,"div",24)(111,"button",25),e._uU(112,"Suivant"),e.qZA()()()()(),e.TgZ(113,"mat-step",7)(114,"form",8)(115,"div",9),e.YNc(116,We,2,0,"ng-template",10),e.TgZ(117,"div",11)(118,"div")(119,"mat-form-field",12)(120,"mat-label"),e._uU(121,"Compte comptable "),e.qZA(),e.TgZ(122,"mat-select",43),e.NdJ("selectionChange",function(s){return t.getselectedcomptecomtable(s)}),e.YNc(123,Xe,2,2,"mat-option",21),e.qZA()()(),e.TgZ(124,"div")(125,"mat-form-field",12)(126,"mat-label"),e._uU(127,"Code comptable "),e.qZA(),e.TgZ(128,"mat-select",44),e.NdJ("selectionChange",function(s){return t.getselectedcodecomtable(s)}),e.YNc(129,et,2,2,"mat-option",21),e.qZA()()(),e.TgZ(130,"div",22)(131,"mat-form-field",12)(132,"mat-label"),e._uU(133,"Commentaire"),e.qZA(),e._UZ(134,"textarea",45),e.qZA()()()()(),e.TgZ(135,"div",46)(136,"div",47)(137,"button",48),e._uU(138,"Annuler"),e.qZA(),e.TgZ(139,"button",49),e.NdJ("click",function(){return t.onAddcompteFormSubmit()}),e._uU(140,"Cr\xe9er un compte"),e.qZA()()()()()()()()),2&i){const a=e.MAs(36),s=e.MAs(107);e.xp6(2),e.Q6J("ngIf",!t.notShow),e.xp6(2),e.Q6J("ngIf",!t.notShow),e.xp6(2),e.Q6J("linear",t.isLinear),e.xp6(2),e.Q6J("stepControl",t.myFormInfoProprietaire),e.xp6(1),e.Q6J("formGroup",t.myFormInfoProprietaire),e.xp6(25),e.Q6J("matAutocomplete",a),e.xp6(3),e.Q6J("ngForOf",e.lcZ(38,17,t.filteredNationnalities)),e.xp6(10),e.Q6J("stepControl",t.myFormCompProprietaire),e.xp6(1),e.Q6J("formGroup",t.myFormCompProprietaire),e.xp6(50),e.Q6J("ngForOf",t.currencies),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(5),e.Q6J("matAutocomplete",s),e.xp6(3),e.Q6J("ngForOf",e.lcZ(109,19,t.filteredBank)),e.xp6(5),e.Q6J("stepControl",t.myFormComptable),e.xp6(1),e.Q6J("formGroup",t.myFormComptable),e.xp6(9),e.Q6J("ngForOf",t.comptecomptablelist),e.xp6(6),e.Q6J("ngForOf",t.codecomptablelist)}},dependencies:[m.sg,m.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.nD,o.c5,o.sg,o.u,G.XC,L.ey,G.ZL,d.KE,d.hX,d.R9,b.Nt,K.gD,j.C0,j.VY,j.Vq,j.Ic,H.lW,H.RK,x.Hw,m.Ov]});class F{constructor(i,t,a,s,l){this.caisseservice=i,this.buillingService=t,this.dialogRef=a,this.toast=s,this.dialog=l,this.addCaisseForm=new o.cw({nom:new o.NI("",[o.kI.required]),compte:new o.NI("",[o.kI.required]),montant:new o.NI("",[o.kI.required])}),this.bankaccountList=[],this.initialTransaction=new Ye("",0,"CREDIT"),this.montantInitialCaisse=0,this.caisseListe=[]}ngOnInit(){this.getAllCompte()}onFormSubmit(){this.addCaisseForm.valid&&this.caisseservice.addCaisse({label:this.addCaisseForm.value.nom,bankAccount:this.addCaisseForm.value.compte,tenantId:this.currentTenanId}).subscribe(t=>{this.montantInitialCaisse=this.addCaisseForm.value.montant,this.initialTransaction.caisse=t.uuid,this.initialTransaction.amount=this.montantInitialCaisse,this.caisseListe=t,this.dialogRef.close(this.caisseListe),this.buillingService.saveTransactionForFeedCaisse(this.initialTransaction).subscribe(a=>{this.toast.success({detail:"Succ\xe8s! Caisse ajout\xe9e avec succ\xe8s",duration:3e3})})},t=>{console.error("something went wrong"),this.toast.error({detail:"Erreur! ",duration:3e3})})}getAllCompte(){this.caisseservice.getAllComptesByTenantId().subscribe(i=>{i.forEach(t=>{this.currentTenanId=t.tenantId}),this.bankaccountList=i})}getselectedbankaccount(i){this.addCaisseForm.value.compte=i.value}addCaisse(){this.dialog.open(I,{height:"900px",width:"900px",data:{dataKey:!0}}).afterClosed().subscribe(t=>{null!=t&&this.bankaccountList.push(t)})}}F.\u0275fac=function(i){return new(i||F)(e.Y36(A.t),e.Y36(Z.e),e.Y36(u.so),e.Y36(g.s),e.Y36(u.uw))},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-add-caisse"]],decls:32,vars:3,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-100"],[1,"flex","justify-center","mb-2"],["src","../../../../../../assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center"],[1,"text-black","dark:text-white","font-bold"],[1,"grid","grid-cols-1"],["id","form1","role","form","ngNativeValidate","",3,"formGroup"],[1,"mb-4"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","w-full"],["matInput","","formControlName","nom","name","nom"],[1,"flex","items-center","mb-4"],["name","compte","formControlName","compte",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-10","text-yellow-400",3,"svgIcon"],["type","number","pattern","[0-9.-]*","matInput","","name","montant","formControlName","montant"],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","submit",1,"button-yellow",3,"click"],[3,"value"]],template:function(i,t){1&i&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div")(3,"div",1)(4,"div",2),e._UZ(5,"img",3),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Ajouter une caisse"),e.qZA()()(),e.TgZ(9,"div",6)(10,"form",7)(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),e._uU(14,"Nom "),e.qZA(),e._UZ(15,"input",10),e.qZA()(),e.TgZ(16,"div",11)(17,"mat-form-field",9)(18,"mat-label"),e._uU(19,"Compte bancaire"),e.qZA(),e.TgZ(20,"mat-select",12),e.NdJ("selectionChange",function(s){return t.getselectedbankaccount(s)}),e.YNc(21,tt,2,2,"mat-option",13),e.qZA()(),e.TgZ(22,"button",14),e.NdJ("click",function(){return t.addCaisse()}),e._UZ(23,"mat-icon",15),e.qZA()(),e.TgZ(24,"div",8)(25,"mat-form-field",9)(26,"mat-label"),e._uU(27,"Montant initial"),e.qZA(),e._UZ(28,"input",16),e.qZA()(),e.TgZ(29,"div",17)(30,"button",18),e.NdJ("click",function(){return t.onFormSubmit()}),e._uU(31,"Ajouter"),e.qZA()()()()()(),e.BQk()),2&i&&(e.xp6(10),e.Q6J("formGroup",t.addCaisseForm),e.xp6(11),e.Q6J("ngForOf",t.bankaccountList),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"))},dependencies:[m.sg,o.Fj,o.wV,o.JJ,o.JL,o.c5,o.sg,o.u,L.ey,d.KE,d.hX,d.R9,b.Nt,K.gD,H.RK,x.Hw,u.xY,u.H8]});const it=["etatCaissePaginator"];function nt(n,i){if(1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" 0 ",t.selectedCaisse.bankAccountFund.currency.label,"")}}function at(n,i){if(1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",t.montantFinal," ",t.selectedCaisse.bankAccountFund.currency.label,"")}}function ot(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Date "),e.qZA())}function st(n,i){if(1&n&&(e.TgZ(0,"td",36),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.created,"dd/MM/yyyy HH:mm")," ")}}function rt(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Date Valeur "),e.qZA())}function lt(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function ct(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",t.valueDate," ")}}function mt(n,i){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,lt,2,0,"span",7),e.YNc(2,ct,2,1,"span",7),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.valueDate),e.xp6(1),e.Q6J("ngIf",null!=t.valueDate)}}function pt(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Description "),e.qZA())}function dt(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Virement"),e.qZA())}function ut(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Esp\xe8ce"),e.qZA())}function _t(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cheque"),e.qZA())}function ft(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Traite mensuelle"),e.qZA())}function gt(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Carte cr\xe9dit"),e.qZA())}function ht(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Solder du compte client"),e.qZA())}function Ct(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Montant Caisse"),e.qZA())}function xt(n,i){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,dt,2,0,"span",7),e.YNc(2,ut,2,0,"span",7),e.YNc(3,_t,2,0,"span",7),e.YNc(4,ft,2,0,"span",7),e.YNc(5,gt,2,0,"span",7),e.YNc(6,ht,2,0,"span",7),e.YNc(7,Ct,2,0,"span",7),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","VIR"==t.payType),e.xp6(1),e.Q6J("ngIf","CSH"==t.payType),e.xp6(1),e.Q6J("ngIf","CHQ"==t.payType),e.xp6(1),e.Q6J("ngIf","PRO"==t.payType),e.xp6(1),e.Q6J("ngIf","CRD"==t.payType),e.xp6(1),e.Q6J("ngIf","ACT"==t.payType),e.xp6(1),e.Q6J("ngIf",null==t.payType)}}function vt(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1,"R\xe9f\xe9rence "),e.qZA())}function bt(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Tt(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t.invoice?null:t.invoice.invoiceNumber,"")}}function Zt(n,i){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,bt,2,0,"span",7),e.YNc(2,Tt,2,1,"span",7),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",null==(null==t.invoice?null:t.invoice.invoiceNumber)),e.xp6(1),e.Q6J("ngIf",null!=(null==t.invoice?null:t.invoice.invoiceNumber))}}function yt(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," D\xe9bit "),e.qZA())}function wt(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.amount)}}function At(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Dt(n,i){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,wt,2,1,"span",7),e.YNc(2,At,2,0,"span",7),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","DEBIT"==t.sens),e.xp6(1),e.Q6J("ngIf","CREDIT"==t.sens)}}function It(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Cr\xe9dit "),e.qZA())}function Ut(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Nt(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.amount)}}function qt(n,i){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,Ut,2,0,"span",7),e.YNc(2,Nt,2,1,"span",7),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","DEBIT"==t.sens),e.xp6(1),e.Q6J("ngIf","CREDIT"==t.sens)}}function Et(n,i){1&n&&e._UZ(0,"tr",37)}function kt(n,i){1&n&&e._UZ(0,"tr",38)}const Ft=function(){return[5,10,20]};class B{constructor(i,t,a,s){this.data=i,this.buillingService=t,this.toast=a,this.formBuilder=s,this.isRequired=!0,this.caisseGeneral=[],this.montantFinal=0,this.soldeDepart=0,this.endDate=new Date,this.today=(new Date).toJSON().split("T")[0],this.listeEtatCaisse=[],this.displayedColumnsEtatCaisse=["date","dateValeur","description","reference","debit","credit"],this.searchForm=new o.cw({start_date:new o.NI(null),end_date:new o.NI(null)}),this.intervalDate=new h(new Date,new Date),this.newIntervalDate=new h(new Date,new Date)}ngOnInit(){this.currentUuid=this.data.dataKey.uuid,this.selectedCaisse=this.data.dataKey,this.getAllTransactions(),this.removeDescriptionControl()}getAllTransactions(){let i=1;this.buillingService.getAllTransactionsByCaisseUUID(this.currentUuid).subscribe(t=>{this.caisseGeneral=t,this.soldeDepart=this.montantFinal,this.caisseGeneral.forEach(a=>{"DEBIT"==a.sens?this.montantFinal-=a.amount:this.montantFinal+=a.amount,null!=a.invoice&&this.buillingService.getInvoiceByUUID(a.invoice).subscribe(s=>{this.caisseGeneral[i].invoice=s,i++})}),this.dataSourceEtatCaisse=new r.by(this.caisseGeneral),this.setCaissePaginator(),console.log("soldeDepart",this.soldeDepart)})}setCaissePaginator(){this.dataSourceEtatCaisse.paginator=this.etatCaissePaginator}addDays(i,t){var a=new Date(i);return a.setDate(a.getDate()+t),a}setInterval(){this.intervalDate.end=this.addDays(this.searchForm.value.end_date,1),this.intervalDate.start=this.searchForm.value.start_date,this.searchForm.value.start_date>this.searchForm.value.end_date?this.toast.warning({detail:"Warning! Enter une date valide",duration:5e3}):(this.getAllTransactionsBetweenTwoDatesByCaisseUUID(this.selectedCaisse.uuid,this.intervalDate),this.getTransactionHistoryByCaisseUUID(this.selectedCaisse.uuid,this.intervalDate),this.setCaissePaginator()),this.interval=0,this.interval2=0}getAllTransactionsBetweenTwoDatesByCaisseUUID(i,t){this.buillingService.getAllTransactionsBetweenTwoDatesByCaisseUUID(i,t).subscribe(a=>{this.montantFinal=0,this.caisseGeneral=a,console.log("montantFinal",this.montantFinal),this.dataSourceEtatCaisse=new r.by(this.caisseGeneral),this.setCaissePaginator(),this.getAllInvoices()})}getTransactionHistoryByCaisseUUID(i,t){this.buillingService.getTransactionHistoryByCaisseUUID(i,t).subscribe(a=>{console.log("res",a),a?this.getTransactionHistoryGreaterByCaisseUUID(a,i,t):this.buillingService.getAllTransactionsBeforeDateByCaisseUUID(i,t).subscribe(s=>{console.log("response",s),s.forEach(l=>{"DEBIT"==l.sens?this.soldeDepart-=l.amount:this.soldeDepart+=l.amount}),console.log("soldeDepart5",this.soldeDepart)})})}getTransactionHistoryGreaterByCaisseUUID(i,t,a){console.log("h2"),this.buillingService.getTransactionHistoryGreaterByCaisseUUID(t,a).subscribe(s=>{s?(this.newDateResponse=new Date(i.date),this.newDateGreater=new Date(s.date),this.newDateStart=new Date(this.intervalDate.start),this.interval=(this.newDateStart.getTime()-this.newDateResponse.getTime())/864e5,this.interval2=(this.newDateStart.getTime()-this.newDateGreater.getTime())/864e5):this.interval2=32,i?this.interval<Math.abs(this.interval2)?(this.newIntervalDate.start=i.date,this.newIntervalDate.end=this.intervalDate.start,this.getAllTransactionsBetweenTwoDatesByCaisseUUIDDebitIncre(t,a),this.soldeDepart+=i.amount,console.log("soldeDepart2",this.soldeDepart)):(this.newIntervalDate.start=this.intervalDate.start,this.newIntervalDate.end=s.date,this.getAllTransactionsBetweenTwoDatesByCaisseUUIDDebitDes(t,a),this.soldeDepart+=s.amount,console.log("soldeDepart3",this.soldeDepart)):this.soldeDepart=0,console.log("soldeDepart4",this.soldeDepart)})}getAllTransactionsBetweenTwoDatesByCaisseUUIDDebitIncre(i,t){this.buillingService.getAllTransactionsBetweenTwoDatesByCaisseUUID(i,t).subscribe(a=>{a.forEach(s=>{"DEBIT"==s.sens?this.soldeDepart-=s.amount:this.soldeDepart+=s.amount})})}getAllTransactionsBetweenTwoDatesByCaisseUUIDDebitDes(i,t){this.buillingService.getAllTransactionsBetweenTwoDatesByCaisseUUID(i,t).subscribe(a=>{a.forEach(s=>{"DEBIT"==s.sens?this.soldeDepart+=s.amount:this.soldeDepart-=s.amount})})}getAllInvoices(){let i=-1;this.buillingService.getAllInvoices().subscribe(t=>{this.allInvoices=t,this.caisseGeneral.forEach(a=>{i++,"DEBIT"==a.sens?this.montantFinal-=a.amount:this.montantFinal+=a.amount,this.allInvoices.forEach(s=>{s.uuid==a.invoice&&(this.caisseGeneral[i].invoice=s)})})}),console.log("montantFinal2",this.montantFinal)}reset(){this.caisseGeneral=[],this.soldeDepart=0,this.montantFinal=0,this.endDate=new Date,this.intervalDate=new h(new Date,new Date),this.removeDescriptionControl(),this.getAllTransactions(),this.setCaissePaginator()}removeDescriptionControl(){this.searchForm=this.formBuilder.group({start_date:[""],end_date:[""]}),this.isRequired=!1}}B.\u0275fac=function(i){return new(i||B)(e.Y36(u.WI),e.Y36(Z.e),e.Y36(g.s),e.Y36(o.qu))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-preview-caisse"]],viewQuery:function(i,t){if(1&i&&e.Gf(it,5),2&i){let a;e.iGM(a=e.CRH())&&(t.etatCaissePaginator=a.first)}},decls:79,vars:20,consts:[[1,"grid","grid-cols-2","gap-4","content-center"],[1,"grid","grid-rows-3","grid-flow-col","gap-3"],[1,"text-neutral-950","font-bold"],[1,"flex","justify-end"],[1,"flex","justify-center","mx-auto","h-18"],[1,"text-center","shadow-lg","shadow-gray-300","w-1/5","bg-mat-card"],[1,"mt-3"],[4,"ngIf"],[3,"formGroup"],[1,"grid","grid-cols-3","gap-4","mt-10"],["appearance","outline","subscriptSizing","dynamic",1,"search","w-full"],["matInput","","formControlName","start_date",3,"matDatepicker","max","required"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","end_date",3,"matDatepicker","max","required"],["picker2",""],[1,"grid","grid-cols-2","gap-4","mt-2"],[1,"button-yellow-search-etat","font-bold","w-full",3,"click"],[1,"button-black-reset-etat","font-bold","w-full",3,"click"],[1,"mt-10","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","dateValeur"],["matColumnDef","description"],["matColumnDef","reference"],["matColumnDef","debit"],["matColumnDef","credit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["etatCaissePaginator",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-header-row",""],["mat-row",""]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"label",2),e._uU(4,"Caisse :"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"label",2),e._uU(9,"Devise : "),e.qZA(),e.TgZ(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"div")(13,"label",2),e._uU(14,"Solde depart : "),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.qZA()()(),e.TgZ(17,"div",3)(18,"label",2),e._uU(19,"Num Compte : "),e.qZA(),e.TgZ(20,"span"),e._uU(21),e.qZA()()(),e.TgZ(22,"div",4)(23,"mat-card",5)(24,"mat-card-subtitle",6),e._uU(25,"Montant Total :"),e.qZA(),e.YNc(26,nt,2,1,"mat-card-title",7),e.YNc(27,at,2,2,"mat-card-title",7),e.qZA()(),e.TgZ(28,"form",8)(29,"div",9)(30,"div")(31,"mat-form-field",10)(32,"mat-label"),e._uU(33,"Date de d\xe9but *"),e.qZA(),e._UZ(34,"input",11)(35,"mat-datepicker-toggle",12)(36,"mat-datepicker",null,13),e.qZA()(),e.TgZ(38,"div")(39,"mat-form-field",10)(40,"mat-label"),e._uU(41,"Date de fin * "),e.qZA(),e._UZ(42,"input",14)(43,"mat-datepicker-toggle",12)(44,"mat-datepicker",null,15),e.qZA()(),e.TgZ(46,"div",16)(47,"div")(48,"button",17),e.NdJ("click",function(){return t.setInterval()}),e._uU(49,"Rechercher"),e.qZA()(),e.TgZ(50,"div")(51,"button",18),e.NdJ("click",function(){return t.reset()}),e._uU(52,"Reset"),e.qZA()()()()(),e.TgZ(53,"div",19)(54,"div",20)(55,"div",21)(56,"table",22),e.ynx(57,23),e.YNc(58,ot,2,0,"th",24),e.YNc(59,st,3,4,"td",25),e.BQk(),e.ynx(60,26),e.YNc(61,rt,2,0,"th",24),e.YNc(62,mt,3,2,"td",25),e.BQk(),e.ynx(63,27),e.YNc(64,pt,2,0,"th",24),e.YNc(65,xt,8,7,"td",25),e.BQk(),e.ynx(66,28),e.YNc(67,vt,2,0,"th",24),e.YNc(68,Zt,3,2,"td",25),e.BQk(),e.ynx(69,29),e.YNc(70,yt,2,0,"th",24),e.YNc(71,Dt,3,2,"td",25),e.BQk(),e.ynx(72,30),e.YNc(73,It,2,0,"th",24),e.YNc(74,qt,3,2,"td",25),e.BQk(),e.YNc(75,Et,1,0,"tr",31),e.YNc(76,kt,1,0,"tr",32),e.qZA(),e._UZ(77,"mat-paginator",33,34),e.qZA()()()),2&i){const a=e.MAs(37),s=e.MAs(45);e.xp6(6),e.hij(" ",t.selectedCaisse.label,""),e.xp6(5),e.Oqu(t.selectedCaisse.bankAccountFund.currency.name),e.xp6(5),e.Oqu(t.soldeDepart),e.xp6(5),e.hij(" ",t.selectedCaisse.bankAccountFund.accountNumber,""),e.xp6(5),e.Q6J("ngIf",0===(null==t.caisseGeneral?null:t.caisseGeneral.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==t.caisseGeneral?null:t.caisseGeneral.length)),e.xp6(1),e.Q6J("formGroup",t.searchForm),e.xp6(6),e.Q6J("matDatepicker",a)("max",t.today)("required",t.isRequired),e.xp6(1),e.Q6J("for",a),e.xp6(7),e.Q6J("matDatepicker",s)("max",t.today)("required",t.isRequired),e.xp6(1),e.Q6J("for",s),e.xp6(13),e.Q6J("dataSource",t.dataSourceEtatCaisse),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumnsEtatCaisse),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsEtatCaisse),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(19,Ft))}},dependencies:[m.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,C.Mq,C.hl,C.nW,d.KE,d.hX,d.R9,b.Nt,y.a8,y.$j,y.n5,E.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,m.uU],styles:[".button-yellow-search-etat[_ngcontent-%COMP%]{background-color:#efcc0b;color:#fff;font-size:15px;border-radius:10px;border:none;height:40px;width:80%;font-family:Poppins,Serif;box-shadow:0 3px 6px #88868633}.button-black-reset-etat[_ngcontent-%COMP%]{background-color:#1c1c2b;color:#fff;font-size:15px;border-radius:10px;border:none;height:40px;width:80%;font-family:Poppins,Serif;box-shadow:0 3px 6px #88868633}.bg-mat-card[_ngcontent-%COMP%]{background-color:#f8f9f9}"]});var z=c(3848);const Bt=["caissePaginator"];function Jt(n,i){1&n&&e._UZ(0,"tr",36)}function St(n,i){1&n&&e._UZ(0,"tr",37)}function Qt(n,i){1&n&&(e.TgZ(0,"th",38),e._uU(1,"Nom Caisse "),e.qZA())}function Yt(n,i){if(1&n&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.label," ")}}function Rt(n,i){1&n&&(e.TgZ(0,"th",38),e._uU(1,"Compte Bancaire"),e.qZA())}function Pt(n,i){if(1&n&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.bankAccountFund.accountNumber," ")}}function Ot(n,i){1&n&&(e.TgZ(0,"th",40),e._uU(1," Etat Caisse "),e.qZA())}function Mt(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",41)(1,"img",42),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.previewCaisse(l))}),e.qZA()()}}function Vt(n,i){1&n&&(e.TgZ(0,"div",43)(1,"div",43),e._UZ(2,"img",44),e.qZA(),e._UZ(3,"hr"),e.qZA())}const Gt=function(){return[5,10,20]};class J{constructor(i,t){this.caisseservice=i,this.dialog=t,this.displayedColumnsCaisse=["nom","compte","etat"],this.caisseList=[]}ngOnInit(){this.getAllFunds()}getAllFunds(){this.caisseservice.getAllFunds().subscribe(i=>{this.caisseList=i,this.dataSourceCaisse=new r.by(this.caisseList),this.setCaissePaginator()})}setCaissePaginator(){this.dataSourceCaisse.paginator=this.caissePaginator}addCaisse(){this.dialog.open(F,{}).afterClosed().subscribe(t=>{null!=t&&(this.caisseList.push(t),this.dataSourceCaisse=new r.by(this.caisseList))})}previewCaisse(i){this.dialog.open(B,{height:"1000",width:"1000px",data:{dataKey:i}})}}J.\u0275fac=function(i){return new(i||J)(e.Y36(A.t),e.Y36(u.uw))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-caisse"]],viewQuery:function(i,t){if(1&i&&e.Gf(Bt,5),2&i){let a;e.iGM(a=e.CRH())&&(t.caissePaginator=a.first)}},decls:46,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400"],["label","Caisses",1,"rtl:rtlsubmenu"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],["type","button",1,"button-yellow-plus","px-5","py-2.5","text-center","inline-flex","items-center","font-bold",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-2"],[1,"title-3","pt-8","font-bold"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","nom"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","compte"],["matColumnDef","etat"],[1,"md:w-2"],["mat-header-cell","","class","text-center ...",4,"matHeaderCellDef"],["mat-cell","","class","text-center ...",4,"matCellDef"],["class","flex  justify-center",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["caissePaginator",""],["label","Etat Caisse General ",1,"rtl:rtlsubmenu"],["mat-header-row",""],["mat-row",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-header-cell","",1,"text-center","..."],["mat-cell","",1,"text-center","..."],["src","./assets/imgs/eye.svg",1,"image-svg","m-auto","cursor-pointer",3,"click"],[1,"flex","justify-center"],["src","assets/imgs/undraw_select.svg",1,"w-4/12"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5," Caisse "),e.qZA()(),e.TgZ(6,"div",5)(7,"div")(8,"a",6),e._uU(9,"Accueil"),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"mat-icon",8),e.TgZ(12,"span",9),e._uU(13," Caisse "),e.qZA()()()()(),e.TgZ(14,"div",10)(15,"div",11)(16,"mat-tab-group")(17,"mat-tab",12)(18,"div",13)(19,"div",14)(20,"button",15),e.NdJ("click",function(){return t.addCaisse()}),e._uU(21," Ajouter une caisse "),e._UZ(22,"mat-icon",16),e.qZA(),e.TgZ(23,"h2",17),e._uU(24," Liste des caisse financiers "),e.qZA(),e.TgZ(25,"div",18)(26,"div",19)(27,"div",20)(28,"table",21),e.YNc(29,Jt,1,0,"tr",22),e.YNc(30,St,1,0,"tr",23),e.ynx(31,24),e.YNc(32,Qt,2,0,"th",25),e.YNc(33,Yt,2,1,"td",26),e.BQk(),e.ynx(34,27),e.YNc(35,Rt,2,0,"th",25),e.YNc(36,Pt,2,1,"td",26),e.BQk(),e.ynx(37,28),e.TgZ(38,"div",29),e.YNc(39,Ot,2,0,"th",30),e.YNc(40,Mt,2,0,"td",31),e.qZA(),e.BQk(),e.qZA(),e.YNc(41,Vt,4,0,"div",32),e._UZ(42,"mat-paginator",33,34),e.qZA()()()()()(),e.TgZ(44,"mat-tab",35),e._UZ(45,"app-etat-general-caisse"),e.qZA()()()()()),2&i&&(e.xp6(11),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(17),e.Q6J("dataSource",t.dataSourceCaisse),e.xp6(1),e.Q6J("matHeaderRowDef",t.displayedColumnsCaisse),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsCaisse),e.xp6(11),e.Q6J("ngIf",0==t.caisseList),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,Gt)))},dependencies:[m.O5,z.uX,z.SP,x.Hw,E.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,w]});var te=c(81794);const Lt=["transactionPaginator"];function jt(n,i){1&n&&e._UZ(0,"mat-icon",67),2&n&&e.Q6J("svgIcon","heroicons_outline:check-circle")}function Ht(n,i){1&n&&e._UZ(0,"mat-icon",68),2&n&&e.Q6J("svgIcon","heroicons_outline:exclamation-circle")}function zt(n,i){if(1&n&&(e.TgZ(0,"div",69),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" de ",e.xi3(2,2,t.searchForm.getRawValue().start,"dd/MM/yyyy")," \xe0 ",e.xi3(3,5,t.searchForm.getRawValue().end,"dd/MM/yyyy")," ")}}function $t(n,i){if(1&n&&(e.TgZ(0,"div",70),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" de ",e.xi3(2,2,t.searchForm.getRawValue().start,"dd/MM/yyyy")," \xe0 ",e.xi3(3,5,t.searchForm.getRawValue().end,"dd/MM/yyyy")," ")}}function Kt(n,i){if(1&n&&(e.TgZ(0,"div",71),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("+",e.xi3(2,1,t.difference,"4.1-5")," DT")}}function Wt(n,i){if(1&n&&(e.TgZ(0,"div",72),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("",e.xi3(2,1,t.difference,"4.1-5")," DT")}}function Xt(n,i){if(1&n&&(e.TgZ(0,"div",52)(1,"div",53),e.YNc(2,jt,1,1,"mat-icon",54),e.YNc(3,Ht,1,1,"mat-icon",55),e.qZA(),e.TgZ(4,"div",56)(5,"div",57)(6,"div",58),e._uU(7,"D\xe9claration pr\xe9cedente"),e.qZA(),e.YNc(8,zt,4,8,"div",59),e.YNc(9,$t,4,8,"div",60),e.qZA()(),e.TgZ(10,"div",61)(11,"div",62)(12,"div",63),e._uU(13,"Cr\xe9dit"),e.qZA(),e.TgZ(14,"div",64),e._uU(15),e.qZA()(),e.TgZ(16,"div",62)(17,"div",63),e._uU(18,"D\xe9bit"),e.qZA(),e.TgZ(19,"div",64),e._uU(20),e.qZA()(),e.TgZ(21,"div",62)(22,"div",63),e._uU(23,"Diff\xe9rence"),e.qZA(),e.YNc(24,Kt,3,4,"div",65),e.YNc(25,Wt,3,4,"div",66),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.difference>0),e.xp6(1),e.Q6J("ngIf",t.difference<0),e.xp6(5),e.Q6J("ngIf",t.difference>0),e.xp6(1),e.Q6J("ngIf",t.difference<0),e.xp6(6),e.hij("",t.credit," DT"),e.xp6(5),e.hij("",t.debit,"DT"),e.xp6(4),e.Q6J("ngIf",t.difference>0),e.xp6(1),e.Q6J("ngIf",t.difference<0)}}function ei(n,i){if(1&n&&(e.TgZ(0,"mat-option",73),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t.uuid),e.xp6(1),e.Oqu(t.alternative_Name)}}function ti(n,i){1&n&&(e.TgZ(0,"th",74),e._uU(1," Date "),e.qZA())}function ii(n,i){if(1&n&&(e.TgZ(0,"td",75),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.created,"dd/MM/yyyy HH:mm")," ")}}function ni(n,i){1&n&&(e.TgZ(0,"th",74),e._uU(1," Date Valeur "),e.qZA())}function ai(n,i){if(1&n&&(e.TgZ(0,"td",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.valueDate," ")}}function oi(n,i){1&n&&(e.TgZ(0,"th",74),e._uU(1," Description "),e.qZA())}function si(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Virement"),e.qZA())}function ri(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Esp\xe8ce"),e.qZA())}function li(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cheque"),e.qZA())}function ci(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Traite mensuelle"),e.qZA())}function mi(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Carte cr\xe9dit"),e.qZA())}function pi(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Solder du compte client"),e.qZA())}function di(n,i){if(1&n&&(e.TgZ(0,"td",75),e.YNc(1,si,2,0,"span",76),e.YNc(2,ri,2,0,"span",76),e.YNc(3,li,2,0,"span",76),e.YNc(4,ci,2,0,"span",76),e.YNc(5,mi,2,0,"span",76),e.YNc(6,pi,2,0,"span",76),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","VIR"==t.payType),e.xp6(1),e.Q6J("ngIf","CSH"==t.payType),e.xp6(1),e.Q6J("ngIf","CHQ"==t.payType),e.xp6(1),e.Q6J("ngIf","PRO"==t.payType),e.xp6(1),e.Q6J("ngIf","CRD"==t.payType),e.xp6(1),e.Q6J("ngIf","ACT"==t.payType)}}function ui(n,i){1&n&&(e.TgZ(0,"th",74),e._uU(1," R\xe9ference "),e.qZA())}function _i(n,i){if(1&n&&(e.TgZ(0,"td",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.refInvoice," ")}}function fi(n,i){1&n&&(e.TgZ(0,"th",74),e._uU(1," D\xe9bit "),e.qZA())}function gi(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.amount)}}function hi(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Ci(n,i){if(1&n&&(e.TgZ(0,"td",75),e.YNc(1,gi,2,1,"span",76),e.YNc(2,hi,2,0,"span",76),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","DEBIT"==t.sens),e.xp6(1),e.Q6J("ngIf","CREDIT"==t.sens)}}function xi(n,i){1&n&&(e.TgZ(0,"th",74),e._uU(1," Cr\xe9dit "),e.qZA())}function vi(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function bi(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.amount)}}function Ti(n,i){if(1&n&&(e.TgZ(0,"td",75),e.YNc(1,vi,2,0,"span",76),e.YNc(2,bi,2,1,"span",76),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","DEBIT"==t.sens),e.xp6(1),e.Q6J("ngIf","CREDIT"==t.sens)}}function Zi(n,i){1&n&&e._UZ(0,"tr",77)}function yi(n,i){1&n&&e._UZ(0,"tr",78)}function wi(n,i){1&n&&(e.TgZ(0,"div",79)(1,"span",80),e._uU(2,"Choisir un tier"),e.qZA(),e.TgZ(3,"div",81),e._UZ(4,"img",82),e.qZA()())}function Ai(n,i){1&n&&(e.TgZ(0,"div",79)(1,"div",83),e._UZ(2,"img",82),e.qZA(),e.TgZ(3,"span",80),e._uU(4,"Aucune donn\xe9e disponible dans le tableau "),e.qZA(),e._UZ(5,"hr"),e.qZA())}const Di=function(){return[5,10,20]};function Ii(n,i){1&n&&e._UZ(0,"mat-paginator",84,85),2&n&&e.Q6J("pageSizeOptions",e.DdM(1,Di))}function Ui(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6," Transactions "),e.qZA()(),e.TgZ(7,"div",6)(8,"div")(9,"a",7),e._uU(10,"Facture"),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"mat-icon",9),e.TgZ(13,"a",10),e._uU(14,"Transactions"),e.qZA()()()()(),e.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"h2",15),e._uU(20," \xc9tat tier "),e.qZA()(),e.TgZ(21,"div",14),e.YNc(22,Xt,26,8,"div",16),e.qZA()(),e.TgZ(23,"div",17)(24,"div",18)(25,"form",19)(26,"div",20)(27,"div",21)(28,"div",22)(29,"div",14)(30,"mat-form-field",23)(31,"mat-label"),e._uU(32,"Tiers"),e.qZA(),e.TgZ(33,"mat-select",24),e.NdJ("selectionChange",function(s){e.CHM(t);const l=e.oxw();return e.KtG(l.onSelectTier(s))}),e.TgZ(34,"mat-option",25),e._uU(35,"Client"),e.qZA(),e.TgZ(36,"mat-option",26),e._uU(37,"Fournisseur"),e.qZA(),e.TgZ(38,"mat-option",27),e._uU(39,"Client/Fournisseur"),e.qZA()()()(),e.TgZ(40,"div",14)(41,"mat-form-field",23)(42,"mat-label"),e._uU(43,"Tiers"),e.qZA(),e.TgZ(44,"mat-select",28),e.YNc(45,ei,2,2,"mat-option",29),e.qZA()()(),e.TgZ(46,"div",14)(47,"mat-form-field",30)(48,"mat-label"),e._uU(49,"Date de d\xe9but *"),e.qZA(),e._UZ(50,"input",31)(51,"mat-datepicker-toggle",32)(52,"mat-datepicker",null,33),e.qZA()(),e.TgZ(54,"div",14)(55,"mat-form-field",30)(56,"mat-label"),e._uU(57,"Date de fin * "),e.qZA(),e._UZ(58,"input",34)(59,"mat-datepicker-toggle",32)(60,"mat-datepicker",null,35),e.qZA()()()(),e.TgZ(62,"div",36)(63,"button",37),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.rechercher())}),e._uU(64,"Rechercher"),e.qZA()()()()()(),e.TgZ(65,"div",17)(66,"div",18)(67,"div",38)(68,"table",39),e.ynx(69,40),e.YNc(70,ti,2,0,"th",41),e.YNc(71,ii,3,4,"td",42),e.BQk(),e.ynx(72,43),e.YNc(73,ni,2,0,"th",41),e.YNc(74,ai,2,1,"td",42),e.BQk(),e.ynx(75,44),e.YNc(76,oi,2,0,"th",41),e.YNc(77,di,7,6,"td",42),e.BQk(),e.ynx(78,45),e.YNc(79,ui,2,0,"th",41),e.YNc(80,_i,2,1,"td",42),e.BQk(),e.ynx(81,46),e.YNc(82,fi,2,0,"th",41),e.YNc(83,Ci,3,2,"td",42),e.BQk(),e.ynx(84,47),e.YNc(85,xi,2,0,"th",41),e.YNc(86,Ti,3,2,"td",42),e.BQk(),e.YNc(87,Zi,1,0,"tr",48),e.YNc(88,yi,1,0,"tr",49),e.qZA(),e.YNc(89,wi,5,0,"div",50),e.YNc(90,Ai,6,0,"div",50),e.YNc(91,Ii,2,2,"mat-paginator",51),e.qZA()()()()()(),e.BQk()}if(2&n){const t=e.MAs(53),a=e.MAs(61),s=e.oxw();e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(10),e.Q6J("ngIf",0!=s.listTransactions.length),e.xp6(3),e.Q6J("formGroup",s.searchForm),e.xp6(20),e.Q6J("ngForOf",s.tiers),e.xp6(5),e.Q6J("matDatepicker",t)("max",s.today),e.xp6(1),e.Q6J("for",t),e.xp6(7),e.Q6J("matDatepicker",a)("max",s.today),e.xp6(1),e.Q6J("for",a),e.xp6(9),e.Q6J("dataSource",s.transactionsTable),e.xp6(19),e.Q6J("matHeaderRowDef",s.transactionsTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",s.transactionsTableColumns),e.xp6(1),e.Q6J("ngIf",""==s.searchForm.getRawValue().tier),e.xp6(1),e.Q6J("ngIf",""!=s.searchForm.getRawValue().tier&&0==s.listTransactions.length),e.xp6(1),e.Q6J("ngIf",0!=s.listTransactions.length)}}class S{constructor(i,t,a){this.fournisseurService=i,this.toast=t,this.buillingService=a,this.transactionsTableColumns=["date","dateValeur","description","Reference","debit","credit"],this.tiers=[],this.today=(new Date).toJSON().split("T")[0],this.searchForm=new o.cw({typeTier:new o.NI("",[o.kI.required]),start:new o.NI("",[o.kI.required]),end:new o.NI("",[o.kI.required]),tier:new o.NI("",[o.kI.required])}),this.listTransactions=[],this.debit=0,this.credit=0,this.difference=0}ngOnInit(){}onSelectTier(i){this.fournisseurService.getTiersByTypeNature(i.value).subscribe(t=>{this.tiers=t})}addDay(i){var t=new Date(i);return t.setDate(t.getDate()+1),t}rechercher(){this.searchForm.valid&&(this.searchForm.value.start>this.searchForm.value.end?this.toast.warning({detail:"Warning! Enter une date valide",duration:5e3}):this.getAllTransactionsByTier())}operationCalcul(i){this.initialize(),i.forEach(t=>{"DEBIT"==t.sens?(this.debit+=t.amount,this.difference-=t.amount):(this.credit+=t.amount,this.difference+=t.amount)})}getAllTransactionsByTier(){const i={tier:this.searchForm.getRawValue().tier,start:this.addDay(this.searchForm.getRawValue().start),end:this.addDay(this.searchForm.getRawValue().end)};this.buillingService.getAllTransactionsOfTierBetweenTwoDates(i).subscribe(t=>{this.operationCalcul(t),this.listTransactions=t,this.transactionsTable=new r.by(this.listTransactions),this.transactionsTable.paginator=this.transactionPaginator,this.setPaginator()})}setPaginator(){this.transactionsTable.paginator=this.transactionPaginator}initialize(){this.debit=0,this.credit=0,this.difference=0}}S.\u0275fac=function(i){return new(i||S)(e.Y36(te.K),e.Y36(g.s),e.Y36(Z.e))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-transactions"]],viewQuery:function(i,t){if(1&i&&e.Gf(Lt,5),2&i){let a;e.iGM(a=e.CRH())&&(t.transactionPaginator=a.first)}},decls:1,vars:0,consts:[[4,"transloco"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],[1,"grid","grid-cols-2","gap-2"],[1,"grid-cols"],[1,"title-3","pt-8","font-bold"],["class","relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden",4,"ngIf"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[3,"formGroup"],[1,"grid","grid-cols-4"],[1,"col-span-4"],[1,"grid","lg:grid-cols-4","md:grid-cols-2"],["appearance","outline"],["formControlName","typeTier",3,"selectionChange"],["value","CLIENT"],["value","FOURNISSEUR"],["value","BOTH"],["formControlName","tier"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matInput","","formControlName","start",3,"matDatepicker","max"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","end",3,"matDatepicker","max"],["picker2",""],[1,"col-span-1"],[1,"button-yellow-search","font-bold",3,"click"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","dateValeur"],["matColumnDef","description"],["matColumnDef","Reference"],["matColumnDef","debit"],["matColumnDef","credit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","flex flex-col my-2",4,"ngIf"],["showFirstLastButtons","","class","overflow-x-auto w-full","aria-label","Select page of periodic elements",3,"pageSizeOptions",4,"ngIf"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],["class","icon-size-24 opacity-25 text-green-500 dark:text-green-400",3,"svgIcon",4,"ngIf"],["class","icon-size-24 opacity-25 text-red-500 dark:text-red-400",3,"svgIcon",4,"ngIf"],[1,"flex","items-center"],[1,"flex","flex-col"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],["class","text-green-600 font-medium text-sm",4,"ngIf"],["class","text-red-600 font-medium text-sm",4,"ngIf"],[1,"flex","flex-row","flex-wrap","mt-4","-mx-6"],[1,"flex","flex-col","mx-6","my-3"],[1,"text-sm","font-medium","leading-none","text-secondary"],[1,"mt-2","font-medium","text-3xl","leading-none"],["class","mt-2 font-medium text-3xl text-green-500 leading-none",4,"ngIf"],["class","mt-2 font-medium text-3xl text-red-500 leading-none",4,"ngIf"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"icon-size-24","opacity-25","text-red-500","dark:text-red-400",3,"svgIcon"],[1,"text-green-600","font-medium","text-sm"],[1,"text-red-600","font-medium","text-sm"],[1,"mt-2","font-medium","text-3xl","text-green-500","leading-none"],[1,"mt-2","font-medium","text-3xl","text-red-500","leading-none"],[3,"value"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[4,"ngIf"],["mat-header-row",""],["mat-row",""],[1,"flex","flex-col","my-2"],[1,"text-3xl","text-center","my-6"],[1,"flex","justify-center"],["src","../../../../../assets/imgs/undraw_select.svg",1,"w-4/12"],[1,"flex","justify-center","mt-10"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["transactionPaginator",""]],template:function(i,t){1&i&&e.YNc(0,Ui,92,16,"ng-container",0)},dependencies:[m.sg,m.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,L.ey,C.Mq,C.hl,C.nW,d.KE,d.hX,d.R9,b.Nt,K.gD,x.Hw,E.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,v.KI,m.JJ,m.uU]});var $=c(69751),Ni=c(75476),qi=c(34698),Ei=c(23245),ki=c(10266);const Fi=["container"],Bi=["myParagraph"];function Ji(n,i){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.alternative_Name),e.xp6(1),e.hij(" ",t.alternative_Name," ")}}function Si(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",33)(1,"mat-label"),e._uU(2,"Nom b\xe9nificiaire"),e.qZA(),e.TgZ(3,"input",34),e.NdJ("keyup",function(){e.CHM(t);const s=e.oxw().index,l=e.oxw();return e.KtG(l._filterTiers(s))}),e.qZA(),e.TgZ(4,"mat-autocomplete",35,36),e.NdJ("optionSelected",function(s){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSelectTier(s))}),e.YNc(6,Ji,2,2,"mat-option",37),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),a=e.oxw(2);e.xp6(3),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",a.getOptionText),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,3,a.filteredList))}}function Qi(n,i){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.firstname+" "+t.lastname),e.xp6(1),e.hij(" ",t.firstname+" "+t.lastname," ")}}function Yi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",33)(1,"mat-label"),e._uU(2,"Nom b\xe9nificiaire"),e.qZA(),e.TgZ(3,"input",34),e.NdJ("keyup",function(){e.CHM(t);const s=e.oxw().index,l=e.oxw();return e.KtG(l._filterCollaborator(s))}),e.qZA(),e.TgZ(4,"mat-autocomplete",35,36),e.NdJ("optionSelected",function(s){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSelectCollaborator(s))}),e.YNc(6,Qi,2,2,"mat-option",37),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),a=e.oxw(2);e.xp6(3),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",a.getOptionText),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,3,a.filteredList))}}function Ri(n,i){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.accountNumber),e.xp6(1),e.hij(" ",t.accountNumber," ")}}function Pi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",33)(1,"mat-label"),e._uU(2,"Num compte b\xe9nificiare"),e.qZA(),e.TgZ(3,"input",39),e.NdJ("keyup",function(){e.CHM(t);const s=e.oxw().index,l=e.oxw();return e.KtG(l._filterRibTiers(s))}),e.qZA(),e.TgZ(4,"mat-autocomplete",35,36),e.NdJ("optionSelected",function(s){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSelectRibTier(s))}),e.YNc(6,Ri,2,2,"mat-option",37),e.ALo(7,"async"),e.qZA()()}if(2&n){const t=e.MAs(5),a=e.oxw(2);e.xp6(3),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",a.getOptionText),e.xp6(2),e.Q6J("ngForOf",e.lcZ(7,3,a.filteredListRib))}}function Oi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",33)(1,"mat-label"),e._uU(2,"Num compte b\xe9nificiare"),e.qZA(),e._UZ(3,"input",40),e.TgZ(4,"mat-autocomplete",35,36),e.NdJ("optionSelected",function(s){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onSelectRibTier(s))}),e.TgZ(6,"mat-option",38),e._uU(7),e.qZA()()()}if(2&n){const t=e.MAs(5),a=e.oxw(2);e.xp6(3),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",a.getOptionText),e.xp6(2),e.Q6J("value",a.listRib),e.xp6(1),e.hij(" ",a.listRib," ")}}function Mi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"img",46),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2).index,l=e.oxw();return e.KtG(l.supprimerBeneficiary(s))}),e.qZA()}}function Vi(n,i){1&n&&e._UZ(0,"img",47)}function Gi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"div",42)(2,"div"),e.YNc(3,Mi,1,0,"img",43),e.YNc(4,Vi,1,0,"img",44),e.qZA(),e.TgZ(5,"div")(6,"img",45),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.addBeneficiaryDefault())}),e.qZA()()()()}if(2&n){const t=e.oxw().index;e.xp6(3),e.Q6J("ngIf",0!=t),e.xp6(1),e.Q6J("ngIf",0==t)}}function Li(n,i){if(1&n&&(e.TgZ(0,"div",27),e.ynx(1,28),e.TgZ(2,"div"),e.YNc(3,Si,8,5,"mat-form-field",29),e.YNc(4,Yi,8,5,"mat-form-field",29),e.qZA(),e.TgZ(5,"div"),e.YNc(6,Pi,8,5,"mat-form-field",29),e.YNc(7,Oi,8,4,"mat-form-field",29),e.qZA(),e.TgZ(8,"div")(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"Objet du virement"),e.qZA(),e._UZ(12,"input",30),e.qZA()(),e.TgZ(13,"div")(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"Montant"),e.qZA(),e._UZ(17,"input",31),e.qZA()(),e.YNc(18,Gi,7,2,"div",32),e.BQk(),e.qZA()),2&n){const t=i.index,a=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("ngIf","Interne"===a.type),e.xp6(1),e.Q6J("ngIf","Salaire"===a.type),e.xp6(2),e.Q6J("ngIf","Interne"===a.type),e.xp6(1),e.Q6J("ngIf","Salaire"===a.type),e.xp6(11),e.Q6J("ngIf",0==a.nbTotalVirement)}}function ji(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",48)(3,"div")(4,"mat-form-field",6)(5,"mat-label"),e._uU(6,"Nombre total des virements"),e.qZA(),e.TgZ(7,"input",49),e.NdJ("ngModelChange",function(s){e.CHM(t);const l=e.oxw();return e.KtG(l.excludedBenificiarys().length=s)}),e.qZA()()(),e.TgZ(8,"div")(9,"mat-form-field",6)(10,"mat-label"),e._uU(11,"Montant total en lettres"),e.qZA(),e.TgZ(12,"input",49),e.NdJ("ngModelChange",function(s){e.CHM(t);const l=e.oxw();return e.KtG(l.nbTotalVirement=s)}),e.qZA()()(),e.TgZ(13,"div")(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"Montant total en chiffres"),e.qZA(),e.TgZ(17,"input",49),e.NdJ("ngModelChange",function(s){e.CHM(t);const l=e.oxw();return e.KtG(l.nbTotalVirementChiffre=s)}),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.excludedBenificiarys().length),e.xp6(5),e.Q6J("ngModel",t.nbTotalVirement),e.xp6(5),e.Q6J("ngModel",t.nbTotalVirementChiffre)}}function Hi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"button",51),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.enregisterVirement())}),e._uU(2,"Sauvegarder"),e.qZA()()}}function zi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",52)(2,"div",53)(3,"button",54),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.modifier())}),e._uU(4,"Annuler"),e.qZA()(),e.TgZ(5,"div",55)(6,"button",56),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.validerVirement())}),e._uU(7,"Valider"),e.qZA()()()()}}class U{constructor(i,t,a,s,l,p,O,M){this.sirhService=i,this.tierService=t,this.toast=a,this.datePipe=s,this.fb=l,this.docgenService=p,this.dialog=O,this.caisseService=M,this.list=[],this.templateElement='<!DOCTYPE html>\n<html lang=\'en\' xmlns:th="http://www.w3.org/1999/xhtml">\n<head>\n  <meta charset=\'UTF-8\'>\n  <title>Title</title>\n</head>\n<body style="width: 100vw;height: 100vh;display: flex;justify-content: center; padding: 20px; height: 100%;">\n<div id="payslip" style="width: calc( 8.5in - 80px );height: calc( 11in - 60px );background: #fff;">\n    <div>\n        <div class="column" style="font-family: \'Roboto\', sans-serif;font-size: 10px;color: #444; float: left; width: 25%; padding: 10px; box-sizing: border-box;">\n            <h3>Num\xe9ro:<b th:text=\'${NUMERO_COMPTE}\' style=\'font-size: 9px;\'></b></h3>\n            \n        </div>\n    \n        <div class="column" style="font-family: \'Roboto\', sans-serif;font-size: 10px;color: #444; float: left; width: 30%; padding: 10px; box-sizing: border-box;">\n            <h3>Date:<b th:text=\'${DATE}\' style=\'font-size: 9px;\'></b></h3>\n        </div>\n        \n        <div class="column" style="font-family: \'Roboto\', sans-serif;font-size: 10px;color: #444; float: left; width: 33%; padding: 10px; box-sizing: border-box;">\n            <h3>Raison social:<b th:text=\'${RAISON_SOCIAL}\' style=\'font-size: 9px;\'></b></h3>\n        </div>\n        <div class="column" style="font-family: \'Roboto\', sans-serif;font-size: 10px;color: #444; float: left; width: 38%; margin-left: 10px; box-sizing: border-box;;">\n            <h3>Num\xe9ro de compte:<b th:text=\'${NUMERO}\' style=\'font-size: 9px;\'></b></h3>\n        </div>\n        \n    </div>\n    \n   \n    <br/><br/><br/><br/><br/><br/><br/><br/>\n    \n    <table summary="ligne 1 : les navigateurs, ligne 2 : les pourcentages" style="border-collapse:collapse;\n    width:90%;">\n        <tr>\n         <th style="  border:  1px solid #ddd ;\n         padding: 8px !important ;\n         text-align: left;\n         background-color: #2270ba;\n         font-size: 10px;\n         color: white;\n         text-align: center;">Nom b\xe9nificiare</th>\n         <th style="  border:  1px solid #ddd ;\n         padding: 8px !important ;\n         text-align: left;\n         font-size: 10px;\n         background-color: #2270ba;\n         color: white;\n         text-align: center;">Compte b\xe9nificiare</th>\n         <th style="  border:  1px solid #ddd ;\n         padding: 8px !important ;\n         text-align: left;\n         font-size: 10px;\n         background-color: #2270ba;\n         color: white;\n         text-align: center;">Objet du virement</th>\n  <th style="  border:  1px solid #ddd ;\n  padding: 8px !important ;\n  text-align: left;\n  font-size: 10px;\n  background-color: #2270ba;\n  color: white;\n  text-align: center;">Montant</th>\n        \n      \n        NEWTR\n        \n\n       \n       </table>\n       <br/><br/><br/><br/>\n       <table summary="ligne 1 : les navigateurs, ligne 2 : les pourcentages" style="border-collapse:collapse;\n       width:90%;">\n           <tr>\n            <th style="  border:  1px solid #ddd ;\n            padding: 8px !important ;\n            text-align: left;\n            background-color: #2270ba;\n            color: white;\n            font-size: 10px;\n            text-align: center;">Nombre total des virements</th>\n            <th style="  border:  1px solid #ddd ;\n            padding: 8px !important ;\n            text-align: left;\n            font-size: 10px;\n            background-color: #2270ba;\n            color: white;\n            text-align: center;">Montant total en lettres</th>\n            <th style="  border:  1px solid #ddd ;\n            padding: 8px !important ;\n            font-size: 10px;\n            text-align: left;\n            background-color: #2270ba;\n            color: white;\n            text-align: center;">Montant total en chiffres</th>\n\n            \n           <tr>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;"><b th:text=\'${NOMBRE_TOTAL_VIREMENT}\' style=\'font-size: 10px;\'></b></td>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;"><b th:text=\'${MONTANT_TOTAL_VIREMENT_LETTE}\' style=\'font-size: 10px;\'></b></td>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;"><b th:text=\'${MONTANT_TOTAL_VIREMENT_CHIFFES}\' style=\'font-size: 10px;\'></b></td>\n \n            \n           \n           </tr>\n           \n   \n          \n          </table>\n  \n      \n\n      <br>\n      <div  style="padding-bottom: 31%;">\n        <div class="column" style="font-family: \'Roboto\', sans-serif;font-size: 12px;color: #444; float: left; width: 47%; padding: 10px;height: 80px; box-sizing: border-box;">\n          <h3>Cachet et visa agence</h3>\n        </div>\n        <div class="column" style="font-family: \'Roboto\', sans-serif;font-size: 12px;color: #444;float: left;width: 1%;padding: 10px;height: 80px;box-sizing: border-box;" > </div>\n        <div class="column" style="text-align:right;font-family: \'Roboto\', sans-serif;font-size: 12px;color: #444; float: left; width: 40%; padding: 10px; height: 80px; box-sizing: border-box;">\n          <h3>Signature du client</h3>\n        </div>\n      </div>\n      <br>\n      <br>\n\n      \n  </div>\n\n</div>\n\n</div>\n</body>\n\n</html>\n',this.nbTotalVirement=0}ngOnInit(){"Interne"===this.type?this.getAllTiers():this.getCollaborators(),this.initialForm(),this.infoMessage="Vous pouvez importer un fichier csv qui suivient la structure suivante pour accel\xe9r\xe9 votre travail"}initialForm(){this.myForm=this.fb.group({compteorigin:["",o.kI.required],benificiarys:this.fb.array([new o.cw({beneficiaryName:new o.NI("",o.kI.required),beneficiaryAccount:new o.NI("",o.kI.required),description:new o.NI("",o.kI.required),amount:new o.NI(null,o.kI.required)})]),benifiarysTotal:[0,o.kI.required],benifiarysTotalChiffre:["",o.kI.required],benifiarysTotalNumber:["",o.kI.required],datevirement:["",o.kI.required],transfernumber:["",o.kI.required],socialreason:["",o.kI.required]})}excludedBenificiarys(){return this.myForm.get("benificiarys")}addBeneficiaryDefault(){const i=this.fb.group({beneficiaryName:["",o.kI.required],beneficiaryAccount:["",o.kI.required],description:[""],amount:[null,o.kI.required]});this.excludedBenificiarys().push(i)}getOptionText(i){if(i)return i}onSelectTier(i){this.list.forEach(t=>{t.alternative_Name===i.option.value&&this.getAllAccountBankTiers(t.uuid)})}getAllAccountBankTiers(i){this.tierService.getAllBankAccount(i).subscribe(t=>{this.listRib=t,this.filteredListRib=new $.y(a=>{a.next(t),a.complete()})})}onSelectCollaborator(i){let t=i.option.value.split(" ");this.list.forEach(a=>{a.firstname==t[0]&&a.lastname==t[1]&&(console.log("Account number",a.collaboratorBankAccount.accountnumber),this.listRib=a.collaboratorBankAccount.accountnumber)})}addBeneficiaryAdvanced(i,t,a,s){const l=this.fb.group({beneficiaryName:[i,o.kI.required],beneficiaryAccount:[t,o.kI.required],description:[a],amount:[s,o.kI.required]});this.excludedBenificiarys().push(l)}onSelectFile(i){if(i.target.files&&i.target.files[0]){(new FileReader).readAsDataURL(i.target.files[0]),this.file=i.target.files[0],console.log("FILE",this.file);const a=new FormData;a.append("file",this.file),this.caisseService.exportCsv(a).subscribe(s=>{null!=s?(this.excludedBenificiarys().clear(),s.forEach(l=>{this.addBeneficiaryAdvanced(l.beneficiaryName,l.rib,l.object,l.amount)})):this.toast.error({detail:"Error! V\xe9rifier votre fichier importer",duration:5e3})})}}supprimerBeneficiary(i){const t=this.excludedBenificiarys().controls.filter((a,s)=>s!==i);this.excludedBenificiarys().clear(),t.forEach(a=>{this.excludedBenificiarys().push(a)})}validerVirement(){this.generatePdfFromContent()}enregisterVirement(){this.calculSommeVirement(),this.caisseService.getwordfromnumber(this.nbTotalVirement).subscribe(i=>{this.nbTotalVirementChiffre=i})}calculSommeVirement(){this.myForm.getRawValue().benificiarys.forEach(i=>{this.nbTotalVirement+=Number(i.amount)})}generatePdfFromContent(){let i="";this.excludedBenificiarys().value.forEach(l=>{i+=` <tr>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;">${l.beneficiaryName}</td>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;">${l.beneficiaryAccount}</td>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;">${l.description}</td>\n            <td style="font-size: 10px; text-align:center; border:1px solid #D4D9DD;\n            width:20%;">${l.amount}</td>\n\n            </tr>`}),this.templateElement=this.templateElement.replace("NEWTR",i);const t={templateName:"Virement",values:{NUMERO:this.myForm.getRawValue().compteorigin,NUMERO_COMPTE:this.myForm.getRawValue().transfernumber,RAISON_SOCIAL:this.myForm.getRawValue().socialreason,DATE:this.datePipe.transform(this.myForm.getRawValue().datevirement,"dd/MM/yyyy"),NOMBRE_TOTAL_VIREMENT:this.excludedBenificiarys().value.length,MONTANT_TOTAL_VIREMENT_LETTE:this.nbTotalVirement,MONTANT_TOTAL_VIREMENT_CHIFFES:this.nbTotalVirementChiffre}},a={name:"Virement",content:this.templateElement},s=new FormData;s.append("template",JSON.stringify(a)),s.append("pdfRequest",JSON.stringify(t)),this.docgenService.generatePdfFromHtmlContent(s).subscribe(l=>{const p=new FileReader,O=new Blob([l],{type:"application/pdf"});p.readAsDataURL(O),p.onload=M=>{this.doccURL=M.target.result,this.dialog.open(Ni.x,{data:{doccUrl:this.doccURL},width:"100%"}).afterClosed().subscribe(ne=>{})}})}modifier(){this.nbTotalVirement=0}_filterCollaborator(i){let t=[],a=new Set,s=this.list.filter(p=>p.firstname.startsWith(this.myForm.value.benificiarys[i].beneficiaryName)),l=this.list.filter(p=>p.lastname.startsWith(this.myForm.value.benificiarys[i].beneficiaryName));s.forEach(p=>{a.add(p)}),l.forEach(p=>{a.add(p)}),t=Array.from(a),this.filteredList=new $.y(p=>{p.next(t),p.complete()})}_filterTiers(i){let t=this.list.filter(a=>a.alternative_Name.startsWith(this.myForm.value.benificiarys[i].beneficiaryName));this.filteredList=new $.y(a=>{a.next(t),a.complete()})}_filterRibTiers(i){let t=this.listRib.filter(a=>a.accountNumber.startsWith(this.myForm.value.benificiarys[i].beneficiaryAccount));this.filteredListRib=new $.y(a=>{a.next(t),a.complete()})}check(i){this.myForm.value.benificiarys[i].beneficiaryName.valueChanges.subscribe(()=>this.selected=null)}getCollaborators(){this.sirhService.getAllCollaborators().subscribe(i=>{this.list=i})}getAllTiers(){this.tierService.getAllTiersByTenantId().subscribe(i=>{this.list=i})}onSelectRibTier(i){console.log(this.myForm.getRawValue())}}U.\u0275fac=function(i){return new(i||U)(e.Y36(qi.G),e.Y36(te.K),e.Y36(g.s),e.Y36(m.uU),e.Y36(o.qu),e.Y36(Ei.S),e.Y36(u.uw),e.Y36(A.t))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-virement-common"]],viewQuery:function(i,t){if(1&i&&(e.Gf(Fi,5,e.s_b),e.Gf(Bi,7)),2&i){let a;e.iGM(a=e.CRH())&&(t.container=a.first),e.iGM(a=e.CRH())&&(t.myParagraph=a.first)}},inputs:{type:"type"},decls:48,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup"],["container",""],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"grid","grid-cols-4","gap-8"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","max-w-19"],["matInput","","name","transfernumber","formControlName","transfernumber"],["matInput","","name","compteorigin","formControlName","compteorigin"],["matInput","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["picker2",""],["matInput","","name","socialreason","formControlName","socialreason"],[1,"grid","grid-cols-1","pl-10","py-5"],[1,"col-span-1","md:col-span-1","items-baseline","my-auto","ml-0"],["for","demo-file",1,"label-button-yellow-plus","cursor-pointer","w-60"],[1,"flex","justify-center","items-center"],["svgIcon","mat_solid:cloud_upload",1,"text-white"],[1,"pl-3"],["matTooltipPosition","right",1,"ml-4",3,"matTooltip"],["tooltip","matTooltip"],["svgIcon","heroicons_outline:exclamation-circle"],["type","file","id","demo-file","name","logo","accept","Csv/*",1,"demo-file",2,"visibility","hidden",3,"change"],["formArrayName","benificiarys"],["class","grid grid-cols-4 gap-2 mt-2",4,"ngFor","ngForOf"],["class","search-div mt-7 py-5",4,"ngIf"],["mat-dialog-actions","","class","flex justify-end mt-4",4,"ngIf"],[1,"grid","grid-cols-4","gap-2","mt-2"],[3,"formGroupName"],["appearance","outline","class","fullwidth in_text_add max-w-19",4,"ngIf"],["matInput","","formControlName","description"],["matInput","","type","number","formControlName","amount"],["class","col-end-7 col-span-1",4,"ngIf"],["appearance","outline",1,"fullwidth","in_text_add","max-w-19"],["matInput","","formControlName","beneficiaryName",3,"matAutocomplete","keyup"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","beneficiaryAccount",3,"matAutocomplete","keyup"],["matInput","","formControlName","beneficiaryAccount",3,"matAutocomplete"],[1,"col-end-7","col-span-1"],[1,"flex","flex-row","gap-3"],["src","assets/imgs/trashYellow.svg ","class","max-w-5 items-center py-4 ",3,"click",4,"ngIf"],["src","assets/imgs/trashYellow.svg ","class","max-w-5 items-center py-4 opacity-0",4,"ngIf"],["src","assets/imgs/addnewYellow.svg",1,"max-w-5","items-center","py-5",3,"click"],["src","assets/imgs/trashYellow.svg ",1,"max-w-5","items-center","py-4",3,"click"],["src","assets/imgs/trashYellow.svg ",1,"max-w-5","items-center","py-4","opacity-0"],[1,"grid","grid-cols-3","gap-4"],["matInput","","disabled","",3,"ngModel","ngModelChange"],["mat-dialog-actions","",1,"flex","justify-end","mt-4"],["type","submit","mat-dialog-close","",1,"button-yellow",3,"click"],[1,"grid","grid-cols-2","gap-4"],[1,"justify-self-end"],[1,"button-black",3,"click"],[1,"justify-self-start"],[1,"button-yellow",3,"click"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"form",1),e._UZ(2,"template",null,2),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div")(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Num\xe9ro"),e.qZA(),e._UZ(11,"input",7),e.qZA()(),e.TgZ(12,"div")(13,"mat-form-field",6)(14,"mat-label"),e._uU(15,"De"),e.qZA(),e._UZ(16,"input",8),e.qZA()(),e.TgZ(17,"div")(18,"mat-form-field",6)(19,"mat-label"),e._uU(20,"Date"),e.qZA(),e._UZ(21,"input",9)(22,"mat-datepicker-toggle",10)(23,"mat-datepicker",null,11),e.qZA()(),e.TgZ(25,"div")(26,"mat-form-field",6)(27,"mat-label"),e._uU(28,"Raison social"),e.qZA(),e._UZ(29,"input",12),e.qZA()()()()(),e.TgZ(30,"div",13)(31,"div",14)(32,"label",15)(33,"div",16),e._UZ(34,"mat-icon",17),e.TgZ(35,"span",18),e._uU(36,"Importer un fichier"),e.qZA()()(),e.TgZ(37,"button",19,20),e._UZ(39,"mat-icon",21),e.qZA(),e.TgZ(40,"input",22),e.NdJ("change",function(s){return t.onSelectFile(s)}),e.qZA()()(),e.TgZ(41,"div",3)(42,"div",4)(43,"div",23),e.YNc(44,Li,19,6,"div",24),e.qZA()()()(),e.YNc(45,ji,18,3,"div",25),e.YNc(46,Hi,3,0,"div",26),e.YNc(47,zi,8,0,"div",26),e.qZA()),2&i){const a=e.MAs(24);e.xp6(1),e.Q6J("formGroup",t.myForm),e.xp6(20),e.Q6J("matDatepicker",a)("formControlName","datevirement"),e.xp6(1),e.Q6J("for",a),e.xp6(15),e.Q6J("matTooltip",t.infoMessage),e.xp6(7),e.Q6J("ngForOf",t.excludedBenificiarys().controls),e.xp6(1),e.Q6J("ngIf",0!=t.nbTotalVirement),e.xp6(1),e.Q6J("ngIf",0==t.nbTotalVirement),e.xp6(1),e.Q6J("ngIf",0!=t.nbTotalVirement)}},dependencies:[m.sg,m.O5,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.On,o.sg,o.u,o.x0,o.CE,G.XC,L.ey,G.ZL,C.Mq,C.hl,C.nW,d.KE,d.hX,d.R9,b.Nt,x.Hw,u.ZT,u.H8,ki.gM,m.Ov]});class Q{constructor(){this.typeInterne="Interne"}}Q.\u0275fac=function(i){return new(i||Q)},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-virement-interne"]],decls:1,vars:1,consts:[[3,"type"]],template:function(i,t){1&i&&e._UZ(0,"app-virement-common",0),2&i&&e.Q6J("type",t.typeInterne)},dependencies:[U]});class Y{constructor(){this.typeSalaire="Salaire"}}Y.\u0275fac=function(i){return new(i||Y)},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-viremant-salaire"]],decls:1,vars:1,consts:[[3,"type"]],template:function(i,t){1&i&&e._UZ(0,"app-virement-common",0),2&i&&e.Q6J("type",t.typeSalaire)},dependencies:[U]});class R{}R.\u0275fac=function(i){return new(i||R)},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-virement"]],decls:25,vars:3,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-primary-500",3,"svgIcon"],[1,"ml-1","text-black"],[1,"icon-size-5","text-black",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400"],[3,"selectedIndex"],["label","Virements internes",1,"rtl:rtlsubmenu"],["label","Virements salaires",1,"rtl:rtlsubmenu"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"h2",4),e._uU(6," Virements "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div")(9,"a",6),e._uU(10," Accueil "),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"mat-icon",8),e.TgZ(13,"span",9),e._uU(14," Caisse "),e.qZA(),e._UZ(15,"mat-icon",10),e.TgZ(16,"span",11),e._uU(17," Virement "),e.qZA()()()()(),e.TgZ(18,"div",12)(19,"div",13)(20,"mat-tab-group",14)(21,"mat-tab",15),e._UZ(22,"app-virement-interne"),e.qZA(),e.TgZ(23,"mat-tab",16),e._UZ(24,"app-viremant-salaire"),e.qZA()()()()()),2&i&&(e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(5),e.Q6J("selectedIndex",0))},dependencies:[z.uX,z.SP,x.Hw,Q,Y]});var $i=c(7401);const Ki=["compteBancairePaginator"];function Wi(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," RIB Bancaire "),e.qZA())}function Xi(n,i){if(1&n&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.accountNumber," ")}}function en(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Banque "),e.qZA())}function tn(n,i){if(1&n&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.bankName," ")}}function nn(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1,"Libell\xe9 "),e.qZA())}function an(n,i){if(1&n&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.label," ")}}function on(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Etat "),e.qZA())}function sn(n,i){1&n&&(e.TgZ(0,"span",39),e._uU(1," Fermer "),e.qZA())}function rn(n,i){1&n&&(e.TgZ(0,"span",40),e._uU(1," Ouvert "),e.qZA())}function ln(n,i){if(1&n&&(e.TgZ(0,"td",36),e.YNc(1,sn,2,0,"span",37),e.YNc(2,rn,2,0,"span",38),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","FERME"===t.state),e.xp6(1),e.Q6J("ngIf","OUVERT"===t.state)}}function cn(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Solde "),e.qZA())}function mn(n,i){if(1&n&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.initialAmount,"")}}function pn(n,i){1&n&&(e.TgZ(0,"th",35),e._uU(1," Action "),e.qZA())}function dn(n,i){1&n&&e._UZ(0,"th",41)}function un(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",36)(1,"button",42),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.dropCompteBancaire(l))}),e._UZ(2,"img",43),e.qZA()()}}function _n(n,i){1&n&&e._UZ(0,"tr",44)}function fn(n,i){1&n&&e._UZ(0,"tr",45)}function gn(n,i){if(1&n&&(e.TgZ(0,"table",22),e.ynx(1,23),e.YNc(2,Wi,2,0,"th",24),e.YNc(3,Xi,2,1,"td",25),e.BQk(),e.ynx(4,26),e.YNc(5,en,2,0,"th",24),e.YNc(6,tn,2,1,"td",25),e.BQk(),e.ynx(7,27),e.YNc(8,nn,2,0,"th",24),e.YNc(9,an,2,1,"td",25),e.BQk(),e.ynx(10,28),e.YNc(11,on,2,0,"th",24),e.YNc(12,ln,3,2,"td",25),e.BQk(),e.ynx(13,29),e.YNc(14,cn,2,0,"th",24),e.YNc(15,mn,2,1,"td",25),e.BQk(),e.ynx(16,30),e.YNc(17,pn,2,0,"th",24),e.TgZ(18,"div",31),e.YNc(19,dn,1,0,"th",32),e.YNc(20,un,3,0,"td",25),e.qZA(),e.BQk(),e.YNc(21,_n,1,0,"tr",33),e.YNc(22,fn,1,0,"tr",34),e.qZA()),2&n){const t=e.oxw();e.Q6J("dataSource",t.dataSourceCompteBancaire),e.xp6(21),e.Q6J("matHeaderRowDef",t.displayedColumnsCompteBancaire),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsCompteBancaire)}}function hn(n,i){1&n&&(e.TgZ(0,"div",46)(1,"div",47),e._UZ(2,"img",48),e.qZA(),e.TgZ(3,"span",49),e._uU(4,"Aucune donn\xe9e disponible dans le tableau "),e.qZA(),e._UZ(5,"hr"),e.qZA())}const Cn=function(){return[5,10,20]};class P{constructor(i,t,a){this.caisseservice=i,this.router=t,this._fuseConfirmationService=a,this.compteList=[],this.displayedColumnsCompteBancaire=["rib","bank","libelle","etat","solde","actions"],this.configValid={title:"Supprimer compte bancaire",message:'voulez-vous supprimer  ce compte ?<br> <span class="font-medium">Cette action peut \xeatre annul\xe9e !</span>',icon:{show:!0,name:"heroicons_outline:lightning-bolt",color:"warning"},actions:{confirm:{show:!0,label:"supprimer",color:"warn"},cancel:{show:!0,label:"Annuler"}},dismissible:!0}}ngOnInit(){this.getCompteBancaire()}getCompteBancaire(){this.caisseservice.getAllComptesByTenantId().subscribe(i=>{this.compteList=i,this.dataSourceCompteBancaire=new r.by(this.compteList),this.setCompteBancairePaginator()})}setCompteBancairePaginator(){this.dataSourceCompteBancaire.paginator=this.compteBancairePaginator}addCompteBancaire(){this.router.navigateByUrl("/caisse/add-compte-bancaire")}dropCompteBancaire(i){this._fuseConfirmationService.open(this.configValid).afterClosed().subscribe({next:a=>{"confirmed"==a&&this.caisseservice.ModifyCaisse(i).subscribe({next:()=>{this.getCompteBancaire()},error:s=>{console.log(s)}})}})}}P.\u0275fac=function(i){return new(i||P)(e.Y36(A.t),e.Y36(f.F0),e.Y36($i.R))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-compte-bancaires"]],viewQuery:function(i,t){if(1&i&&e.Gf(Ki,5),2&i){let a;e.iGM(a=e.CRH())&&(t.compteBancairePaginator=a.first)}},decls:29,vars:5,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],["type","button",1,"button-yellow-plus","px-5","py-2.5","text-center","inline-flex","items-center","font-bold",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-2"],[1,"title-3","pt-8","font-bold"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","","class","overflow-x-auto w-full ",3,"dataSource",4,"ngIf"],["class","flex flex-col my-2",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["compteBancairePaginator",""],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","rib"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","bank"],["matColumnDef","libelle"],["matColumnDef","etat"],["matColumnDef","solde"],["matColumnDef","actions"],[1,"md:w-2"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["class","bg-zinc-900 text-white dark:text-red-50 inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase",4,"ngIf"],["class","bg-yellow-400 text-white dark:text-green-50 inline-flex items-center font-bold text-xs px-2.5 py-0.5 rounded-full tracking-wide uppercase",4,"ngIf"],[1,"bg-zinc-900","text-white","dark:text-red-50","inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase"],[1,"bg-yellow-400","text-white","dark:text-green-50","inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase"],["mat-header-cell",""],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],["src","./assets/imgs/supp.svg",1,"image-svg","max-w-none"],["mat-header-row",""],["mat-row",""],[1,"flex","flex-col","my-2"],[1,"flex","justify-center","mt-10"],["src","assets/imgs/undraw_select.svg",1,"w-4/12"],[1,"text-3xl","text-center","my-6"]],template:function(i,t){1&i&&(e.ynx(0),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),e._uU(6," Compte bancaire "),e.qZA()(),e.TgZ(7,"div",5)(8,"div")(9,"a",6),e._uU(10," Accueil"),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"mat-icon",8),e.TgZ(13,"span",9),e._uU(14," Compte bancaire "),e.qZA()()()()(),e.TgZ(15,"div",10)(16,"div",11)(17,"button",12),e.NdJ("click",function(){return t.addCompteBancaire()}),e._uU(18," Ajouter un compte bancaire "),e._UZ(19,"mat-icon",13),e.qZA(),e.TgZ(20,"h2",14),e._uU(21," Liste des comptes bancaires "),e.qZA(),e.TgZ(22,"div",15)(23,"div",16)(24,"div",17),e.YNc(25,gn,23,3,"table",18),e.YNc(26,hn,6,0,"div",19),e._UZ(27,"mat-paginator",20,21),e.qZA()()()()()(),e.BQk()),2&i&&(e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(13),e.Q6J("ngIf",0!=t.compteList.length),e.xp6(1),e.Q6J("ngIf",0===t.compteList.length),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(4,Cn)))},dependencies:[m.O5,H.RK,x.Hw,E.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk]});const xn=[{path:"list-caisse",component:J},{path:"compte-bancaire",component:P},{path:"add-compte-bancaire",component:I},{path:"etatCaisseGeneral",component:w},{path:"transactions",component:S},{path:"virements",component:R}];class N{}N.\u0275fac=function(i){return new(i||N)},N.\u0275mod=e.oAB({type:N}),N.\u0275inj=e.cJS({imports:[f.Bz.forChild(xn),f.Bz]});class q{}q.\u0275fac=function(i){return new(i||q)},q.\u0275mod=e.oAB({type:q}),q.\u0275inj=e.cJS({providers:[{provide:u.WI,useValue:[]},m.uU],imports:[N,m.ez,_.m,v.y4,x.Ps]})},75476:(W,T,c)=>{c.d(T,{x:()=>f});var m=c(65938),_=c(94650),v=c(11481);class f{constructor(r,h){this.data=r,this.sanitizer=h,this.trustedUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.data.doccUrl)}ngOnInit(){}}f.\u0275fac=function(r){return new(r||f)(_.Y36(m.WI),_.Y36(v.H7))},f.\u0275cmp=_.Xpm({type:f,selectors:[["app-preview-component"]],decls:2,vars:1,consts:[[1,"modal-body",2,"padding","0"],["type","application/pdf","width","100%","height","600px",3,"src"]],template:function(r,h){1&r&&(_.TgZ(0,"div",0),_._UZ(1,"embed",1),_.qZA()),2&r&&(_.xp6(1),_.Q6J("src",h.trustedUrl,_.uOi))}})},23245:(W,T,c)=>{c.d(T,{S:()=>r});var m=c(17414),_=c(70262),v=c(54004),f=c(94650),o=c(80529);class r{constructor(e){this.http=e,this.baseUrl="http://localhost:8300"}updateTemplate(e){return this.http.post(`${this.baseUrl}/template`,e)}generatePdfFromHtml(e){return this.http.post(`${this.baseUrl}/pdfFromHtml`,e,{responseType:"arraybuffer"}).pipe((0,m.V)(6e4),(0,_.K)((g,Z)=>[]),(0,v.U)(g=>g))}generatePdfFromHtmlContent(e){return this.http.post(`${this.baseUrl}/pdfFromHtmlContent`,e,{responseType:"arraybuffer",headers:{enctype:"multipart/form-data;"}}).pipe((0,m.V)(6e4),(0,_.K)((g,Z)=>[]),(0,v.U)(g=>g))}}r.\u0275fac=function(e){return new(e||r)(f.LFG(o.eN))},r.\u0275prov=f.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}}]);