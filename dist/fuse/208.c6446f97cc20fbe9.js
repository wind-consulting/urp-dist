"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[208],{25208:(Hn,ce,s)=>{s.r(ce),s.d(ce,{InvoicesModule:()=>O});var c=s(36895),f=s(30144),a=s(24006),z=s(68675),X=s(54004);const ue=[{id:"en",name:"English",flag:"us"},{id:"fr",name:"Francais",flag:"fr"},{id:"ar",name:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",flag:"ar"}],de=[{name:"Esp\xe8ce",value:"CSH"},{name:"Ch\xe8que",value:"CHQ"},{name:"Trait\xe9 Mensuelle",value:"PRO"},{name:"Virement",value:"VIR"},{name:"Carte Cr\xe9dit",value:"CRD"}];var M=(()=>{return(n=M||(M={})).PROSPECT="PROSPECT",n.CLIENT="CLIENT",n.FOURNISSEUR="FOURNISSEUR",M;var n})(),ie=s(21261),_=s(65938),e=s(94650),U=s(89858),x=s(81794),A=s(48768),me=s(86344),v=s(3238),u=s(59549),g=s(284),Z=s(84385);function Ie(n,i){if(1&n&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.alpha2),e.xp6(1),e.Oqu(t.name)}}class q{constructor(i,t,o,r,l,m,h){this.parentData=i,this.partnerService=t,this.fournisseurService=o,this.toast=r,this.dialogRef=l,this.countriesService=m,this._formBuilder=h,console.log("Parent :",this.parentData)}ngOnInit(){this.initForm(),this.listcountries=this.countriesService.listcountries}initForm(){this.data=this._formBuilder.group({adress:this._formBuilder.control("",a.kI.required),zipcode:this._formBuilder.control("",a.kI.required),city:this._formBuilder.control("",a.kI.required)})}onFormSubmit(){if("partner"==this.parentData.tier){let i={text:this.data.get("adress").value,zip_code:this.data.get("zipcode").value,country:this.data.get("city").value.toUpperCase(),main:!1};this.partnerService.addAdresse(i).subscribe(t=>{this.dialogRef.close(t),this.toast.success({detail:"Succ\xe8s! Creation d'adresse avec success",duration:5e3})},t=>{this.toast.error({detail:"Error!",duration:5e3})})}else{let i={tiers:{uuid:this.parentData.tierData.uuid},location:this.data.get("adress").value,zipCode:this.data.get("zipcode").value,city:this.data.get("city").value.toUpperCase(),isDefault:!1};this.fournisseurService.addAdresse(i).subscribe(t=>{this.dialogRef.close(t),this.toast.success({detail:"Succ\xe8s! Creation d'adresse avec success",duration:5e3})},t=>{this.toast.error({detail:"Error!",duration:5e3})})}}selectCountry(i){this.data.get("city").setValue(i.value)}}q.\u0275fac=function(i){return new(i||q)(e.Y36(_.WI),e.Y36(U.b),e.Y36(x.K),e.Y36(A.s),e.Y36(_.so),e.Y36(me.K),e.Y36(a.qu))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-add-address"]],decls:28,vars:2,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-100"],[1,"flex","justify-center","mb-2"],["src","assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mb-4"],[1,"text-black","dark:text-white","font-bold"],[1,"grid","grid-cols-1","mt-8"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","adress"],["type","number","matInput","","formControlName","zipcode"],["formControlName","city",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","submit",1,"button-yellow"],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Vous \xeatre sur le point d'ajouter une nouvelle adresse"),e.qZA()()(),e.TgZ(7,"div",6)(8,"form",7),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(9,"div",8)(10,"mat-form-field",9)(11,"mat-label"),e._uU(12,"Adresse"),e.qZA(),e._UZ(13,"input",10),e.qZA()(),e.TgZ(14,"div",8)(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"ZipCode"),e.qZA(),e._UZ(18,"input",11),e.qZA()(),e.TgZ(19,"div",8)(20,"mat-form-field",9)(21,"mat-label"),e._uU(22,"City"),e.qZA(),e.TgZ(23,"mat-select",12),e.NdJ("selectionChange",function(r){return t.selectCountry(r)}),e.YNc(24,Ie,2,2,"mat-option",13),e.qZA()()(),e.TgZ(25,"div",14)(26,"button",15),e._uU(27,"Ajouter"),e.qZA()()()()()),2&i&&(e.xp6(8),e.Q6J("formGroup",t.data),e.xp6(16),e.Q6J("ngForOf",t.listcountries))},dependencies:[c.sg,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,v.ey,u.KE,u.hX,g.Nt,Z.gD,_.xY,_.H8]});var Ne=s(15439),pe=s.n(Ne),W=s(30895);class L{constructor(i,t,o,r){this._formBuilder=i,this.fundService=t,this.toast=o,this.dialogRef=r}ngOnInit(){this.initForm()}initForm(){this.data=this._formBuilder.group({name:["",a.kI.required],exchangeRate:["",a.kI.required]})}onFormSubmit(){this.fundService.addcurrency(this.data.value).subscribe(i=>{this.dialogRef.close(i),this.toast.success({detail:"Succ\xe8s! Devis cr\xe9\xe9 avec succ\xe8s",duration:5e3})})}}L.\u0275fac=function(i){return new(i||L)(e.Y36(a.qu),e.Y36(W.t),e.Y36(A.s),e.Y36(_.so))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-add-devise"]],decls:22,vars:1,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-160"],[1,"flex","justify-center","mb-2"],["src","assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mb-4"],[1,"text-black","dark:text-white","font-bold"],[3,"formGroup","ngSubmit"],[1,"grid","grid-cols-2","gap-6","mt-8"],[1,"mb-4","col-span-2","md:col-span-1"],["appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","name"],["type","number","matInput","","formControlName","exchangeRate"],["mat-dialog-actions","",1,"col-span-2","justify-center","mb-2"],["type","submit",1,"button-yellow"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Vous \xeatre sur le point d'ajouter un devise"),e.qZA()()(),e.TgZ(7,"form",6),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(8,"div",7)(9,"div",8)(10,"mat-form-field",9)(11,"mat-label"),e._uU(12,"Nom"),e.qZA(),e._UZ(13,"input",10),e.qZA()(),e.TgZ(14,"div",8)(15,"mat-form-field",9)(16,"mat-label"),e._uU(17,"Taux"),e.qZA(),e._UZ(18,"input",11),e.qZA()(),e.TgZ(19,"div",12)(20,"button",13),e._uU(21,"Ajouter"),e.qZA()()()()()),2&i&&(e.xp6(7),e.Q6J("formGroup",t.data))},dependencies:[a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,u.KE,u.hX,g.Nt,_.xY,_.H8]});var ne=s(9396),I=s(4859),T=s(97392);function Se(n,i){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.alpha2),e.xp6(1),e.Oqu(t.name)}}function Fe(n,i){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function we(n,i){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.name)}}function ke(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Ref"),e.qZA(),e._UZ(5,"input",11),e.qZA()(),e.TgZ(6,"div",9)(7,"mat-form-field",10)(8,"mat-label"),e._uU(9,"RIB/RIP"),e.qZA(),e._UZ(10,"input",12),e.qZA()(),e.TgZ(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),e._uU(14,"Nom du propri\xe9taire"),e.qZA(),e._UZ(15,"input",13),e.qZA()(),e.TgZ(16,"div",9)(17,"mat-form-field",10)(18,"mat-label"),e._uU(19,"Pays"),e.qZA(),e.TgZ(20,"mat-select",14),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.selectCountry(r))}),e.YNc(21,Se,2,2,"mat-option",15),e.qZA()()(),e.TgZ(22,"div",9)(23,"mat-form-field",10)(24,"mat-label"),e._uU(25,"Adresse du propri\xe9taire"),e.qZA(),e._UZ(26,"input",16),e.qZA()(),e.TgZ(27,"div",9)(28,"mat-form-field",10)(29,"mat-label"),e._uU(30,"Nom Bank"),e.qZA(),e.TgZ(31,"mat-select",17),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.selectBank(r))}),e.YNc(32,Fe,2,2,"mat-option",15),e.qZA()()(),e.TgZ(33,"div",9)(34,"mat-form-field",10)(35,"mat-label"),e._uU(36,"IBAN"),e.qZA(),e._UZ(37,"input",18),e.qZA()(),e.TgZ(38,"div",9)(39,"mat-form-field",10)(40,"mat-label"),e._uU(41,"SWIFT"),e.qZA(),e._UZ(42,"input",19),e.qZA()(),e.TgZ(43,"div",20)(44,"div",21)(45,"mat-form-field",10)(46,"mat-label"),e._uU(47,"Devise"),e.qZA(),e.TgZ(48,"mat-select",22),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.selectDevise(r))}),e.YNc(49,we,2,2,"mat-option",15),e.qZA()(),e.TgZ(50,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openAddDevise())}),e._UZ(51,"mat-icon",24),e.qZA()()(),e.TgZ(52,"div",25)(53,"button",26),e._uU(54,"Ajouter"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(21),e.Q6J("ngForOf",t.listcountries),e.xp6(11),e.Q6J("ngForOf",t.banksList),e.xp6(17),e.Q6J("ngForOf",t.currenciesList),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle")}}function Je(n,i){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function De(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-label"),e._uU(4,"Nom du Compte Bancaire"),e.qZA(),e._UZ(5,"input",28),e.qZA()(),e.TgZ(6,"div",9)(7,"mat-form-field",10)(8,"mat-label"),e._uU(9,"Nom Bank"),e.qZA(),e.TgZ(10,"mat-select",17),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.selectBank(r))}),e.YNc(11,Je,2,2,"mat-option",15),e.qZA()()(),e.TgZ(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),e._uU(15,"Num\xe9ro Compte"),e.qZA(),e._UZ(16,"input",29),e.qZA()(),e.TgZ(17,"div",9)(18,"mat-form-field",10)(19,"mat-label"),e._uU(20,"IBAN"),e.qZA(),e._UZ(21,"input",30),e.qZA()(),e.TgZ(22,"div",9)(23,"mat-form-field",10)(24,"mat-label"),e._uU(25,"Code Bic"),e.qZA(),e._UZ(26,"input",31),e.qZA()(),e.TgZ(27,"div",9)(28,"mat-form-field",10)(29,"mat-label"),e._uU(30,"Domiciliation"),e.qZA(),e._UZ(31,"input",32),e.qZA()(),e.TgZ(32,"div",9)(33,"mat-form-field",10)(34,"mat-label"),e._uU(35,"Nom du propri\xe9taire"),e.qZA(),e._UZ(36,"input",33),e.qZA()(),e.TgZ(37,"div",9)(38,"mat-form-field",10)(39,"mat-label"),e._uU(40,"Adresse du propri\xe9taire"),e.qZA(),e._UZ(41,"input",34),e.qZA()(),e.TgZ(42,"div",25)(43,"button",26),e._uU(44,"Ajouter"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngForOf",t.banksList)}}class y{constructor(i,t,o,r,l,m,h,b,C){this.parentData=i,this.countriesService=t,this.fundService=o,this._formBuilder=r,this.bankService=l,this.toast=m,this.dialogRef=h,this.fournisseurService=b,this.dialog=C}ngOnInit(){this.initForm()}initForm(){this.banksList=this.bankService.banks,"partner"==this.parentData.tier?(this.data=this._formBuilder.group({ref:["",a.kI.required],rib:["",a.kI.required],proprietaire:["",a.kI.required],city:["",a.kI.required],adresseproprietaire:["",a.kI.required],bank:["",a.kI.required],iban:["",a.kI.required],swift:["",a.kI.required],devise:["",a.kI.required]}),this.listcountries=this.countriesService.listcountries,this.fundService.getAllCurrencies().subscribe(i=>{this.currenciesList=i})):"client"==this.parentData.tier&&(this.data=this._formBuilder.group({bank_Account_Name:["",a.kI.required],bank:["",a.kI.required],account_Number:["",a.kI.required],iban:["",a.kI.required],bic_Code:["",a.kI.required],domiciliation:["",a.kI.required],owner_Name:["",a.kI.required],owner_Address:["",a.kI.required]}))}onFormSubmit(){if("partner"==this.parentData.tier){const i={ref:this.data.get("ref").value,iban:this.data.get("iban").value,currency:{uuid:this.data.get("devise").value},accountNumber:this.data.get("rib").value,country:this.data.get("city").value.toUpperCase(),accountDate:pe()().toDate(),bankName:this.data.get("bank").value,swift:this.data.get("swift").value,ownerName:this.data.get("proprietaire").value,ownerAddress:this.data.get("adresseproprietaire").value};this.fundService.addcompte(i).subscribe(t=>{this.dialogRef.close(t),this.toast.success({detail:"Succ\xe8s! Compte financier cr\xe9\xe9 avec succ\xe8s",duration:5e3})},t=>{console.error("something went wrong")})}else if("client"==this.parentData.tier){const i={tiers:{uuid:this.parentData.tierData.uuid},bank_Account_Name:this.data.get("bank_Account_Name").value,bank:this.data.get("bank").value,accountNumber:this.data.get("account_Number").value,iban:this.data.get("iban").value,bic_Code:this.data.get("bic_Code").value,domiciliation:this.data.get("domiciliation").value,owner_Name:this.data.get("owner_Name").value,owner_Address:this.data.get("owner_Address").value};this.fournisseurService.addaccountbank(i).subscribe(t=>{console.log("REss :",t),this.dialogRef.close(t),this.toast.success({detail:"Succ\xe8s! Compte financier cr\xe9\xe9 avec succ\xe8s",duration:5e3})},t=>{console.error("something went wrong")})}}openAddDevise(){this.dialog.open(L,{restoreFocus:!1}).afterClosed().subscribe(i=>{i&&this.currenciesList.push(i)})}selectCountry(i){this.data.get("city").setValue(i.value)}selectDevise(i){this.data.get("devise").setValue(i.value)}selectBank(i){this.data.get("bank").setValue(i.value)}}y.\u0275fac=function(i){return new(i||y)(e.Y36(_.WI),e.Y36(me.K),e.Y36(W.t),e.Y36(a.qu),e.Y36(ne.y),e.Y36(A.s),e.Y36(_.so),e.Y36(x.K),e.Y36(_.uw))},y.\u0275cmp=e.Xpm({type:y,selectors:[["app-add-rib"]],decls:10,vars:3,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-160"],[1,"flex","justify-center","mb-2"],["src","assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mb-4"],[1,"text-black","dark:text-white","font-bold"],[3,"formGroup","ngSubmit"],["class","grid grid-cols-2 gap-6 mt-8",4,"ngIf"],[1,"grid","grid-cols-2","gap-6","mt-8"],[1,"mb-4","col-span-2","md:col-span-1"],["appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","ref"],["type","number","matInput","","formControlName","rib"],["type","text","matInput","","formControlName","proprietaire"],["formControlName","city",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","adresseproprietaire"],["formControlName","bank",3,"selectionChange"],["type","number","matInput","","formControlName","iban"],["type","text","matInput","","formControlName","swift"],[1,"col-span-2","md:col-span-1"],[1,"flex","w-full"],["formControlName","devise",3,"selectionChange"],["type","button","mat-icon-button","","matSuffix","",1,"mt-2","ml-2",3,"click"],[1,"icon-size-10","text-yellow-400",3,"svgIcon"],["mat-dialog-actions","",1,"col-span-2","justify-center","mb-2"],["type","submit",1,"button-yellow"],[3,"value"],["type","text","matInput","","formControlName","bank_Account_Name"],["type","number","matInput","","formControlName","account_Number"],["type","text","matInput","","formControlName","iban"],["type","text","matInput","","formControlName","bic_Code"],["type","text","matInput","","formControlName","domiciliation"],["type","text","matInput","","formControlName","owner_Name"],["type","text","matInput","","formControlName","owner_Address"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Vous \xeatre sur le point d'ajouter un compte financier"),e.qZA()()(),e.TgZ(7,"form",6),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.YNc(8,ke,55,4,"div",7),e.YNc(9,De,45,1,"div",7),e.qZA()()),2&i&&(e.xp6(7),e.Q6J("formGroup",t.data),e.xp6(1),e.Q6J("ngIf","partner"==t.parentData.tier),e.xp6(1),e.Q6J("ngIf","client"==t.parentData.tier))},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,v.ey,u.KE,u.hX,u.R9,g.Nt,Z.gD,I.RK,T.Hw,_.xY,_.H8]});class V{}class _e{}class ge{}var R=(()=>{return(n=R||(R={})).ACHAT="ACHAT",n.VENTE="VENTE",R;var n})(),oe=s(29443),ee=s(46345),fe=s(45386),te=s(47957),ae=s(90455),p=s(86257),re=s(55165);const Qe=["Editor"];function Ye(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"label"),e._uU(2,"TVA"),e.qZA(),e.TgZ(3,"mat-form-field",8)(4,"input",17),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.line.tvaAmount=r)})("change",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calculeSomme())})("keyup",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.calculeSomme())}),e.qZA(),e._uU(5," % "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("min",0)("max",100)("ngModel",t.line.tvaAmount)}}class N{constructor(){}ngOnInit(){}changedEditor(i){"selection-change"!==i.event&&(this.line.descriptionproduct=i.html)}calculeSomme(){this.line.prixtotal=0,this.exemptTVA&&(this.line.tvaAmount=0),this.line.prixunitaire&&(this.line.prixnet=this.line.prixunitaire*this.line.quantite,this.line.prixtotal=this.line.tvaAmount?this.line.prixnet+this.line.prixnet*(this.line.tvaAmount/100):this.line.prixnet)}deleteLine(){this.facturelist.splice(this.index,1),this.linesList.splice(this.index,1),console.log("lines :",this.linesList),console.log("facturelist :",this.facturelist)}addLine(){const i=this.facturelist.length,t=new V;t.id=i,t.productname="line",this.linesList.push(t),this.facturelist.push({type:1,id:i,totalline:""}),console.log("lines :",this.linesList),console.log("facturelist :",this.facturelist)}}N.\u0275fac=function(i){return new(i||N)},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-outputline"]],viewQuery:function(i,t){if(1&i&&e.Gf(Qe,5),2&i){let o;e.iGM(o=e.CRH())&&(t.editor=o.first)}},inputs:{line:"line",linesList:"linesList",index:"index",facturelist:"facturelist",exemptTVA:"exemptTVA"},decls:30,vars:5,consts:[[1,"search-div","mt-4","py-5"],[1,"px-4"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-11",3,"ngClass"],[1,"pb-4"],[3,"onEditorChanged"],["Editor",""],[1,"col-span-11","lg:col-span-2"],[1,"w-full"],["matInput","","type","number",3,"ngModel","ngModelChange","change","keyup"],["class","col-span-11 lg:col-span-1",4,"ngIf"],["matInput","","disabled","",3,"ngModel","ngModelChange"],[1,"col-span-1","lg:col-span-1","flex","justify-center","items-center"],[3,"click"],["svgIcon","feather:trash-2",1,"text-yellow-500"],["svgIcon","feather:plus-square",1,"text-yellow-500"],[1,"col-span-11","lg:col-span-1"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange","change","keyup"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"D\xe9signation"),e.qZA(),e.TgZ(6,"quill-editor",5,6),e.NdJ("onEditorChanged",function(r){return t.changedEditor(r)}),e.qZA()(),e.TgZ(8,"div",7)(9,"label"),e._uU(10,"Quantit\xe9"),e.qZA(),e.TgZ(11,"mat-form-field",8)(12,"input",9),e.NdJ("ngModelChange",function(r){return t.line.quantite=r})("change",function(){return t.calculeSomme()})("keyup",function(){return t.calculeSomme()}),e.qZA()()(),e.TgZ(13,"div",7)(14,"label"),e._uU(15,"Montant"),e.qZA(),e.TgZ(16,"mat-form-field",8)(17,"input",9),e.NdJ("ngModelChange",function(r){return t.line.prixunitaire=r})("change",function(){return t.calculeSomme()})("keyup",function(){return t.calculeSomme()}),e.qZA()()(),e.YNc(18,Ye,6,3,"div",10),e.TgZ(19,"div",7)(20,"label"),e._uU(21,"Devise"),e.qZA(),e.TgZ(22,"mat-form-field",8)(23,"input",11),e.NdJ("ngModelChange",function(r){return t.line.prixtotal=r}),e.qZA(),e._uU(24," TND "),e.qZA()(),e.TgZ(25,"div",12)(26,"button",13),e.NdJ("click",function(){return t.deleteLine()}),e._UZ(27,"mat-icon",14),e.qZA(),e.TgZ(28,"button",13),e.NdJ("click",function(){return t.addLine()}),e._UZ(29,"mat-icon",15),e.qZA()()()()()),2&i&&(e.xp6(3),e.Q6J("ngClass",t.exemptTVA?"lg:col-span-5":"lg:col-span-4"),e.xp6(9),e.Q6J("ngModel",t.line.quantite),e.xp6(5),e.Q6J("ngModel",t.line.prixunitaire),e.xp6(1),e.Q6J("ngIf",!t.exemptTVA),e.xp6(5),e.Q6J("ngModel",t.line.prixtotal))},dependencies:[c.mk,c.O5,a.Fj,a.wV,a.JJ,a.qQ,a.Fd,a.On,u.KE,g.Nt,T.Hw,re.g6]});const Ee=["Editor"];class S{constructor(){}ngOnInit(){this.line.subtotalprice=0;for(let i=this.startFrom;i<=this.index-1;i++)this.line.subtotalprice+=Number(this.linesList[i].prixtotal)}changedEditor(i){"selection-change"!==i.event&&(this.line.subtotaldesc=i.html)}deleteLine(){this.facturelist.splice(this.index,1),this.linesList.splice(this.index,1),console.log("lines :",this.linesList),console.log("facturelist :",this.facturelist)}addLine(){const i=this.facturelist.length;this.facturelist.push({type:2,id:i,totalline:""});const t=new V;t.id=i,t.productname="subtotal",this.linesList.push(t),console.log("lines :",this.linesList),console.log("facturelist :",this.facturelist)}}S.\u0275fac=function(i){return new(i||S)},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-sub-total"]],viewQuery:function(i,t){if(1&i&&e.Gf(Ee,5),2&i){let o;e.iGM(o=e.CRH())&&(t.editor=o.first)}},inputs:{line:"line",linesList:"linesList",index:"index",facturelist:"facturelist",startFrom:"startFrom"},decls:22,vars:1,consts:[[1,"search-div","mt-4","py-5"],[1,"px-4"],[1,"text-black","font-bold","text-2xl","mb-2"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-5","lg:col-span-9"],[1,"pb-4"],[3,"onEditorChanged"],["Editor",""],[1,"col-span-5","lg:col-span-2"],[1,"w-full"],["matInput","","disabled","",3,"ngModel","ngModelChange"],[1,"col-span-5","lg:col-span-1","flex","justify-center","items-center"],[3,"click"],["svgIcon","feather:trash-2",1,"text-yellow-500"],["svgIcon","feather:plus-square",1,"text-yellow-500"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Sous Total"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"label",5),e._uU(8,"Description"),e.qZA(),e.TgZ(9,"quill-editor",6,7),e.NdJ("onEditorChanged",function(r){return t.changedEditor(r)}),e.qZA()(),e.TgZ(11,"div",8)(12,"label"),e._uU(13,"Total"),e.qZA(),e.TgZ(14,"mat-form-field",9)(15,"input",10),e.NdJ("ngModelChange",function(r){return t.line.subtotalprice=r}),e.qZA(),e._uU(16," TND "),e.qZA()(),e.TgZ(17,"div",11)(18,"button",12),e.NdJ("click",function(){return t.deleteLine()}),e._UZ(19,"mat-icon",13),e.qZA(),e.TgZ(20,"button",12),e.NdJ("click",function(){return t.addLine()}),e._UZ(21,"mat-icon",14),e.qZA()()()()()),2&i&&(e.xp6(15),e.Q6J("ngModel",t.line.subtotalprice))},dependencies:[a.Fj,a.JJ,a.On,u.KE,g.Nt,T.Hw,re.g6]});const Pe=["Editor"];class F{constructor(){}ngOnInit(){}changedEditor(i){"selection-change"!==i.event&&(this.line.descriptionproduct=i.html)}deleteLine(){this.facturelist.splice(this.index,1),this.linesList.splice(this.index,1),console.log("lines :",this.linesList),console.log("facturelist :",this.facturelist)}addLine(){const i=this.facturelist.length;this.facturelist.push({type:3,id:i,totalline:""});const t=new V;t.id=i,t.productname="commentaire",this.linesList.push(t),console.log("lines :",this.linesList),console.log("facturelist :",this.facturelist)}}F.\u0275fac=function(i){return new(i||F)},F.\u0275cmp=e.Xpm({type:F,selectors:[["app-comment"]],viewQuery:function(i,t){if(1&i&&e.Gf(Pe,5),2&i){let o;e.iGM(o=e.CRH())&&(t.editor=o.first)}},inputs:{line:"line",linesList:"linesList",index:"index",facturelist:"facturelist"},decls:17,vars:0,consts:[[1,"search-div","mt-4","py-5"],[1,"px-4"],[1,"text-black","font-bold","text-2xl","mb-2"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-5","lg:col-span-11"],[1,"w-full"],[1,"pb-4"],[3,"onEditorChanged"],["Editor",""],[1,"col-span-5","lg:col-span-1","flex","justify-center","items-center"],[3,"click"],["svgIcon","feather:trash-2",1,"text-yellow-500"],["svgIcon","feather:plus-square",1,"text-yellow-500"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),e._uU(4,"Commentaire"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"label",6),e._uU(9,"Description"),e.qZA(),e.TgZ(10,"quill-editor",7,8),e.NdJ("onEditorChanged",function(r){return t.changedEditor(r)}),e.qZA()()(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return t.deleteLine()}),e._UZ(14,"mat-icon",11),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return t.addLine()}),e._UZ(16,"mat-icon",12),e.qZA()()()()())},dependencies:[T.Hw,re.g6]});var w=s(99602);class k{constructor(){}ngOnInit(){this.initValues()}initValues(){this.minDate=pe()(new Date),this.dateModelInvoice.dateInvoice=this.minDate,this.dateModelInvoice.dateEchec=this.minDate,this.dateModelInvoice.dateLivraison=this.minDate}dateChange(){this.dateModelInvoice.dateEchec=this.dateModelInvoice.dateInvoice,this.dateModelInvoice.dateLivraison=this.dateModelInvoice.dateInvoice}}k.\u0275fac=function(i){return new(i||k)},k.\u0275cmp=e.Xpm({type:k,selectors:[["app-date"]],inputs:{dateModelInvoice:"dateModelInvoice"},decls:30,vars:12,consts:[[1,"text-black","font-bold","text-2xl","mb-2"],[1,"search-div","mt-4","py-5","h-[22.5rem]"],[1,"px-4"],[1,"flex","flex-col"],[1,"mt-3"],["appearance","fill",1,"w-full"],["matInput","",3,"matDatepicker","ngModel","min","ngModelChange","dateChange"],["matIconSuffix","",3,"for"],["picker",""],["matInput","",3,"matDatepicker","ngModel","min","ngModelChange"],["picker1",""],["picker2",""]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Date"),e.qZA()(),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Date"),e.qZA(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(r){return t.dateModelInvoice.dateInvoice=r})("dateChange",function(){return t.dateChange()}),e.qZA(),e._UZ(11,"mat-datepicker-toggle",7)(12,"mat-datepicker",null,8),e.qZA()(),e.TgZ(14,"div",4)(15,"mat-form-field",5)(16,"mat-label"),e._uU(17,"Date d'\xe9ch\xe9ance"),e.qZA(),e.TgZ(18,"input",9),e.NdJ("ngModelChange",function(r){return t.dateModelInvoice.dateEchec=r}),e.qZA(),e._UZ(19,"mat-datepicker-toggle",7)(20,"mat-datepicker",null,10),e.qZA()(),e.TgZ(22,"div",4)(23,"mat-form-field",5)(24,"mat-label"),e._uU(25,"Date de livraison"),e.qZA(),e.TgZ(26,"input",9),e.NdJ("ngModelChange",function(r){return t.dateModelInvoice.dateLivraison=r}),e.qZA(),e._UZ(27,"mat-datepicker-toggle",7)(28,"mat-datepicker",null,11),e.qZA()()()()()),2&i){const o=e.MAs(13),r=e.MAs(21),l=e.MAs(29);e.xp6(10),e.Q6J("matDatepicker",o)("ngModel",t.dateModelInvoice.dateInvoice)("min",t.minDate),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.Q6J("matDatepicker",r)("ngModel",t.dateModelInvoice.dateEchec)("min",t.dateModelInvoice.dateInvoice),e.xp6(1),e.Q6J("for",r),e.xp6(7),e.Q6J("matDatepicker",l)("ngModel",t.dateModelInvoice.dateLivraison)("min",t.dateModelInvoice.dateInvoice),e.xp6(1),e.Q6J("for",l)}},dependencies:[a.Fj,a.JJ,a.On,w.Mq,w.hl,w.nW,u.KE,u.hX,u.R9,g.Nt]});const Oe=[{label:"Dinar Tunisien",value:"TND",icon:"TND"},{label:"Dollar Am\xe9ricain",value:"USD",icon:"DOLLAR"},{label:"Euro",value:"EUR",icon:"EURO"}];function Me(n,i){1&n&&e.GkF(0)}function Le(n,i){if(1&n&&(e.TgZ(0,"span",15),e._UZ(1,"span",16)(2,"img",17),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src","assets/images/devises/"+t.icon+".svg",e.LSH)}}const he=function(n){return{$implicit:n}};function Ve(n,i){if(1&n&&(e.TgZ(0,"mat-option",10)(1,"span",11),e.YNc(2,Me,1,0,"ng-container",12),e.TgZ(3,"span",13),e._uU(4),e.qZA()(),e.YNc(5,Le,3,1,"ng-template",null,14,e.W1O),e.qZA()),2&n){const t=i.$implicit,o=e.MAs(6);e.Q6J("value",t.value),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,he,t.value)),e.xp6(2),e.Oqu(t.label)}}function Re(n,i){1&n&&e.GkF(0)}function je(n,i){if(1&n&&(e.TgZ(0,"span",15),e._UZ(1,"span",16)(2,"img",17),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src","assets/images/devises/"+t.icon+".svg",e.LSH)}}function Be(n,i){if(1&n&&(e.TgZ(0,"mat-option",10)(1,"span",11),e.YNc(2,Re,1,0,"ng-container",12),e.TgZ(3,"span",13),e._uU(4),e.qZA()(),e.YNc(5,je,3,1,"ng-template",null,14,e.W1O),e.qZA()),2&n){const t=i.$implicit,o=e.MAs(6);e.Q6J("value",t.value),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,he,t.value)),e.xp6(2),e.Oqu(t.label)}}function $e(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"mat-form-field",4)(2,"mat-label"),e._uU(3,"Devise Convert\xe9"),e.qZA(),e.TgZ(4,"mat-select",5),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.deviseInvoice.deviseConverted=r)}),e.YNc(5,Be,7,6,"mat-option",6),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.deviseInvoice.deviseConverted),e.xp6(1),e.Q6J("ngForOf",t.listDevises)}}class J{constructor(){this.listDevises=Oe,this.isChecked=!1}ngOnInit(){this.deviseInvoice.convertable=this.isChecked}isConvertable(){this.isChecked=!this.isChecked,this.deviseInvoice.convertable=this.isChecked}}J.\u0275fac=function(i){return new(i||J)},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-devise"]],inputs:{deviseInvoice:"deviseInvoice"},decls:16,vars:3,consts:[[1,"text-black","font-bold","text-2xl","mb-2"],[1,"search-div","mt-4","py-5","h-[22.5rem]"],[1,"px-4","mt-3"],[1,"flex","flex-col"],[1,"w-full"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-between"],[1,"lab",3,"change"],["class","flex flex-col mt-6",4,"ngIf"],[3,"value"],[1,"flex","items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ml-3"],["deviseImage",""],[1,"relative","w-6","shadow","rounded-full","overflow-hidden"],[1,"absolute","inset-0","ring-1","ring-inset","ring-black","ring-opacity-10"],[1,"w-full",3,"src"],[1,"flex","flex-col","mt-6"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Devise"),e.qZA()(),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Devise"),e.qZA(),e.TgZ(9,"mat-select",5),e.NdJ("ngModelChange",function(r){return t.deviseInvoice.devise=r}),e.YNc(10,Ve,7,6,"mat-option",6),e.qZA()()(),e.TgZ(11,"div",7)(12,"mat-label"),e._uU(13,"Convertible ?"),e.qZA(),e.TgZ(14,"mat-slide-toggle",8),e.NdJ("change",function(){return t.isConvertable()}),e.qZA()(),e.YNc(15,$e,6,2,"div",9),e.qZA()()),2&i&&(e.xp6(9),e.Q6J("ngModel",t.deviseInvoice.devise),e.xp6(1),e.Q6J("ngForOf",t.listDevises),e.xp6(5),e.Q6J("ngIf",t.isChecked))},dependencies:[c.sg,c.O5,c.tP,a.JJ,a.On,v.ey,u.KE,u.hX,Z.gD,ae.Rr]});class He{}var ve=s(48769);function Ge(n,i){1&n&&e.GkF(0)}function Ke(n,i){if(1&n&&(e.TgZ(0,"span",15),e._UZ(1,"span",16)(2,"img",17),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("src","assets/images/models/"+t.avatar,e.LSH)}}const ze=function(n){return{$implicit:n}};function Xe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",10),e.NdJ("onSelectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.modeleChanged(r))}),e.TgZ(1,"span",11),e.YNc(2,Ge,1,0,"ng-container",12),e.TgZ(3,"span",13),e._uU(4),e.qZA()(),e.YNc(5,Ke,3,1,"ng-template",null,14,e.W1O),e.qZA()}if(2&n){const t=i.$implicit,o=e.MAs(6);e.Q6J("value",t),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,ze,t.id)),e.xp6(2),e.Oqu(t.name)}}class D{constructor(){this.model=new e.vpe,this.standardColor="#2270ba",this.models=[{id:1,name:"Modele 1",avatar:"invoice1.png",color:this.standardColor},{id:2,name:"Modele 2",avatar:"invoice2.png",color:this.standardColor}],this.templateModel=new He,this.getRGBColor=(i,t)=>{let o=i.replace(/#/g,"");return`${parseInt(o.substr(0,2),16)},${parseInt(o.substr(2,2),16)},${parseInt(o.substr(4,2),16)}`}}ngOnInit(){}modeleChanged(i){i.isUserInput&&(i.source.value.color=this.standardColor,this.templateModel=i.source.value,this.model.emit(this.templateModel))}colorChanged(i){this.a11yColor=this.getRGBColor(i,"a11y"),this.templateModel.color=i,this.model.emit(this.templateModel),document.documentElement.style.setProperty("--color-a11y",this.a11yColor)}}function We(n,i){if(1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._UZ(2,"img",25),e.qZA(),e.TgZ(3,"div",26)(4,"div",11),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("src",null==t.partnerData?null:t.partnerData.logo,e.LSH),e.xp6(3),e.Oqu(null==t.partner?null:t.partner.company_name),e.xp6(2),e.Oqu(null==t.addressPartner?null:t.addressPartner.text),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.phone_number),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.email),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.web_site)}}function et(n,i){if(1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._UZ(2,"img",25),e.qZA(),e.TgZ(3,"div",26)(4,"div",11),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("src",null==t.clientData?null:t.clientData.logoTier,e.LSH),e.xp6(3),e.Oqu(null==t.clientData?null:t.clientData.selectedFournisseur),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.location),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.mobile),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.email)}}function tt(n,i){if(1&n&&(e.TgZ(0,"div",23)(1,"div",27),e._uU(2," Facturer \xe0 "),e.qZA(),e.TgZ(3,"div",26)(4,"div",11),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.clientData?null:t.clientData.selectedClient),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.location),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.mobile),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.email)}}function it(n,i){if(1&n&&(e.TgZ(0,"div",23)(1,"div",27),e._uU(2," Facturer \xe0 "),e.qZA(),e.TgZ(3,"div",26)(4,"div",11),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.partner?null:t.partner.company_name),e.xp6(2),e.Oqu(null==t.addressPartner?null:t.addressPartner.text),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.phone_number),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.email),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.web_site)}}function nt(n,i){if(1&n&&(e.TgZ(0,"div",30)(1,"div",31),e._UZ(2,"div",32),e.qZA(),e.TgZ(3,"div",33),e._uU(4),e.qZA(),e.TgZ(5,"div",33),e._uU(6),e.qZA(),e.TgZ(7,"div",33),e._uU(8),e.qZA(),e.TgZ(9,"div",34),e._uU(10),e.qZA(),e._UZ(11,"div",16),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("innerHTML",t.descriptionproduct,e.oJD),e.xp6(2),e.Oqu(t.prixunitaire),e.xp6(2),e.Oqu(t.quantite),e.xp6(2),e.Oqu(t.tvaAmount),e.xp6(2),e.Oqu(t.prixtotal)}}function ot(n,i){if(1&n&&(e.TgZ(0,"div",30),e._UZ(1,"div",35),e.TgZ(2,"div",36),e._uU(3,"SUBTOTAL"),e.qZA(),e.TgZ(4,"div",37),e._uU(5),e.qZA(),e._UZ(6,"div",16),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.subtotalprice)}}function at(n,i){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,nt,12,5,"div",29),e.YNc(2,ot,7,1,"div",29),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","line"==t.productname),e.xp6(1),e.Q6J("ngIf","subtotal"==t.productname)}}function rt(n,i){if(1&n&&(e.TgZ(0,"div",30)(1,"span",44),e._uU(2,"Le montant Total de la pr\xe9sente facture s'el\xe8ve \xe0 la somme de : "),e.qZA(),e.TgZ(3,"span",45),e._uU(4),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(4),e.Oqu(t.totalEnLetterConverted)}}function lt(n,i){if(1&n&&(e.TgZ(0,"div",28)(1,"div",30),e._UZ(2,"div",38),e.TgZ(3,"div",39),e._uU(4,"TOTAL TTC"),e.qZA(),e.TgZ(5,"div",40),e._uU(6),e.qZA(),e.TgZ(7,"div",39),e._uU(8,"Timbre Fiscal"),e.qZA(),e.TgZ(9,"div",40),e._uU(10),e.qZA(),e.TgZ(11,"div",41),e._uU(12,"TOTAL"),e.qZA(),e.TgZ(13,"div",42),e._uU(14),e.qZA(),e.TgZ(15,"div",43)(16,"div",30)(17,"span",44),e._uU(18,"Le montant Total de la pr\xe9sente facture s'el\xe8ve \xe0 la somme de : "),e.qZA(),e.TgZ(19,"span",45),e._uU(20),e.qZA()(),e.YNc(21,rt,5,1,"div",29),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(6),e.Oqu(t.getSommeFacture().toFixed(3)),e.xp6(4),e.Oqu(t.settingPartner.timbre_fiscal.toFixed(3)),e.xp6(4),e.Oqu((t.getSommeFacture()+t.settingPartner.timbre_fiscal).toFixed(3)),e.xp6(6),e.Oqu(t.totalEnLetter),e.xp6(1),e.Q6J("ngIf",t.deviseInvoice.convertable)}}function st(n,i){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),e.YNc(5,We,14,6,"div",6),e.YNc(6,et,12,5,"div",6),e.YNc(7,tt,12,4,"div",6),e.YNc(8,it,14,5,"div",6),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e._uU(11),e.qZA(),e.TgZ(12,"div",9),e._uU(13),e.qZA(),e.TgZ(14,"div",10),e._uU(15,"DATE DE FACTURE"),e.qZA(),e.TgZ(16,"div",11),e._uU(17),e.qZA(),e.TgZ(18,"div",10),e._uU(19,"DATE D'\xc9CH\xc9ANCE"),e.qZA(),e.TgZ(20,"div",11),e._uU(21),e.qZA(),e.TgZ(22,"div",10),e._uU(23,"TOTAL D\xdb"),e.qZA(),e.TgZ(24,"div",11),e._uU(25),e.qZA()()(),e.TgZ(26,"div",12)(27,"div",13),e._uU(28),e.qZA(),e.TgZ(29,"div",14),e._uU(30,"TARIF HT"),e.qZA(),e.TgZ(31,"div",14),e._uU(32,"QT\xc9"),e.qZA(),e.TgZ(33,"div",14),e._uU(34,"TVA"),e.qZA(),e.TgZ(35,"div",15),e._uU(36,"TOTAL TTC"),e.qZA(),e._UZ(37,"div",16),e.YNc(38,at,3,2,"div",17),e.YNc(39,lt,22,5,"div",18),e.qZA()(),e.TgZ(40,"div",19)(41,"div",11),e._uU(42,"Veuillez payer en moins de deux semaines. Merci pour votre affaires."),e.qZA(),e.TgZ(43,"div",20),e._UZ(44,"img",21),e.TgZ(45,"div",22),e._uU(46," In condimentum malesuada efficitur. Mauris volutpat placerat auctor. Ut ac congue dolor. Quisque scelerisque lacus sed feugiat fermentum. Cras aliquet facilisis pellentesque. Nunc hendrerit quam at leo commodo, a suscipit tellus dapibus. Etiam at felis volutpat est mollis lacinia. Mauris placerat sem sit amet velit mollis, in porttitor ex finibus. Proin eu nibh id libero tincidunt lacinia et eget. "),e.qZA()()()()()),2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.xp6(5),e.Q6J("ngIf","VENTE"==r.typeInvoice),e.xp6(1),e.Q6J("ngIf","ACHAT"==r.typeInvoice),e.xp6(1),e.Q6J("ngIf","VENTE"==r.typeInvoice),e.xp6(1),e.Q6J("ngIf","ACHAT"==r.typeInvoice),e.xp6(3),e.Oqu(r.invoiceCategory.toUpperCase()),e.xp6(2),e.hij("#",r.numFacture,""),e.xp6(4),e.Oqu(r.dateModelInvoice.dateInvoice.format("DD-MM-YYYY")),e.xp6(4),e.Oqu(r.dateModelInvoice.dateEchec.format("DD-MM-YYYY")),e.xp6(4),e.Oqu((r.getSommeFacture()+r.settingPartner.timbre_fiscal).toFixed(3)),e.xp6(3),e.Oqu(r.clientData.typeAchat.toUpperCase()),e.xp6(10),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",o+1==r.paginatedArray.length),e.xp6(5),e.Q6J("src",null==r.partnerData?null:r.partnerData.logo,e.LSH)}}D.\u0275fac=function(i){return new(i||D)},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-design"]],outputs:{model:"model"},decls:18,vars:3,consts:[[1,"text-black","font-bold","text-2xl","mb-2"],[1,"search-div","mt-4","py-5","h-[22.5rem]"],[1,"px-4"],[1,"flex","flex-col"],[1,"mt-3"],[1,"w-full"],[1,"flex"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matInput","",3,"ngModel","ngModelChange"],["matSuffix","","ngx-colors-trigger","",1,"suffix",3,"ngModel","ngModelChange"],[3,"value","onSelectionChange"],[1,"flex","items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ml-3"],["templateModele",""],[1,"relative","w-40","mt-2","rounded-xl","shadow","rounded-sm","overflow-hidden"],[1,"absolute","inset-0","ring-1","ring-inset","ring-black","ring-opacity-10"],[1,"w-full",3,"src"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Design"),e.qZA()(),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Mod\xe8le"),e.qZA(),e.TgZ(10,"mat-select",6),e.YNc(11,Xe,7,6,"mat-option",7),e.qZA()()(),e.TgZ(12,"div",4)(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Design template"),e.qZA(),e.TgZ(16,"input",8),e.NdJ("ngModelChange",function(r){return t.standardColor=r}),e.qZA(),e.TgZ(17,"ngx-colors",9),e.NdJ("ngModelChange",function(r){return t.standardColor=r})("ngModelChange",function(r){return t.colorChanged(r)}),e.qZA()()()()()()),2&i&&(e.xp6(11),e.Q6J("ngForOf",t.models),e.xp6(5),e.Q6J("ngModel",t.standardColor),e.xp6(1),e.Q6J("ngModel",t.standardColor))},dependencies:[c.sg,c.tP,a.Fj,a.JJ,a.On,v.ey,u.KE,u.hX,u.R9,g.Nt,Z.gD,ve.qZ,ve.u_]});class Q{constructor(i){this.commonService=i}ngOnInit(){this.totalInWords()}getSommeFacture(){return this.exemptTVA?this.commonService.getSommeHorsTax(this.lines):this.commonService.getSommeTVA(this.lines)}totalInWords(){const i=(this.getSommeFacture()+this.settingPartner.timbre_fiscal).toFixed(3);this.totalEnLetter=this.commonService.convertTotalToWords(i,this.deviseInvoice)}}function ct(n,i){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"img",26),e.qZA(),e.TgZ(3,"div",27)(4,"div",9),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA(),e.TgZ(12,"div"),e._uU(13),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("src",null==t.partnerData?null:t.partnerData.logo,e.LSH),e.xp6(3),e.Oqu(null==t.partner?null:t.partner.company_name),e.xp6(2),e.Oqu(null==t.addressPartner?null:t.addressPartner.text),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.phone_number),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.email),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.web_site)}}function ut(n,i){if(1&n&&(e.TgZ(0,"div",24)(1,"div",25),e._UZ(2,"img",26),e.qZA(),e.TgZ(3,"div",27)(4,"div",28),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("src",null==t.clientData?null:t.clientData.logoTier,e.LSH),e.xp6(3),e.Oqu(null==t.clientData?null:t.clientData.selectedFournisseur),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.location),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.mobile),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.email)}}function dt(n,i){if(1&n&&(e.TgZ(0,"div",29)(1,"div",28),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.clientData?null:t.clientData.selectedClient),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.location),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.mobile),e.xp6(2),e.Oqu(null==t.addressClient?null:t.addressClient.email)}}function mt(n,i){if(1&n&&(e.TgZ(0,"div",29)(1,"div",28),e._uU(2),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(null==t.partner?null:t.partner.company_name),e.xp6(2),e.Oqu(null==t.addressPartner?null:t.addressPartner.text),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.phone_number),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.email),e.xp6(2),e.Oqu(null==t.partner?null:t.partner.web_site)}}function pt(n,i){if(1&n&&(e.TgZ(0,"div",32),e._UZ(1,"div",33),e.TgZ(2,"div",34),e._uU(3),e.qZA(),e.TgZ(4,"div",34),e._uU(5),e.qZA(),e.TgZ(6,"div",34),e._uU(7),e.qZA(),e.TgZ(8,"div",35),e._uU(9),e.qZA(),e._UZ(10,"div",16),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("innerHTML",t.descriptionproduct,e.oJD),e.xp6(2),e.Oqu(t.prixunitaire),e.xp6(2),e.Oqu(t.quantite),e.xp6(2),e.Oqu(t.tvaAmount),e.xp6(2),e.Oqu(t.prixtotal)}}function _t(n,i){if(1&n&&(e.TgZ(0,"div",32),e._UZ(1,"div",36),e.TgZ(2,"div",37),e._uU(3,"SUBTOTAL"),e.qZA(),e.TgZ(4,"div",38),e._uU(5),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.subtotalprice)}}function gt(n,i){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,pt,11,5,"div",31),e.YNc(2,_t,6,1,"div",31),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","line"==t.productname),e.xp6(1),e.Q6J("ngIf","subtotal"==t.productname)}}function ft(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td",50),e._uU(2),e.qZA(),e.TgZ(3,"td",50),e._uU(4),e.qZA(),e.TgZ(5,"td",51),e._uU(6),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.base),e.xp6(2),e.hij("",t.taux,"%"),e.xp6(2),e.Oqu(t.montant)}}function ht(n,i){if(1&n&&(e.TgZ(0,"div",39)(1,"div",40)(2,"div",41)(3,"table",42)(4,"thead")(5,"tr")(6,"th",43),e._uU(7,"Base"),e.qZA(),e.TgZ(8,"th",43),e._uU(9,"Taux"),e.qZA(),e.TgZ(10,"th",43),e._uU(11,"Montant"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,ft,7,3,"tr",44),e.qZA()()(),e.TgZ(14,"div",45)(15,"span",46),e._uU(16,"CACHET ET SIGNATURE"),e.qZA()(),e.TgZ(17,"div",47)(18,"div",32)(19,"div",48),e._uU(20," Total Net HT : "),e.qZA(),e.TgZ(21,"div",49),e._uU(22),e.qZA(),e.TgZ(23,"div",48),e._uU(24," Total TVA : "),e.qZA(),e.TgZ(25,"div",49),e._uU(26),e.qZA(),e.TgZ(27,"div",48),e._uU(28," Timbre Fiscal : "),e.qZA(),e.TgZ(29,"div",49),e._uU(30),e.qZA(),e.TgZ(31,"div",48),e._uU(32," Net \xe0 Payer : "),e.qZA(),e.TgZ(33,"div",49),e._uU(34),e.qZA()()()()()),2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngForOf",t.listTVAtable),e.xp6(9),e.hij(" ",t.totalNetHT," "),e.xp6(4),e.hij(" ",t.totalTVA," "),e.xp6(4),e.hij(" ",t.settingPartner.timbre_fiscal," "),e.xp6(4),e.hij(" ",(t.getSommeFacture()+t.settingPartner.timbre_fiscal).toFixed(3)," ")}}function vt(n,i){if(1&n&&(e.TgZ(0,"div",16)(1,"div",32)(2,"span",52),e._uU(3,"Le montant Total de la pr\xe9sente facture s'el\xe8ve \xe0 la somme de : "),e.qZA(),e.TgZ(4,"span",53),e._uU(5),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(t.totalEnLetter)}}function Zt(n,i){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),e._uU(6),e.qZA(),e.TgZ(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8),e._uU(10,"DATE DE FACTURE"),e.qZA(),e.TgZ(11,"div",9),e._uU(12),e.qZA(),e.TgZ(13,"div",8),e._uU(14,"DATE D'\xc9CH\xc9ANCE"),e.qZA(),e.TgZ(15,"div",9),e._uU(16),e.qZA(),e.TgZ(17,"div",8),e._uU(18,"TOTAL D\xdb"),e.qZA(),e.TgZ(19,"div",9),e._uU(20),e.qZA()(),e.YNc(21,ct,14,6,"div",10),e.YNc(22,ut,12,5,"div",10),e.qZA(),e.YNc(23,dt,9,4,"div",11),e.YNc(24,mt,11,5,"div",11),e.TgZ(25,"div",12)(26,"div",13),e._uU(27),e.qZA(),e.TgZ(28,"div",14),e._uU(29,"TARIF HT"),e.qZA(),e.TgZ(30,"div",14),e._uU(31,"QT\xc9"),e.qZA(),e.TgZ(32,"div",14),e._uU(33,"TVA"),e.qZA(),e.TgZ(34,"div",15),e._uU(35,"TOTAL TTC"),e.qZA(),e._UZ(36,"div",16),e.YNc(37,gt,3,2,"div",17),e.YNc(38,ht,35,5,"div",18),e.YNc(39,vt,6,1,"div",19),e.qZA()(),e.TgZ(40,"div",20)(41,"div",9),e._uU(42,"Veuillez payer en moins de deux semaines. Merci pour votre affaires."),e.qZA(),e.TgZ(43,"div",21),e._UZ(44,"img",22),e.TgZ(45,"div",23),e._uU(46," In condimentum malesuada efficitur. Mauris volutpat placerat auctor. Ut ac congue dolor. Quisque scelerisque lacus sed feugiat fermentum. Cras aliquet facilisis pellentesque. Nunc hendrerit quam at leo commodo, a suscipit tellus dapibus. Etiam at felis volutpat est mollis lacinia. Mauris placerat sem sit amet velit mollis, in porttitor ex finibus. Proin eu nibh id libero tincidunt lacinia et eget. "),e.qZA()()()()()),2&n){const t=i.$implicit,o=i.index,r=e.oxw();e.xp6(6),e.Oqu(r.invoiceCategory.toUpperCase()),e.xp6(2),e.hij("#",r.numFacture,""),e.xp6(4),e.Oqu(r.dateModelInvoice.dateInvoice.format("DD-MM-YYYY")),e.xp6(4),e.Oqu(r.dateModelInvoice.dateEchec.format("DD-MM-YYYY")),e.xp6(4),e.Oqu((r.getSommeFacture()+r.settingPartner.timbre_fiscal).toFixed(3)),e.xp6(1),e.Q6J("ngIf","VENTE"==r.typeInvoice),e.xp6(1),e.Q6J("ngIf","ACHAT"==r.typeInvoice),e.xp6(1),e.Q6J("ngIf","VENTE"==r.typeInvoice),e.xp6(1),e.Q6J("ngIf","ACHAT"==r.typeInvoice),e.xp6(3),e.Oqu(r.clientData.typeAchat.toUpperCase()),e.xp6(10),e.Q6J("ngForOf",t),e.xp6(1),e.Q6J("ngIf",o+1==r.paginatedArray.length),e.xp6(1),e.Q6J("ngIf",o+1==r.paginatedArray.length),e.xp6(5),e.Q6J("src",null==r.partnerData?null:r.partnerData.logo,e.LSH)}}Q.\u0275fac=function(i){return new(i||Q)(e.Y36(ee.v))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-modele1"]],inputs:{modeleInvoice:"modeleInvoice",dateModelInvoice:"dateModelInvoice",deviseInvoice:"deviseInvoice",partnerData:"partnerData",clientData:"clientData",lines:"lines",addressClient:"addressClient",ribClient:"ribClient",numFacture:"numFacture",invoiceCategory:"invoiceCategory",typeInvoice:"typeInvoice",addressPartner:"addressPartner",ribPartner:"ribPartner",partner:"partner",exemptTVA:"exemptTVA",settingPartner:"settingPartner",paginatedArray:"paginatedArray"},decls:1,vars:1,consts:[["class","p-6 sm:p-10 text-left print:p-0",4,"ngFor","ngForOf"],[1,"p-6","sm:p-10","text-left","print:p-0"],[1,"w-240","min-w-240","min-h-320","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:p-0","print:rounded-none","print:shadow-none","print:bg-transparent","border-2","rounded-lg","flex","flex-col"],[1,"grow"],[1,"flex","items-start"],[1,"grid","grid-rows-2","place-items-start","gap-y-12"],["class","grid auto-cols-max grid-flow-col gap-x-8",4,"ngIf"],[1,"grid","grid-cols-2","gap-x-4","gap-y-1","ml-auto"],[1,"justify-self-end","text-4xl","tracking-tight","text-secondary"],[1,"text-3xl","self-center"],[1,"justify-self-end","font-medium","tracking-tight","text-secondary"],[1,"font-medium"],[1,"grid","grid-cols-12","gap-x-1","mt-16"],[1,"col-span-7","font-medium","text-md","text-secondary"],[1,"font-medium","text-md","text-right","text-secondary"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],[1,"col-span-12","my-4","border-b"],["class","col-span-12",4,"ngFor","ngForOf"],["class","col-span-12",4,"ngIf"],[1,"mt-16","bottom-[11rem]"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-2",3,"src"],[1,"ml-6","text-sm","text-secondary","max-w-[49rem]"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8"],[1,"place-self-center","w-24"],[1,"w-24",3,"src"],[1,"pl-10","border-l","text-md","max-w-xs"],[1,"place-self-center","w-24","text-center","text-2xl","text-secondary"],[1,"col-span-12"],["class","grid grid-cols-12",4,"ngIf"],[1,"grid","grid-cols-12"],[1,"col-span-7"],[1,"text-lg","font-medium",3,"innerHTML"],[1,"col-span-1","self-center","text-right"],[1,"col-span-2","self-center","text-right"],[1,"col-span-12","mt-2"],[1,"col-span-10","self-center","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-right","text-lg"],[1,"col-span-12","my-3","border-b"],[1,"col-span-10","self-center","text-xl","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-right","text-xl","font-medium"],[1,"col-span-10","self-center","text-2xl","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-right","text-2xl","font-medium"],[1,"col-span-12","my-2","border-b"],[1,"col-span-12","font-bold"],[1,"col-span-12","my-2"]],template:function(i,t){1&i&&e.YNc(0,st,47,13,"div",0),2&i&&e.Q6J("ngForOf",t.paginatedArray)},dependencies:[c.sg,c.O5]});class Y{constructor(i){this.commonService=i,this.listTVAtable=[],this.totalTVA=0,this.totalNetHT=0}ngOnInit(){this.exemptTVA?this.totalTVA=0:this.listTVAtable.forEach(i=>{this.totalTVA+=i.montant}),this.totalNetHT=this.commonService.getSommeHorsTax(this.lines),this.totalInWords()}getSommeFacture(){return this.exemptTVA?this.commonService.getSommeHorsTax(this.lines):this.commonService.getSommeTVA(this.lines)}totalInWords(){const i=(this.getSommeFacture()+this.settingPartner.timbre_fiscal).toFixed(3);this.totalEnLetter=this.commonService.convertTotalToWords(i,this.deviseInvoice)}}function Tt(n,i){1&n&&(e.TgZ(0,"div",78),e._uU(1,"Choisir client"),e.qZA())}function bt(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Ct(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.code),e.xp6(1),e.hij(" ",t.code," ")}}function xt(n,i){1&n&&e.GkF(0)}function At(n,i){if(1&n&&(e.TgZ(0,"span",84),e._UZ(1,"span",85)(2,"img",86),e.qZA()),2&n){const t=i.$implicit,o=e.oxw().$implicit;e.xp6(2),e.Q6J("src","assets/images/flags/"+o.flag.toUpperCase()+".svg",e.LSH)("alt","Flag image for "+t)}}Y.\u0275fac=function(i){return new(i||Y)(e.Y36(ee.v))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-modele2"]],inputs:{modeleInvoice:"modeleInvoice",dateModelInvoice:"dateModelInvoice",deviseInvoice:"deviseInvoice",partnerData:"partnerData",clientData:"clientData",lines:"lines",addressClient:"addressClient",ribClient:"ribClient",numFacture:"numFacture",invoiceCategory:"invoiceCategory",typeInvoice:"typeInvoice",addressPartner:"addressPartner",ribPartner:"ribPartner",partner:"partner",listTVAtable:"listTVAtable",exemptTVA:"exemptTVA",settingPartner:"settingPartner",paginatedArray:"paginatedArray"},decls:1,vars:1,consts:[["class","p-6 sm:p-10 text-left print:p-0",4,"ngFor","ngForOf"],[1,"p-6","sm:p-10","text-left","print:p-0"],[1,"w-240","min-h-320","p-16","rounded-2xl","shadow","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent","flex","flex-col"],[1,"grow"],[1,"flex","items-start","justify-between"],[1,"grid","grid-cols-2","gap-x-4","gap-y-1"],[1,"text-4xl","tracking-tight","text-secondary"],[1,"text-2xl","self-center"],[1,"font-medium","tracking-tight","text-secondary"],[1,"font-medium"],["class","grid auto-cols-max grid-flow-col gap-x-8 -mr-16 py-6 px-8 rounded-l-2xl bg-skin-a11y dark",4,"ngIf"],["class","text-md mt-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-x-1","mt-12"],[1,"col-span-7","font-medium","text-md","text-secondary"],[1,"font-medium","text-md","text-right","text-secondary"],[1,"col-span-2","font-medium","text-md","text-right","text-secondary"],[1,"col-span-12","my-4","border-b"],["class","col-span-12",4,"ngFor","ngForOf"],["class","col-span-12 mt-12",4,"ngIf"],["class","col-span-12 my-4 border-b",4,"ngIf"],[1,"mt-16","bottom-[11rem]"],[1,"flex","items-start","mt-4"],[1,"flex-0","w-10","mt-2",3,"src"],[1,"ml-6","text-sm","text-secondary","max-w-[49rem]"],[1,"grid","auto-cols-max","grid-flow-col","gap-x-8","-mr-16","py-6","px-8","rounded-l-2xl","bg-skin-a11y","dark"],[1,"place-self-center","w-24"],[1,"w-24","rounded-l-xl",3,"src"],[1,"pl-10","border-l","text-md","max-w-xs"],[1,"text-xl","font-medium"],[1,"text-md","mt-2"],[1,"col-span-12"],["class","grid grid-cols-12",4,"ngIf"],[1,"grid","grid-cols-12"],[1,"col-span-7","text-lg","font-medium",3,"innerHTML"],[1,"col-span-1","self-center","text-right"],[1,"col-span-2","self-center","text-right"],[1,"col-span-12","mt-16"],[1,"col-span-10","self-center","font-medium","tracking-tight","text-secondary"],[1,"col-span-2","text-right","text-lg"],[1,"col-span-12","mt-12"],[1,"grid","grid-cols-12","gap-x-1"],[1,"col-span-5"],[1,"table-fixed","border-collapse","border","min-w-full"],[1,"text-center","border"],[4,"ngFor","ngForOf"],[1,"col-span-3","border","rounded-md","text-center"],[1,"font-bold"],[1,"col-span-4"],[1,"col-span-6","border","font-bold"],[1,"col-span-6","border","text-right"],[1,"text-right","border-r"],[1,"text-right"],[1,"col-span-12","font-bold"],[1,"col-span-12","my-2"]],template:function(i,t){1&i&&e.YNc(0,Zt,47,14,"div",0),2&i&&e.Q6J("ngForOf",t.paginatedArray)},dependencies:[c.sg,c.O5]});const qt=function(n){return{$implicit:n}};function yt(n,i){if(1&n&&(e.TgZ(0,"mat-option",79)(1,"span",80),e.YNc(2,xt,1,0,"ng-container",81),e.TgZ(3,"span",82),e._uU(4),e.qZA()(),e.YNc(5,At,3,2,"ng-template",null,83,e.W1O),e.qZA()),2&n){const t=i.$implicit,o=e.MAs(6);e.Q6J("value",t.id),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,qt,t.id)),e.xp6(2),e.Oqu(t.name)}}function Ut(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function It(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.location)}}function Nt(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.accountNumber)}}function St(n,i){1&n&&(e.TgZ(0,"div",78),e._uU(1,"G\xe9n\xe9rer Facture"),e.qZA())}function Ft(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.text)}}function wt(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.accountNumber)}}function kt(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-outputline",88),e.qZA()),2&n){const t=e.oxw().index,o=e.oxw();e.xp6(1),e.Q6J("line",o.linestotallist[t])("linesList",o.linestotallist)("facturelist",o.facturelist)("index",t)}}function Jt(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-sub-total",89),e.qZA()),2&n){const t=e.oxw().index,o=e.oxw();e.xp6(1),e.Q6J("line",o.linestotallist[t])("linesList",o.linestotallist)("facturelist",o.facturelist)("startFrom",o.getStartFrom(t))("index",t)}}function Dt(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-comment",88),e.qZA()),2&n){const t=e.oxw().index,o=e.oxw();e.xp6(1),e.Q6J("line",o.linestotallist[t])("linesList",o.linestotallist)("facturelist",o.facturelist)("index",t)}}function Qt(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,kt,2,4,"div",87),e.YNc(2,Jt,2,5,"div",87),e.YNc(3,Dt,2,4,"div",87),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1==t.type),e.xp6(1),e.Q6J("ngIf",2==t.type),e.xp6(1),e.Q6J("ngIf",3==t.type)}}function Yt(n,i){1&n&&(e.TgZ(0,"div",78),e._uU(1,"R\xe9glages"),e.qZA())}function Et(n,i){1&n&&(e.TgZ(0,"div",78),e._uU(1,"Preview et imprimer"),e.qZA())}function Pt(n,i){if(1&n&&e._UZ(0,"app-modele1",90),2&n){const t=e.oxw();e.Q6J("modeleInvoice",t.modeleInvoice)("dateModelInvoice",t.dateModelInvoice)("deviseInvoice",t.deviseInvoice)("partnerData",t.data.getRawValue())("clientData",t.client.getRawValue())("lines",t.linestotallist)("partner",t.partner)("addressClient",t.selectedAddressClient)("ribClient",t.selectedRibClient)("numFacture",t.facturenumber)("invoiceCategory",t.routeData.typePaper)("typeInvoice",t.typeInvoice)("addressPartner",t.selectedAddressPartner)("ribPartner",t.selectedRibPartner)("settingPartner",t.settingPartner)("paginatedArray",t.paginatedArray)}}function Ot(n,i){if(1&n&&e._UZ(0,"app-modele2",91),2&n){const t=e.oxw();e.Q6J("modeleInvoice",t.modeleInvoice)("dateModelInvoice",t.dateModelInvoice)("deviseInvoice",t.deviseInvoice)("partnerData",t.data.getRawValue())("clientData",t.client.getRawValue())("lines",t.linestotallist)("partner",t.partner)("addressClient",t.selectedAddressClient)("ribClient",t.selectedRibClient)("numFacture",t.facturenumber)("invoiceCategory",t.routeData.typePaper)("typeInvoice",t.typeInvoice)("addressPartner",t.selectedAddressPartner)("ribPartner",t.selectedRibPartner)("listTVAtable",t.listTVAtable)("settingPartner",t.settingPartner)("paginatedArray",t.paginatedArray)}}class j{constructor(i,t,o,r,l,m,h,b,C,le,se){this.router=i,this._formBuilder=t,this.route=o,this.dialog=r,this.partnerService=l,this.fundService=m,this.fournisseurService=h,this.buillingService=b,this.toast=C,this.commonService=le,this.moduleService=se,this.checkboxValue=!1,this.states=ue,this.modesPaiement=de,this.myControl=new a.NI(""),this.myControl1=new a.NI(""),this.clientData=[],this.addressClientList=[],this.bankClientList=[],this.addressPartnerList=[],this.bankPartnerList=[],this.urlLogo="",this.linestotallist=[],this.facturelist=[],this.dateModelInvoice=new _e,this.deviseInvoice=new ge,this.modeleInvoice={id:0,color:""},this.typeInvoice=R.VENTE,this.listTVAtable=[],this.routeData=this.router.getCurrentNavigation().extras.state}ngOnInit(){this.initForm(),this.initAutocomplete(),this.getPartnerData(),this.getInvoiceNumber(),this.getSettingPartner()}initForm(){this.client=this._formBuilder.group({selectedClient:["",a.kI.required],codeClient:["",a.kI.required],typeAchat:["",a.kI.required],tva:[!1,a.kI.required],langue:["",a.kI.required],modeDePaiement:["",a.kI.required],adresse:["",a.kI.required],ribClient:["",a.kI.required]}),this.data=this._formBuilder.group({logo:["",a.kI.required],nomSociete:["",a.kI.required],telSociete:["",a.kI.required],adresseSociete:["",a.kI.required],rcSociete:["",a.kI.required],ribSociete:["",a.kI.required],nomClient:["",a.kI.required],emailClient:["",a.kI.required],telClient:["",a.kI.required],adresseClient:["",a.kI.required],rcClient:["",a.kI.required]}),this.client.get("adresse").disable(),this.client.get("ribClient").disable(),this.client.get("codeClient").disable()}initAutocomplete(){this.filteredClient$=this.myControl.valueChanges.pipe((0,z.O)(""),(0,X.U)(i=>this._filteredClient(i))),this.filteredCode$=this.myControl1.valueChanges.pipe((0,z.O)(""),(0,X.U)(i=>this._filteredCode(i)))}_filteredClient(i){return this.nomClient=i,this.clientData.filter(t=>0===t.name.toLowerCase().indexOf(i.toLowerCase()))}_filteredCode(i){return this.clientData.filter(t=>0===t.code.toLowerCase().indexOf(i.toLowerCase()))}getInvoiceNumber(){switch(this.routeData.typePaper){case"Devis":this.buillingService.getDevisNumber(this.typeInvoice).subscribe(i=>{this.facturenumber=i.number});break;case"BonLivraison":case"BonCommande":this.buillingService.getBonLivraisonNumber(this.typeInvoice).subscribe(i=>{this.facturenumber=i.number});break;case"FactureFournisseur":this.buillingService.getFactureNumber(this.typeInvoice).subscribe(i=>{this.facturenumber=i.number})}}onSelectFile(i){if(i.target.files&&i.target.files[0]){const t=new FileReader;t.readAsDataURL(i.target.files[0]),this.partnerPicture=i.target.files[0],t.onload=o=>{this.urlLogo=o.target.result,this.data.get("logo").setValue(this.urlLogo)}}}getPartnerData(){this.partnerService.getPartner().subscribe(i=>{this.partner=i,this.getTierData(),this.getPartnerAdresses(),this.getPartnerBanks(),this.urlLogo=ie.N.partnersUrl+"/partners/loadFile/"+i.logo,this.data.get("logo").setValue(this.urlLogo),this.data.get("nomSociete").setValue(this.partner.company_name),this.data.get("telSociete").setValue(this.partner.phone_number),this.data.get("rcSociete").setValue(this.partner.trade_register+"/"+this.partner.patent)}),this.data.get("nomSociete").disable(),this.data.get("telSociete").disable(),this.data.get("rcSociete").disable(),this.data.get("nomClient").disable(),this.data.get("emailClient").disable(),this.data.get("telClient").disable(),this.data.get("adresseClient").disable(),this.data.get("rcClient").disable()}getTierData(){this.fournisseurService.getTiersByTypeNature(M.CLIENT).subscribe(i=>{this.clientData=i})}getPartnerAdresses(){this.partnerService.getAllAddresse().subscribe(i=>{this.addressPartnerList=i})}getPartnerBanks(){this.fundService.getAllComptes().subscribe(i=>{this.bankPartnerList=i})}getSettingPartner(){this.moduleService.getConfig().subscribe(i=>{this.settingPartner=i})}openAddAdresseClient(){this.dialog.open(q,{restoreFocus:!1,data:{tier:"client",tierData:this.selectedClient}}).afterClosed().subscribe(i=>{i&&this.addressClientList.push(i)})}openAddAdressePartner(){this.dialog.open(q,{restoreFocus:!1,data:{tier:"partner"}}).afterClosed().subscribe(i=>{i&&this.addressPartnerList.push(i)})}openAddRibPartner(){this.dialog.open(y,{restoreFocus:!1,data:{tier:"partner"}}).afterClosed().subscribe(i=>{i&&this.bankPartnerList.push(i)})}openAddRibClient(){this.dialog.open(y,{restoreFocus:!1,data:{tier:"client",tierData:this.selectedClient}}).afterClosed().subscribe(i=>{i&&this.bankClientList.push(i)})}selectClient(i){this.clientData.forEach(t=>{t.name==this.nomClient&&(this.selectedClient=t,this.client.get("selectedClient").setValue(this.selectedClient.name),this.client.get("codeClient").setValue(this.selectedClient.code),this.client.get("codeClient").enable(),this.fournisseurService.getAllAdresses(t.uuid).subscribe(o=>{this.addressClientList=[],o&&o.forEach(r=>{this.addressClientList.push(r)}),this.client.get("adresse").enable()}),this.fournisseurService.getAllBankAccount(t.uuid).subscribe(o=>{this.bankClientList=[],o&&(this.bankClientList=o,this.client.get("ribClient").enable())}))})}selectAddressClient(i){this.addressClientList.forEach(t=>{t.uuid===i.value&&(this.selectedAddressClient=t)})}selectRibClient(i){this.bankClientList.forEach(t=>{t.uuid===i.value&&(this.selectedRibClient=t)})}selectAddressPartner(i){this.addressPartnerList.forEach(t=>{t.uuid===i.value&&(this.selectedAddressPartner=t)})}selectRibPartner(i){this.bankPartnerList.forEach(t=>{t.uuid===i.value&&(this.selectedRibPartner=t)})}clientSubmit(){this.data.get("nomClient").setValue(this.client.get("selectedClient").value),this.data.get("emailClient").setValue(this.selectedClient.email),this.data.get("telClient").setValue(this.selectedClient.phone),this.data.get("adresseClient").setValue(this.selectedAddressClient.location),this.data.get("rcClient").setValue(this.selectedClient.rc)}genererFacture(){}getTvaCheck(){this.checkboxValue=!this.checkboxValue,this.client.get("tva").setValue(this.checkboxValue)}retourbtn(){this.router.navigate(["../"],{relativeTo:this.route}).then(i=>{},i=>{})}addLigne(){this.addInput("line",1)}addSousTotal(){this.addInput("subtotal",2)}addCommentaire(){this.addInput("commentaire",3)}addInput(i,t){const o=this.facturelist.length,r=new V;r.id=o,r.productname=i,this.linestotallist.push(r),this.facturelist.push({type:t,id:o,totalline:""})}getStartFrom(i){let t=0;for(t=i-1;t>-1&&"subtotal"!==this.linestotallist[t].productname;t--);return t+1}check(){let i=this.commonService.splitLines(this.linestotallist);this.listTVAtable=i[0],this.paginatedArray=i[1]}modeleChange(i){this.modeleInvoice=i}saveInvoice(){switch(this.routeData.typePaper){case"Devis":this.buillingService.createDevis(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{});break;case"BonCommande":this.buillingService.createBonCommande(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{});break;case"BonLivraison":this.buillingService.createBonLivraison(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{});break;case"FactureFournisseur":this.buillingService.createInvoice(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{})}}getPayload(){return{customer:this.selectedClient.uuid,customerAdress:this.selectedAddressPartner.uuid,customerRib:this.selectedRibClient.uuid,partner:this.partner.uuid,partnerAdress:this.selectedAddressPartner.uuid,partnerRIB:this.selectedRibPartner.uuid,color:this.modeleInvoice.color,deliveryDate:this.dateModelInvoice.dateLivraison.format("YYYY-MM-DD"),devise:this.deviseInvoice.devise,dueDate:this.dateModelInvoice.dateEchec.format("YYYY-MM-DD"),invoiceDate:this.dateModelInvoice.dateInvoice.format("YYYY-MM-DD"),invoiceNumber:this.facturenumber,invoicetype:this.typeInvoice,isdeleted:!1,langue:this.client.get("langue").value,left_to_pay:this.commonService.getSommeTVA(this.linestotallist),lineModels:this.linestotallist,type:this.routeData.type,model:this.modeleInvoice.id,purchaseType:this.client.get("typeAchat").value,total_htt:this.commonService.getSommeHorsTax(this.linestotallist),total_ttc:this.commonService.getSommeTVA(this.linestotallist),hasTva:this.checkboxValue,status:"FactureFournisseur"==this.routeData.typePaper?"NON_PAYE":"BonLivraison"==this.routeData.typePaper?"NON_LIVRE":"CREE",payMode:this.client.get("modeDePaiement").value}}}function Mt(n,i){1&n&&(e.TgZ(0,"div",68),e._uU(1,"Choisir Fournisseur"),e.qZA())}function Lt(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.name),e.xp6(1),e.hij(" ",t.name," ")}}function Vt(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.code),e.xp6(1),e.hij(" ",t.code," ")}}function Rt(n,i){1&n&&e.GkF(0)}function jt(n,i){if(1&n&&(e.TgZ(0,"span",74),e._UZ(1,"span",75)(2,"img",76),e.qZA()),2&n){const t=i.$implicit,o=e.oxw().$implicit;e.xp6(2),e.Q6J("src","assets/images/flags/"+o.flag.toUpperCase()+".svg",e.LSH)("alt","Flag image for "+t)}}j.\u0275fac=function(i){return new(i||j)(e.Y36(f.F0),e.Y36(a.qu),e.Y36(f.gz),e.Y36(_.uw),e.Y36(U.b),e.Y36(W.t),e.Y36(x.K),e.Y36(oe.e),e.Y36(A.s),e.Y36(ee.v),e.Y36(fe.C))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-stepper-vente"]],decls:206,vars:34,consts:[[1,"flex","flex-col","flex-auto","min-w-0","bg-white"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"row","mb-4"],["src","assets/imgs/retour.svg",1,"r-button","w-20","cursor-pointer",3,"click"],[1,"row","mt-4"],[3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup","ngSubmit"],[1,"grid","py-0","p-[5%]"],["matStepLabel",""],[1,"grid","gap-6","mb-6","md:grid-cols-2","mt-8"],["appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","selectedClient","name","selectedClient","required","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","codeClient","name","codeClient","required","",3,"formControl","matAutocomplete"],["auto1","matAutocomplete"],["name","typeAchat","formControlName","typeAchat"],["value","Produit"],["value","Service"],[1,"flex"],["matInput","","disabled",""],["formControlName","tva",1,"lab",3,"change"],["name","typeAchat","formControlName","langue",1,"flex"],["formControlName","modeDePaiement"],[1,"flex","w-full"],["formControlName","adresse",3,"selectionChange"],["type","button","mat-icon-button","","matSuffix","",1,"mt-2","ml-2",3,"disabled","click"],[1,"icon-size-10","text-yellow-400",3,"svgIcon"],["formControlName","ribClient",3,"selectionChange"],[1,"grid","justify-items-end","mt-6"],["matStepperNext","",1,"button-black"],[1,"text-gray-500","font-bold","text-2xl","mt-4"],[1,"grid","grid-cols-4","gap-4","place-items-left","self-center"],[1,"col-span-4","md:col-span-2","sm:ml-15","mt-10","mb-15"],["alt","Current profile photo",1,"h-50","w-50","object-cover","rounded-full",3,"src"],[1,"col-span-4","md:col-span-1","items-baseline","my-auto","ml-0"],["for","demo-file",1,"label-button-yellow-plus","cursor-pointer"],[1,"flex","justify-center","items-center"],["svgIcon","mat_solid:cloud_upload",1,"text-white"],[1,"pl-3"],["type","file","id","demo-file","name","logo","accept","image/png, image/jpeg",1,"demo-file",2,"visibility","hidden",3,"change"],[1,"grid","grid-cols-2","gap-20"],[1,"col-span-2","lg:col-span-1"],[1,"text-gray-500","font-bold","text-2xl","mb-6"],["matInput","","formControlName","nomSociete"],["matInput","","formControlName","telSociete"],["formControlName","adresseSociete",3,"selectionChange"],["type","button","mat-icon-button","","matSuffix","",1,"mt-2","ml-2",3,"click"],["matInput","","formControlName","rcSociete"],["formControlName","ribSociete",3,"selectionChange"],["matInput","","formControlName","nomClient"],["matInput","","formControlName","emailClient"],["matInput","","formControlName","telClient"],["matInput","","formControlName","adresseClient"],["matInput","","formControlName","rcClient"],[1,"text-gray-500","font-bold","text-2xl","mt-12"],[1,"grid","grid-cols-5","gap-8","mt-6"],[1,"col-span-5","xl:col-span-1"],[1,"button-yellow-add","flex","justify-around","items-center","w-48",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white"],[1,"button-yellow-add","flex","justify-around","items-center","w-50",3,"click"],[1,"button-yellow-add","flex","justify-around","items-center","w-56",3,"click"],[4,"ngFor","ngForOf"],["matStepperNext","",1,"button-black",3,"click"],[1,"text-gray-500","font-bold","text-2xl","my-6"],[1,"grid","grid-cols-3","gap-20","lg:gap-48"],[1,"col-span-3","lg:col-span-1"],[3,"dateModelInvoice"],[3,"deviseInvoice"],[3,"model"],[1,"flex","justify-center"],[3,"ngSwitch"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","settingPartner","paginatedArray",4,"ngSwitchCase"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","listTVAtable","settingPartner","paginatedArray",4,"ngSwitchCase"],[1,"button-black",3,"click"],[1,"stepper-label"],[3,"value"],[1,"flex","items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ml-3"],["flagImage",""],[1,"relative","w-6","shadow","rounded-sm","overflow-hidden"],[1,"absolute","inset-0","ring-1","ring-inset","ring-black","ring-opacity-10"],[1,"w-full",3,"src","alt"],[4,"ngIf"],[3,"line","linesList","facturelist","index"],[3,"line","linesList","facturelist","startFrom","index"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","settingPartner","paginatedArray"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","listTVAtable","settingPartner","paginatedArray"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),e.NdJ("click",function(){return t.retourbtn()}),e.qZA()()(),e.TgZ(4,"div",4)(5,"mat-vertical-stepper",5,6)(7,"mat-step",7)(8,"form",8),e.NdJ("ngSubmit",function(){return t.clientSubmit()}),e.TgZ(9,"div",9),e.YNc(10,Tt,2,0,"ng-template",10),e.TgZ(11,"div",11)(12,"div")(13,"mat-form-field",12)(14,"mat-label"),e._uU(15,"Client"),e.qZA(),e._UZ(16,"input",13),e.TgZ(17,"mat-autocomplete",14,15),e.NdJ("optionSelected",function(r){return t.selectClient(r)}),e.YNc(19,bt,2,2,"mat-option",16),e.ALo(20,"async"),e.qZA()()(),e.TgZ(21,"div")(22,"mat-form-field",12)(23,"mat-label"),e._uU(24,"Code Client"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"mat-autocomplete",null,18),e.YNc(28,Ct,2,2,"mat-option",16),e.ALo(29,"async"),e.qZA()()(),e.TgZ(30,"div")(31,"mat-form-field",12)(32,"mat-label"),e._uU(33,"Type d'achat *"),e.qZA(),e.TgZ(34,"mat-select",19)(35,"mat-option",20),e._uU(36,"Produit"),e.qZA(),e.TgZ(37,"mat-option",21),e._uU(38,"Service"),e.qZA()()()(),e.TgZ(39,"div")(40,"mat-form-field",12)(41,"mat-label"),e._uU(42,"Assujetti \xe0 la tva"),e.qZA(),e.TgZ(43,"div",22),e._UZ(44,"input",23),e.TgZ(45,"mat-slide-toggle",24),e.NdJ("change",function(){return t.getTvaCheck()}),e.qZA()()()(),e.TgZ(46,"div")(47,"mat-form-field",12)(48,"mat-label"),e._uU(49,"S\xe9lectionner la langue de facture"),e.qZA(),e.TgZ(50,"mat-select",25),e.YNc(51,yt,7,6,"mat-option",16),e.qZA()()(),e.TgZ(52,"div")(53,"mat-form-field",12)(54,"mat-label"),e._uU(55,"Mode de paiement *"),e.qZA(),e.TgZ(56,"mat-select",26),e.YNc(57,Ut,2,2,"mat-option",16),e.qZA()()(),e.TgZ(58,"div",27)(59,"mat-form-field",12)(60,"mat-label"),e._uU(61,"Adresse client *"),e.qZA(),e.TgZ(62,"mat-select",28),e.NdJ("selectionChange",function(r){return t.selectAddressClient(r)}),e.YNc(63,It,2,2,"mat-option",16),e.qZA()(),e.TgZ(64,"button",29),e.NdJ("click",function(){return t.openAddAdresseClient()}),e._UZ(65,"mat-icon",30),e.qZA()(),e.TgZ(66,"div",27)(67,"mat-form-field",12)(68,"mat-label"),e._uU(69,"RIB client *"),e.qZA(),e.TgZ(70,"mat-select",31),e.NdJ("selectionChange",function(r){return t.selectRibClient(r)}),e.YNc(71,Nt,2,2,"mat-option",16),e.qZA()(),e.TgZ(72,"button",29),e.NdJ("click",function(){return t.openAddRibClient()}),e._UZ(73,"mat-icon",30),e.qZA()()(),e.TgZ(74,"div",32)(75,"button",33),e._uU(76," Suivant"),e.qZA()()()()(),e.TgZ(77,"mat-step",7)(78,"form",8),e.NdJ("ngSubmit",function(){return t.genererFacture()}),e.TgZ(79,"div",9),e.YNc(80,St,2,0,"ng-template",10),e.TgZ(81,"div",34)(82,"h1"),e._uU(83,"Logo"),e.qZA()(),e.TgZ(84,"div",35)(85,"div",36),e._UZ(86,"img",37),e.qZA(),e.TgZ(87,"div",38)(88,"label",39)(89,"div",40),e._UZ(90,"mat-icon",41),e.TgZ(91,"span",42),e._uU(92,"Choisir"),e.qZA()()(),e.TgZ(93,"input",43),e.NdJ("change",function(r){return t.onSelectFile(r)}),e.qZA()()(),e.TgZ(94,"div",44)(95,"div",45)(96,"div",46)(97,"h1"),e._uU(98,"Votre soci\xe9t\xe9"),e.qZA()(),e.TgZ(99,"div")(100,"mat-form-field",12)(101,"mat-label"),e._uU(102,"Nom"),e.qZA(),e._UZ(103,"input",47),e.qZA()(),e.TgZ(104,"div")(105,"mat-form-field",12)(106,"mat-label"),e._uU(107,"T\xe9l"),e.qZA(),e._UZ(108,"input",48),e.qZA()(),e.TgZ(109,"div",27)(110,"mat-form-field",12)(111,"mat-label"),e._uU(112,"Adresse *"),e.qZA(),e.TgZ(113,"mat-select",49),e.NdJ("selectionChange",function(r){return t.selectAddressPartner(r)}),e.YNc(114,Ft,2,2,"mat-option",16),e.qZA()(),e.TgZ(115,"button",50),e.NdJ("click",function(){return t.openAddAdressePartner()}),e._UZ(116,"mat-icon",30),e.qZA()(),e.TgZ(117,"div")(118,"mat-form-field",12)(119,"mat-label"),e._uU(120,"RC / MF"),e.qZA(),e._UZ(121,"input",51),e.qZA()(),e.TgZ(122,"div",27)(123,"mat-form-field",12)(124,"mat-label"),e._uU(125,"RIB *"),e.qZA(),e.TgZ(126,"mat-select",52),e.NdJ("selectionChange",function(r){return t.selectRibPartner(r)}),e.YNc(127,wt,2,2,"mat-option",16),e.qZA()(),e.TgZ(128,"button",50),e.NdJ("click",function(){return t.openAddRibPartner()}),e._UZ(129,"mat-icon",30),e.qZA()()(),e.TgZ(130,"div",45)(131,"div",46)(132,"h1"),e._uU(133,"Client"),e.qZA()(),e.TgZ(134,"div")(135,"mat-form-field",12)(136,"mat-label"),e._uU(137,"Nom"),e.qZA(),e._UZ(138,"input",53),e.qZA()(),e.TgZ(139,"div")(140,"mat-form-field",12)(141,"mat-label"),e._uU(142,"Email"),e.qZA(),e._UZ(143,"input",54),e.qZA()(),e.TgZ(144,"div")(145,"mat-form-field",12)(146,"mat-label"),e._uU(147,"T\xe9l"),e.qZA(),e._UZ(148,"input",55),e.qZA()(),e.TgZ(149,"div")(150,"mat-form-field",12)(151,"mat-label"),e._uU(152,"Adresse"),e.qZA(),e._UZ(153,"input",56),e.qZA()(),e.TgZ(154,"div")(155,"mat-form-field",12)(156,"mat-label"),e._uU(157,"RC / MF"),e.qZA(),e._UZ(158,"input",57),e.qZA()()()(),e.TgZ(159,"div",58)(160,"h1"),e._uU(161,"Votre devis"),e.qZA()(),e.TgZ(162,"div",59)(163,"div",60)(164,"button",61),e.NdJ("click",function(){return t.addLigne()}),e.TgZ(165,"span"),e._uU(166,"Ajouter une ligne"),e.qZA(),e._UZ(167,"mat-icon",62),e.qZA()(),e.TgZ(168,"div",60)(169,"button",63),e.NdJ("click",function(){return t.addSousTotal()}),e.TgZ(170,"span"),e._uU(171,"Ajouter un Sous Total"),e.qZA(),e._UZ(172,"mat-icon",62),e.qZA()(),e.TgZ(173,"div",60)(174,"button",64),e.NdJ("click",function(){return t.addCommentaire()}),e._uU(175," Ajouter un commentaire "),e._UZ(176,"mat-icon",62),e.qZA()()(),e.TgZ(177,"div"),e.YNc(178,Qt,4,3,"div",65),e.qZA(),e.TgZ(179,"div",32)(180,"button",66),e.NdJ("click",function(){return t.check()}),e._uU(181," Suivant"),e.qZA()()()()(),e.TgZ(182,"mat-step"),e.YNc(183,Yt,2,0,"ng-template",10),e.TgZ(184,"div",67)(185,"h1"),e._uU(186,"R\xe9glages"),e.qZA()(),e.TgZ(187,"div",68)(188,"div",69),e._UZ(189,"app-date",70),e.qZA(),e.TgZ(190,"div",69),e._UZ(191,"app-devise",71),e.qZA(),e.TgZ(192,"div",69)(193,"app-design",72),e.NdJ("model",function(r){return t.modeleChange(r)}),e.qZA()()(),e.TgZ(194,"div",32)(195,"button",33),e._uU(196," Suivant"),e.qZA()()(),e.TgZ(197,"mat-step"),e.YNc(198,Et,2,0,"ng-template",10),e.TgZ(199,"div",73)(200,"div",74),e.YNc(201,Pt,1,16,"app-modele1",75),e.YNc(202,Ot,1,17,"app-modele2",76),e.qZA()(),e.TgZ(203,"div",32)(204,"button",77),e.NdJ("click",function(){return t.saveInvoice()}),e._uU(205," Sauvegarder"),e.qZA()()()()()()),2&i){const o=e.MAs(18),r=e.MAs(27);e.xp6(5),e.Q6J("linear",!1),e.xp6(2),e.Q6J("stepControl",t.client),e.xp6(1),e.Q6J("formGroup",t.client),e.xp6(8),e.Q6J("formControl",t.myControl)("matAutocomplete",o),e.xp6(3),e.Q6J("ngForOf",e.lcZ(20,30,t.filteredClient$)),e.xp6(6),e.Q6J("formControl",t.myControl1)("matAutocomplete",r),e.xp6(3),e.Q6J("ngForOf",e.lcZ(29,32,t.filteredCode$)),e.xp6(23),e.Q6J("ngForOf",t.states),e.xp6(6),e.Q6J("ngForOf",t.modesPaiement),e.xp6(6),e.Q6J("ngForOf",t.addressClientList),e.xp6(1),e.Q6J("disabled",t.client.get("selectedClient").invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(6),e.Q6J("ngForOf",t.bankClientList),e.xp6(1),e.Q6J("disabled",t.client.get("selectedClient").invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Q6J("stepControl",t.data),e.xp6(1),e.Q6J("formGroup",t.data),e.xp6(8),e.Q6J("src",t.urlLogo?t.urlLogo:"./assets/imgs/user_avatar.svg",e.LSH),e.xp6(28),e.Q6J("ngForOf",t.addressPartnerList),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(11),e.Q6J("ngForOf",t.bankPartnerList),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(49),e.Q6J("ngForOf",t.facturelist),e.xp6(11),e.Q6J("dateModelInvoice",t.dateModelInvoice),e.xp6(2),e.Q6J("deviseInvoice",t.deviseInvoice),e.xp6(9),e.Q6J("ngSwitch",t.modeleInvoice.id),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2)}},dependencies:[c.sg,c.O5,c.tP,c.RF,c.n9,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,te.XC,v.ey,te.ZL,u.KE,u.hX,u.R9,g.Nt,Z.gD,ae.Rr,p.C0,p.VY,p.Vq,p.Ic,I.RK,T.Hw,N,S,F,k,J,D,Q,Y,c.Ov]});const Bt=function(n){return{$implicit:n}};function $t(n,i){if(1&n&&(e.TgZ(0,"mat-option",69)(1,"span",70),e.YNc(2,Rt,1,0,"ng-container",71),e.TgZ(3,"span",72),e._uU(4),e.qZA()(),e.YNc(5,jt,3,2,"ng-template",null,73,e.W1O),e.qZA()),2&n){const t=i.$implicit,o=e.MAs(6);e.Q6J("value",t.id),e.xp6(2),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(4,Bt,t.id)),e.xp6(2),e.Oqu(t.name)}}function Ht(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.name)}}function Gt(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.location)}}function Kt(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.accountNumber)}}function zt(n,i){1&n&&(e.TgZ(0,"div",68),e._uU(1,"G\xe9n\xe9rer Facture"),e.qZA())}function Xt(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.text)}}function Wt(n,i){if(1&n&&(e.TgZ(0,"mat-option",69),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.Oqu(t.accountNumber)}}function ei(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-outputline",78),e.qZA()),2&n){const t=e.oxw().index,o=e.oxw();e.xp6(1),e.Q6J("line",o.linestotallist[t])("linesList",o.linestotallist)("facturelist",o.facturelist)("exemptTVA",o.fournisseur.get("tva").value)("index",t)}}function ti(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-sub-total",79),e.qZA()),2&n){const t=e.oxw().index,o=e.oxw();e.xp6(1),e.Q6J("line",o.linestotallist[t])("linesList",o.linestotallist)("facturelist",o.facturelist)("startFrom",o.getStartFrom(t))("index",t)}}function ii(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-comment",80),e.qZA()),2&n){const t=e.oxw().index,o=e.oxw();e.xp6(1),e.Q6J("line",o.linestotallist[t])("linesList",o.linestotallist)("facturelist",o.facturelist)("index",t)}}function ni(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ei,2,5,"div",77),e.YNc(2,ti,2,5,"div",77),e.YNc(3,ii,2,4,"div",77),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1==t.type),e.xp6(1),e.Q6J("ngIf",2==t.type),e.xp6(1),e.Q6J("ngIf",3==t.type)}}function oi(n,i){1&n&&(e.TgZ(0,"div",68),e._uU(1,"R\xe9glages"),e.qZA())}function ai(n,i){1&n&&(e.TgZ(0,"div",68),e._uU(1,"Preview et imprimer"),e.qZA())}function ri(n,i){if(1&n&&e._UZ(0,"app-modele1",81),2&n){const t=e.oxw();e.Q6J("modeleInvoice",t.modeleInvoice)("dateModelInvoice",t.dateModelInvoice)("deviseInvoice",t.deviseInvoice)("partnerData",t.data.getRawValue())("clientData",t.fournisseur.getRawValue())("lines",t.linestotallist)("partner",t.partner)("addressClient",t.selectedAddressFournisseur)("ribClient",t.selectedRibFournisseur)("numFacture",t.facturenumber)("invoiceCategory",t.routeData.typePaper)("typeInvoice",t.typeInvoice)("addressPartner",t.selectedAddressPartner)("ribPartner",t.selectedRibPartner)("exemptTVA",t.fournisseur.get("tva").value)("settingPartner",t.settingPartner)("paginatedArray",t.paginatedArray)}}function li(n,i){if(1&n&&e._UZ(0,"app-modele2",82),2&n){const t=e.oxw();e.Q6J("modeleInvoice",t.modeleInvoice)("dateModelInvoice",t.dateModelInvoice)("deviseInvoice",t.deviseInvoice)("partnerData",t.data.getRawValue())("clientData",t.fournisseur.getRawValue())("lines",t.linestotallist)("partner",t.partner)("addressClient",t.selectedAddressFournisseur)("ribClient",t.selectedRibFournisseur)("numFacture",t.facturenumber)("invoiceCategory",t.routeData.typePaper)("typeInvoice",t.typeInvoice)("addressPartner",t.selectedAddressPartner)("ribPartner",t.selectedRibPartner)("listTVAtable",t.listTVAtable)("exemptTVA",t.fournisseur.get("tva").value)("settingPartner",t.settingPartner)("paginatedArray",t.paginatedArray)}}class B{constructor(i,t,o,r,l,m,h,b,C,le,se){this.router=i,this._formBuilder=t,this.route=o,this.dialog=r,this.partnerService=l,this.fundService=m,this.fournisseurService=h,this.buillingService=b,this.toast=C,this.commonService=le,this.moduleService=se,this.myControl=new a.NI(""),this.myControl1=new a.NI(""),this.fournisseurData=[],this.checkboxValue=!1,this.states=ue,this.modesPaiement=de,this.addressFournisseurList=[],this.bankFournisseurList=[],this.urlLogo="",this.urlLogoTier="",this.addressPartnerList=[],this.bankPartnerList=[],this.linestotallist=[],this.facturelist=[],this.dateModelInvoice=new _e,this.deviseInvoice=new ge,this.modeleInvoice={id:0,color:""},this.typeInvoice=R.ACHAT,this.listTVAtable=[],this.routeData=this.router.getCurrentNavigation().extras.state}ngOnInit(){this.initForm(),this.initAutocomplete(),this.getPartnerData(),this.getInvoiceNumber(),this.getSettingPartner(),console.log("hhhh",this.routeData.typePaper)}initForm(){this.fournisseur=this._formBuilder.group({logoTier:[""],selectedFournisseur:["",a.kI.required],codeFournisseur:["",a.kI.required],typeAchat:["",a.kI.required],tva:[!1,a.kI.required],langue:["",a.kI.required],modeDePaiement:["",a.kI.required],adresse:["",a.kI.required],ribFournisseur:["",a.kI.required]}),this.data=this._formBuilder.group({logo:["",a.kI.required],nomSociete:["",a.kI.required],telSociete:["",a.kI.required],adresseSociete:["",a.kI.required],rcSociete:["",a.kI.required],ribSociete:["",a.kI.required],nomClient:["",a.kI.required],emailClient:["",a.kI.required],telClient:["",a.kI.required],adresseClient:["",a.kI.required],rcClient:["",a.kI.required]}),this.fournisseur.get("adresse").disable(),this.fournisseur.get("ribFournisseur").disable(),this.fournisseur.get("codeFournisseur").disable()}initAutocomplete(){this.filteredFournisseur$=this.myControl.valueChanges.pipe((0,z.O)(""),(0,X.U)(i=>this._filteredFournisseur(i))),this.filteredCode$=this.myControl1.valueChanges.pipe((0,z.O)(""),(0,X.U)(i=>this._filteredCode(i)))}_filteredFournisseur(i){return this.nomFournisseur=i,this.fournisseurData.filter(t=>0===t.name.toLowerCase().indexOf(i.toLowerCase()))}_filteredCode(i){return this.fournisseurData.filter(t=>0===t.code.toLowerCase().indexOf(i.toLowerCase()))}getPartnerData(){this.partnerService.getPartner().subscribe(i=>{this.partner=i,this.getTierData(),this.getPartnerAdresses(),this.getPartnerBanks(),this.urlLogo=ie.N.partnersUrl+"/partners/loadFile/"+i.logo,this.data.get("logo").setValue(this.urlLogo),this.data.get("nomSociete").setValue(this.partner.company_name),this.data.get("telSociete").setValue(this.partner.phone_number),this.data.get("rcSociete").setValue(this.partner.trade_register+"/"+this.partner.patent)}),this.data.get("nomSociete").disable(),this.data.get("telSociete").disable(),this.data.get("rcSociete").disable(),this.data.get("nomClient").disable(),this.data.get("emailClient").disable(),this.data.get("telClient").disable(),this.data.get("adresseClient").disable(),this.data.get("rcClient").disable()}getTierData(){this.fournisseurService.getTiersByTypeNature(M.FOURNISSEUR).subscribe(i=>{this.fournisseurData=i})}getPartnerAdresses(){this.partnerService.getAllAddresse().subscribe(i=>{this.addressPartnerList=i,console.log("REsss :",this.addressPartnerList)})}getPartnerBanks(){this.fundService.getAllComptes().subscribe(i=>{this.bankPartnerList=i})}getTvaCheck(){this.checkboxValue=!this.checkboxValue,this.fournisseur.get("tva").setValue(this.checkboxValue)}getSettingPartner(){this.moduleService.getConfig().subscribe(i=>{this.settingPartner=i})}selectAddressFournisseur(i){this.addressFournisseurList.forEach(t=>{t.uuid===i.value&&(this.selectedAddressFournisseur=t)})}openAddAdresseFournisseur(){this.dialog.open(q,{restoreFocus:!1,data:{tier:"client",tierData:this.selectedFournisseur}}).afterClosed().subscribe(i=>{i&&this.addressFournisseurList.push(i)})}openAddRibFournisseur(){this.dialog.open(y,{restoreFocus:!1,data:{tier:"client",tierData:this.selectedFournisseur}}).afterClosed().subscribe(i=>{i&&this.bankFournisseurList.push(i)})}selectRibFournisseur(i){this.bankFournisseurList.forEach(t=>{t.uuid===i.value&&(this.selectedRibFournisseur=t)})}selectAddressPartner(i){this.addressPartnerList.forEach(t=>{t.uuid===i.value&&(this.selectedAddressPartner=t)})}selectRibPartner(i){this.bankPartnerList.forEach(t=>{t.uuid===i.value&&(this.selectedRibPartner=t)})}openAddRibPartner(){this.dialog.open(y,{restoreFocus:!1,data:{tier:"partner"}}).afterClosed().subscribe(i=>{i&&this.bankPartnerList.push(i)})}openAddAdressePartner(){this.dialog.open(q,{restoreFocus:!1,data:{tier:"partner"}}).afterClosed().subscribe(i=>{i&&this.addressPartnerList.push(i)})}selectFournisseur(i){this.fournisseurData.forEach(t=>{t.name==this.nomFournisseur&&(this.selectedFournisseur=t,this.urlLogoTier=ie.N.crmUrl+"/tiers/loadFile/"+t.logo,this.fournisseur.get("logoTier").setValue(this.urlLogoTier),this.fournisseur.get("selectedFournisseur").setValue(this.selectedFournisseur.name),this.fournisseur.get("codeFournisseur").setValue(this.selectedFournisseur.code),this.fournisseur.get("codeFournisseur").enable(),this.fournisseurService.getAllAdresses(t.uuid).subscribe(o=>{this.addressFournisseurList=[],o&&o.forEach(r=>{this.addressFournisseurList.push(r)}),this.fournisseur.get("adresse").enable()}),this.fournisseurService.getAllBankAccount(t.uuid).subscribe(o=>{this.bankFournisseurList=[],o&&(this.bankFournisseurList=o,this.fournisseur.get("ribFournisseur").enable())}))})}addLigne(){this.addInput("line",1)}addSousTotal(){this.addInput("subtotal",2)}addCommentaire(){this.addInput("commentaire",3)}addInput(i,t){const o=this.facturelist.length,r=new V;r.id=o,r.productname=i,r.prixtotal=0,this.linestotallist.push(r),this.facturelist.push({type:t,id:o,totalline:""})}getStartFrom(i){let t=0;for(t=i-1;t>-1&&"subtotal"!==this.linestotallist[t].productname;t--);return t+1}modeleChange(i){this.modeleInvoice=i}getInvoiceNumber(){switch(this.routeData.typePaper){case"Devis":this.buillingService.getDevisNumber(this.typeInvoice).subscribe(i=>{this.facturenumber=i.number});break;case"BonLivraison":case"BonCommande":this.buillingService.getBonLivraisonNumber(this.typeInvoice).subscribe(i=>{this.facturenumber=i.number});break;case"FactureFournisseur":this.buillingService.getFactureNumber(this.typeInvoice).subscribe(i=>{this.facturenumber=i.number})}}saveInvoice(){switch(this.routeData.typePaper){case"Devis":console.log("Payload :",this.getPayload()),this.buillingService.createDevis(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{});break;case"BonCommande":this.buillingService.createBonCommande(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{});break;case"BonLivraison":this.buillingService.createBonLivraison(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{});break;case"FactureFournisseur":this.buillingService.createInvoice(this.getPayload()).subscribe(i=>{this.toast.success({detail:`Succ\xe8s! ${this.routeData.typePaper} cree avec succes`,duration:5e3})},i=>{})}this.retourToFournisseurPage(this.index)}getPayload(){return{customer:this.selectedFournisseur.uuid,customerAdress:this.selectedAddressPartner.uuid,customerRib:this.selectedRibFournisseur.uuid,partner:this.partner.uuid,partnerAdress:this.selectedAddressPartner.uuid,partnerRIB:this.selectedRibPartner.uuid,color:this.modeleInvoice.color,deliveryDate:this.dateModelInvoice.dateLivraison.format("YYYY-MM-DD"),devise:this.deviseInvoice.devise,dueDate:this.dateModelInvoice.dateEchec.format("YYYY-MM-DD"),invoiceDate:this.dateModelInvoice.dateInvoice.format("YYYY-MM-DD"),invoiceNumber:this.facturenumber,invoicetype:this.typeInvoice,isdeleted:!1,langue:this.fournisseur.get("langue").value,left_to_pay:this.commonService.getSommeTVA(this.linestotallist),lineModels:this.linestotallist,type:this.routeData.type,model:this.modeleInvoice.id,purchaseType:this.fournisseur.get("typeAchat").value,total_htt:this.commonService.getSommeHorsTax(this.linestotallist),total_ttc:this.commonService.getSommeTVA(this.linestotallist),hasTva:this.checkboxValue,status:"FactureFournisseur"==this.routeData.typePaper?"NON_PAYE":"BonLivraison"==this.routeData.typePaper?"NON_LIVRE":"CREE",payMode:this.fournisseur.get("modeDePaiement").value}}check(){let i=this.commonService.splitLines(this.linestotallist);this.listTVAtable=i[0],this.paginatedArray=i[1]}genererFacture(){}fournisseurSubmit(){this.data.get("nomClient").setValue(this.fournisseur.get("selectedFournisseur").value),this.data.get("emailClient").setValue(this.selectedFournisseur.email),this.data.get("telClient").setValue(this.selectedFournisseur.phone),this.data.get("adresseClient").setValue(this.selectedAddressFournisseur.location),this.data.get("rcClient").setValue(this.selectedFournisseur.rc)}retourbtn(){this.router.navigate(["../"],{relativeTo:this.route}).then(i=>{console.log(i)},i=>{console.log(i)})}retourToFournisseurPage(i){switch(this.routeData.typePaper){case"Devis":this.buillingService.selectedIndex=0,this.router.navigate(["/admin/achat"],{relativeTo:this.route}).then(t=>{console.log(t)},t=>{console.log(t)});break;case"BonLivraison":this.buillingService.selectedIndex=2,this.router.navigate(["/admin/achat"],{relativeTo:this.route}).then(t=>{console.log(t)},t=>{console.log(t)});break;case"BonCommande":this.buillingService.selectedIndex=1,this.router.navigate(["/admin/achat"],{relativeTo:this.route}).then(t=>{console.log(t)},t=>{console.log(t)});break;case"FactureFournisseur":this.buillingService.selectedIndex=3,this.router.navigate(["/admin/achat"],{relativeTo:this.route}).then(t=>{console.log(t)},t=>{console.log(t)})}}}B.\u0275fac=function(i){return new(i||B)(e.Y36(f.F0),e.Y36(a.qu),e.Y36(f.gz),e.Y36(_.uw),e.Y36(U.b),e.Y36(W.t),e.Y36(x.K),e.Y36(oe.e),e.Y36(A.s),e.Y36(ee.v),e.Y36(fe.C))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-stepper-achat"]],decls:193,vars:33,consts:[[1,"flex","flex-col","flex-auto","min-w-0","bg-white"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"row","mb-4"],["src","assets/imgs/retour.svg",1,"r-button","w-20","cursor-pointer",3,"click"],[1,"row","mt-4"],[3,"linear"],["stepper",""],[3,"stepControl"],[3,"formGroup","ngSubmit"],[1,"grid","py-0","p-[5%]"],["matStepLabel",""],[1,"grid","gap-6","mb-6","md:grid-cols-2","mt-8"],["appearance","outline",1,"w-full"],["type","text","matInput","","formControlName","selectedFournisseur","name","selectedFournisseur","required","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","codeFournisseur","name","codeFournisseur","required","",3,"formControl","matAutocomplete"],["auto1","matAutocomplete"],["name","typeAchat","formControlName","typeAchat"],["value","Produit"],["value","Service"],[1,"flex"],["matInput","","disabled",""],["formControlName","tva",1,"lab",3,"change"],["name","typeAchat","formControlName","langue",1,"flex"],["formControlName","modeDePaiement"],[1,"flex","w-full"],["formControlName","adresse",3,"selectionChange"],["type","button","mat-icon-button","","matSuffix","",1,"mt-2","ml-2",3,"disabled","click"],[1,"icon-size-10","text-yellow-400",3,"svgIcon"],["formControlName","ribFournisseur",3,"selectionChange"],[1,"grid","justify-items-end","mt-6"],["matStepperNext","",1,"button-black"],[1,"grid","grid-cols-2","gap-20","mt-8"],[1,"col-span-2","lg:col-span-1"],[1,"text-gray-500","font-bold","text-2xl","mb-6"],["matInput","","formControlName","nomSociete"],["matInput","","formControlName","telSociete"],["formControlName","adresseSociete",3,"selectionChange"],["type","button","mat-icon-button","","matSuffix","",1,"mt-2","ml-2",3,"click"],["matInput","","formControlName","rcSociete"],["formControlName","ribSociete",3,"selectionChange"],["matInput","","formControlName","nomClient"],["matInput","","formControlName","emailClient"],["matInput","","formControlName","telClient"],["matInput","","formControlName","adresseClient"],["matInput","","formControlName","rcClient"],[1,"text-gray-500","font-bold","text-2xl","mt-12"],[1,"grid","grid-cols-5","gap-8","mt-6"],[1,"col-span-5","xl:col-span-1"],[1,"button-yellow-add","flex","justify-around","items-center","w-48",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white"],[1,"button-yellow-add","flex","justify-around","items-center","w-50",3,"click"],[1,"button-yellow-add","flex","justify-around","items-center","w-56",3,"click"],[4,"ngFor","ngForOf"],["matStepperNext","",1,"button-black",3,"click"],[1,"text-gray-500","font-bold","text-2xl","my-6"],[1,"grid","grid-cols-3","gap-20","lg:gap-48"],[1,"col-span-3","lg:col-span-1"],[3,"dateModelInvoice"],[3,"deviseInvoice"],[3,"model"],[1,"flex","justify-center"],[3,"ngSwitch"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","exemptTVA","settingPartner","paginatedArray",4,"ngSwitchCase"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","listTVAtable","exemptTVA","settingPartner","paginatedArray",4,"ngSwitchCase"],[1,"button-black",3,"click"],[1,"stepper-label"],[3,"value"],[1,"flex","items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ml-3"],["flagImage",""],[1,"relative","w-6","shadow","rounded-sm","overflow-hidden"],[1,"absolute","inset-0","ring-1","ring-inset","ring-black","ring-opacity-10"],[1,"w-full",3,"src","alt"],[4,"ngIf"],[3,"line","linesList","facturelist","exemptTVA","index"],[3,"line","linesList","facturelist","startFrom","index"],[3,"line","linesList","facturelist","index"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","exemptTVA","settingPartner","paginatedArray"],[3,"modeleInvoice","dateModelInvoice","deviseInvoice","partnerData","clientData","lines","partner","addressClient","ribClient","numFacture","invoiceCategory","typeInvoice","addressPartner","ribPartner","listTVAtable","exemptTVA","settingPartner","paginatedArray"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"img",3),e.NdJ("click",function(){return t.retourToFournisseurPage(t.index)}),e.qZA()()(),e.TgZ(4,"div",4)(5,"mat-vertical-stepper",5,6)(7,"mat-step",7)(8,"form",8),e.NdJ("ngSubmit",function(){return t.fournisseurSubmit()}),e.TgZ(9,"div",9),e.YNc(10,Mt,2,0,"ng-template",10),e.TgZ(11,"div",11)(12,"div")(13,"mat-form-field",12)(14,"mat-label"),e._uU(15,"Fournisseur"),e.qZA(),e._UZ(16,"input",13),e.TgZ(17,"mat-autocomplete",14,15),e.NdJ("optionSelected",function(r){return t.selectFournisseur(r)}),e.YNc(19,Lt,2,2,"mat-option",16),e.ALo(20,"async"),e.qZA()()(),e.TgZ(21,"div")(22,"mat-form-field",12)(23,"mat-label"),e._uU(24,"Code Client"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"mat-autocomplete",null,18),e.YNc(28,Vt,2,2,"mat-option",16),e.ALo(29,"async"),e.qZA()()(),e.TgZ(30,"div")(31,"mat-form-field",12)(32,"mat-label"),e._uU(33,"Type d'achat *"),e.qZA(),e.TgZ(34,"mat-select",19)(35,"mat-option",20),e._uU(36,"Produit"),e.qZA(),e.TgZ(37,"mat-option",21),e._uU(38,"Service"),e.qZA()()()(),e.TgZ(39,"div")(40,"mat-form-field",12)(41,"mat-label"),e._uU(42,"Assujetti \xe0 la tva"),e.qZA(),e.TgZ(43,"div",22),e._UZ(44,"input",23),e.TgZ(45,"mat-slide-toggle",24),e.NdJ("change",function(){return t.getTvaCheck()}),e.qZA()()()(),e.TgZ(46,"div")(47,"mat-form-field",12)(48,"mat-label"),e._uU(49,"S\xe9lectionner la langue de facture"),e.qZA(),e.TgZ(50,"mat-select",25),e.YNc(51,$t,7,6,"mat-option",16),e.qZA()()(),e.TgZ(52,"div")(53,"mat-form-field",12)(54,"mat-label"),e._uU(55,"Mode de paiement *"),e.qZA(),e.TgZ(56,"mat-select",26),e.YNc(57,Ht,2,2,"mat-option",16),e.qZA()()(),e.TgZ(58,"div",27)(59,"mat-form-field",12)(60,"mat-label"),e._uU(61,"Adresse client *"),e.qZA(),e.TgZ(62,"mat-select",28),e.NdJ("selectionChange",function(r){return t.selectAddressFournisseur(r)}),e.YNc(63,Gt,2,2,"mat-option",16),e.qZA()(),e.TgZ(64,"button",29),e.NdJ("click",function(){return t.openAddAdresseFournisseur()}),e._UZ(65,"mat-icon",30),e.qZA()(),e.TgZ(66,"div",27)(67,"mat-form-field",12)(68,"mat-label"),e._uU(69,"RIB client *"),e.qZA(),e.TgZ(70,"mat-select",31),e.NdJ("selectionChange",function(r){return t.selectRibFournisseur(r)}),e.YNc(71,Kt,2,2,"mat-option",16),e.qZA()(),e.TgZ(72,"button",29),e.NdJ("click",function(){return t.openAddRibFournisseur()}),e._UZ(73,"mat-icon",30),e.qZA()()(),e.TgZ(74,"div",32)(75,"button",33),e._uU(76," Suivant"),e.qZA()()()()(),e.TgZ(77,"mat-step",7)(78,"form",8),e.NdJ("ngSubmit",function(){return t.genererFacture()}),e.TgZ(79,"div",9),e.YNc(80,zt,2,0,"ng-template",10),e.TgZ(81,"div",34)(82,"div",35)(83,"div",36)(84,"h1"),e._uU(85,"Votre soci\xe9t\xe9"),e.qZA()(),e.TgZ(86,"div")(87,"mat-form-field",12)(88,"mat-label"),e._uU(89,"Nom"),e.qZA(),e._UZ(90,"input",37),e.qZA()(),e.TgZ(91,"div")(92,"mat-form-field",12)(93,"mat-label"),e._uU(94,"T\xe9l"),e.qZA(),e._UZ(95,"input",38),e.qZA()(),e.TgZ(96,"div",27)(97,"mat-form-field",12)(98,"mat-label"),e._uU(99,"Adresse *"),e.qZA(),e.TgZ(100,"mat-select",39),e.NdJ("selectionChange",function(r){return t.selectAddressPartner(r)}),e.YNc(101,Xt,2,2,"mat-option",16),e.qZA()(),e.TgZ(102,"button",40),e.NdJ("click",function(){return t.openAddAdressePartner()}),e._UZ(103,"mat-icon",30),e.qZA()(),e.TgZ(104,"div")(105,"mat-form-field",12)(106,"mat-label"),e._uU(107,"RC / MF"),e.qZA(),e._UZ(108,"input",41),e.qZA()(),e.TgZ(109,"div",27)(110,"mat-form-field",12)(111,"mat-label"),e._uU(112,"RIB *"),e.qZA(),e.TgZ(113,"mat-select",42),e.NdJ("selectionChange",function(r){return t.selectRibPartner(r)}),e.YNc(114,Wt,2,2,"mat-option",16),e.qZA()(),e.TgZ(115,"button",40),e.NdJ("click",function(){return t.openAddRibPartner()}),e._UZ(116,"mat-icon",30),e.qZA()()(),e.TgZ(117,"div",35)(118,"div",36)(119,"h1"),e._uU(120,"Fournisseur"),e.qZA()(),e.TgZ(121,"div")(122,"mat-form-field",12)(123,"mat-label"),e._uU(124,"Nom"),e.qZA(),e._UZ(125,"input",43),e.qZA()(),e.TgZ(126,"div")(127,"mat-form-field",12)(128,"mat-label"),e._uU(129,"Email"),e.qZA(),e._UZ(130,"input",44),e.qZA()(),e.TgZ(131,"div")(132,"mat-form-field",12)(133,"mat-label"),e._uU(134,"T\xe9l"),e.qZA(),e._UZ(135,"input",45),e.qZA()(),e.TgZ(136,"div")(137,"mat-form-field",12)(138,"mat-label"),e._uU(139,"Adresse"),e.qZA(),e._UZ(140,"input",46),e.qZA()(),e.TgZ(141,"div")(142,"mat-form-field",12)(143,"mat-label"),e._uU(144,"RC / MF"),e.qZA(),e._UZ(145,"input",47),e.qZA()()()(),e.TgZ(146,"div",48)(147,"h1"),e._uU(148,"Votre devis"),e.qZA()(),e.TgZ(149,"div",49)(150,"div",50)(151,"button",51),e.NdJ("click",function(){return t.addLigne()}),e.TgZ(152,"span"),e._uU(153,"Ajouter une ligne"),e.qZA(),e._UZ(154,"mat-icon",52),e.qZA()(),e.TgZ(155,"div",50)(156,"button",53),e.NdJ("click",function(){return t.addSousTotal()}),e.TgZ(157,"span"),e._uU(158,"Ajouter un Sous Total"),e.qZA(),e._UZ(159,"mat-icon",52),e.qZA()(),e.TgZ(160,"div",50)(161,"button",54),e.NdJ("click",function(){return t.addCommentaire()}),e._uU(162," Ajouter un commentaire "),e._UZ(163,"mat-icon",52),e.qZA()()(),e.TgZ(164,"div"),e.YNc(165,ni,4,3,"div",55),e.qZA(),e.TgZ(166,"div",32)(167,"button",56),e.NdJ("click",function(){return t.check()}),e._uU(168," Suivant"),e.qZA()()()()(),e.TgZ(169,"mat-step"),e.YNc(170,oi,2,0,"ng-template",10),e.TgZ(171,"div",57)(172,"h1"),e._uU(173,"R\xe9glages"),e.qZA()(),e.TgZ(174,"div",58)(175,"div",59),e._UZ(176,"app-date",60),e.qZA(),e.TgZ(177,"div",59),e._UZ(178,"app-devise",61),e.qZA(),e.TgZ(179,"div",59)(180,"app-design",62),e.NdJ("model",function(r){return t.modeleChange(r)}),e.qZA()()(),e.TgZ(181,"div",32)(182,"button",33),e._uU(183," Suivant"),e.qZA()()(),e.TgZ(184,"mat-step"),e.YNc(185,ai,2,0,"ng-template",10),e.TgZ(186,"div",63)(187,"div",64),e.YNc(188,ri,1,17,"app-modele1",65),e.YNc(189,li,1,18,"app-modele2",66),e.qZA()(),e.TgZ(190,"div",32)(191,"button",67),e.NdJ("click",function(){return t.saveInvoice()}),e._uU(192," Sauvegarder"),e.qZA()()()()()()),2&i){const o=e.MAs(18),r=e.MAs(27);e.xp6(5),e.Q6J("linear",!1),e.xp6(2),e.Q6J("stepControl",t.fournisseur),e.xp6(1),e.Q6J("formGroup",t.fournisseur),e.xp6(8),e.Q6J("formControl",t.myControl)("matAutocomplete",o),e.xp6(3),e.Q6J("ngForOf",e.lcZ(20,29,t.filteredFournisseur$)),e.xp6(6),e.Q6J("formControl",t.myControl1)("matAutocomplete",r),e.xp6(3),e.Q6J("ngForOf",e.lcZ(29,31,t.filteredCode$)),e.xp6(23),e.Q6J("ngForOf",t.states),e.xp6(6),e.Q6J("ngForOf",t.modesPaiement),e.xp6(6),e.Q6J("ngForOf",t.addressFournisseurList),e.xp6(1),e.Q6J("disabled",t.fournisseur.get("selectedFournisseur").invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(6),e.Q6J("ngForOf",t.bankFournisseurList),e.xp6(1),e.Q6J("disabled",t.fournisseur.get("selectedFournisseur").invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Q6J("stepControl",t.data),e.xp6(1),e.Q6J("formGroup",t.data),e.xp6(23),e.Q6J("ngForOf",t.addressPartnerList),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(11),e.Q6J("ngForOf",t.bankPartnerList),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(49),e.Q6J("ngForOf",t.facturelist),e.xp6(11),e.Q6J("dateModelInvoice",t.dateModelInvoice),e.xp6(2),e.Q6J("deviseInvoice",t.deviseInvoice),e.xp6(9),e.Q6J("ngSwitch",t.modeleInvoice.id),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2)}},dependencies:[c.sg,c.O5,c.tP,c.RF,c.n9,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,te.XC,v.ey,te.ZL,u.KE,u.hX,u.R9,g.Nt,Z.gD,ae.Rr,p.C0,p.VY,p.Vq,p.Ic,I.RK,T.Hw,N,S,F,k,J,D,Q,Y,c.Ov]});var si=s(7401),Ze=s(3848),Te=s(98739),d=s(30671);function ci(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",38)(2,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.search("CLIENT"))}),e.TgZ(3,"div",40)(4,"mat-form-field",41)(5,"mat-label"),e._uU(6,"Nom du Client"),e.qZA(),e.TgZ(7,"input",42),e.NdJ("keydown",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onKeyDownEvent(r))}),e.qZA()(),e.TgZ(8,"mat-form-field",41)(9,"mat-label"),e._uU(10,"Code"),e.qZA(),e.TgZ(11,"input",43),e.NdJ("keydown",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onKeyDownEvent(r))}),e.qZA()(),e.TgZ(12,"mat-form-field",44)(13,"mat-label"),e._uU(14,"Statut"),e.qZA(),e.TgZ(15,"mat-select",45)(16,"mat-option",46),e._uU(17,"Accepted"),e.qZA(),e.TgZ(18,"mat-option",47),e._uU(19,"Refused"),e.qZA()()(),e.TgZ(20,"div",48)(21,"button",49),e._uU(22," Rechercher "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.searchForm)}}function ui(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Nom du Client"),e.qZA())}function di(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function mi(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Code Client"),e.qZA())}function pi(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function _i(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"T\xe9l\xe9phone"),e.qZA())}function gi(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.phone," ")}}function fi(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Email"),e.qZA())}function hi(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.email," ")}}function vi(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Statut"),e.qZA())}const be=function(n,i){return{Acceptedtag:n,Refusedtag:i}};function Zi(n,i){if(1&n&&(e.TgZ(0,"td",52)(1,"span",53),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,be,"ACTIVE"==t.state,"INACTIVE"==t.state)),e.xp6(1),e.hij(" ",t.state,"")}}function Ti(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Action"),e.qZA())}function bi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",51)(1,"div",54)(2,"button",55),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.editFournisseur(l))}),e._UZ(3,"img",56),e.qZA(),e.TgZ(4,"button",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(m.dropFournisseur(l))}),e._UZ(5,"img",58),e.qZA()()()}}function Ci(n,i){1&n&&e._UZ(0,"tr",59)}function xi(n,i){1&n&&e._UZ(0,"tr",60)}function Ai(n,i){if(1&n&&(e.TgZ(0,"table",26),e.ynx(1,27),e.YNc(2,ui,2,0,"th",28),e.YNc(3,di,2,1,"td",29),e.BQk(),e.ynx(4,30),e.YNc(5,mi,2,0,"th",28),e.YNc(6,pi,2,1,"td",29),e.BQk(),e.ynx(7,31),e.YNc(8,_i,2,0,"th",28),e.YNc(9,gi,2,1,"td",29),e.BQk(),e.ynx(10,32),e.YNc(11,fi,2,0,"th",28),e.YNc(12,hi,2,1,"td",29),e.BQk(),e.ynx(13,33),e.YNc(14,vi,2,0,"th",28),e.YNc(15,Zi,3,5,"td",34),e.BQk(),e.ynx(16,35),e.YNc(17,Ti,2,0,"th",28),e.YNc(18,bi,6,0,"td",29),e.BQk(),e.YNc(19,Ci,1,0,"tr",36),e.YNc(20,xi,1,0,"tr",37),e.qZA()),2&n){const t=e.oxw();e.Q6J("dataSource",t.dataSourceClient),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumnsContact),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsContact)}}function qi(n,i){1&n&&(e.TgZ(0,"div",61)(1,"div",62),e._UZ(2,"img",63),e.qZA(),e._UZ(3,"hr"),e.qZA())}function yi(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",38)(2,"form",39),e.NdJ("ngSubmit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.search("FOURNISSEUR"))}),e.TgZ(3,"div",40)(4,"mat-form-field",41)(5,"mat-label"),e._uU(6,"Nom du Fournisseur"),e.qZA(),e.TgZ(7,"input",42),e.NdJ("keydown",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onKeyDownEvent("FOURNISSUER"))}),e.qZA()(),e.TgZ(8,"mat-form-field",41)(9,"mat-label"),e._uU(10,"Code"),e.qZA(),e.TgZ(11,"input",43),e.NdJ("keydown",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onKeyDownEvent("FOURNISSUER"))}),e.qZA()(),e.TgZ(12,"mat-form-field",44)(13,"mat-label"),e._uU(14,"Statut"),e.qZA(),e.TgZ(15,"mat-select",45)(16,"mat-option",46),e._uU(17,"Accepted"),e.qZA(),e.TgZ(18,"mat-option",47),e._uU(19,"Refused"),e.qZA()()(),e.TgZ(20,"div",48)(21,"button",49),e._uU(22," Rechercher "),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.searchForm)}}function Ui(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Nom du Fournisseur"),e.qZA())}function Ii(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Ni(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Code Fournisseur"),e.qZA())}function Si(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.code," ")}}function Fi(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"T\xe9l\xe9phone"),e.qZA())}function wi(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.phone," ")}}function ki(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Email"),e.qZA())}function Ji(n,i){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.email," ")}}function Di(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Statut"),e.qZA())}function Qi(n,i){if(1&n&&(e.TgZ(0,"td",52)(1,"span",53),e._uU(2),e.qZA()()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,be,"ACTIVE"==t.state,"INACTIVE"==t.state)),e.xp6(1),e.hij(" ",t.state,"")}}function Yi(n,i){1&n&&(e.TgZ(0,"th",50),e._uU(1,"Action"),e.qZA())}function Ei(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"td",51)(1,"div",54)(2,"button",55),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.editFournisseur(l))}),e._UZ(3,"img",56),e.qZA(),e.TgZ(4,"button",57),e.NdJ("click",function(){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.dropFournisseur(l))}),e._UZ(5,"img",58),e.qZA()()()}}function Pi(n,i){1&n&&e._UZ(0,"tr",59)}function Oi(n,i){1&n&&e._UZ(0,"tr",60)}function Mi(n,i){1&n&&(e.TgZ(0,"div",61)(1,"div",62),e._UZ(2,"img",63),e.qZA(),e._UZ(3,"hr"),e.qZA())}const Ce=function(){return[5,10,20]};class ${constructor(i,t,o,r,l){this.fournisseurService=i,this.partnerService=t,this.router=o,this.route=r,this._fuseConfirmationService=l,this.displayedColumnsContact=["name","Code_tiers","tel","Email","Statut","Action"],this.isEmptyDatasourceClient=!1,this.isEmptyDatasourceFrs=!1,this.isEmptydatatoSearch=!1,this.configValid={title:"Supprimer   Donn\xe9es Tiers",message:'voulez-vous supprimer  Tiers ?<br> <span class="font-medium">Cette action peut \xeatre annul\xe9e !</span>',icon:{show:!0,name:"heroicons_outline:lightning-bolt",color:"warning"},actions:{confirm:{show:!0,label:"supprimer",color:"warn"},cancel:{show:!0,label:"Annuler"}},dismissible:!0},this.searchForm=new a.cw({nom:new a.NI(""),code:new a.NI(""),state:new a.NI(""),tenant_id:new a.NI(""),nature:new a.NI("")})}ngOnInit(){this.getAllFournisseur(),this.getAllClient()}getAllFournisseur(){localStorage.getItem("useruuid"),this.fournisseurService.getAllFrs().subscribe({next:t=>{this.dataSourceFrs=t,0==t.length&&(this.isEmptyDatasourceFrs=!0,this.isEmptydatatoSearch=!0)},error:t=>{}})}getAllClient(){localStorage.getItem("useruuid"),this.fournisseurService.getAllClient().subscribe({next:t=>{this.dataSourceClient=t,0==t.length&&(this.isEmptyDatasourceClient=!0)},error:t=>{}})}editFournisseur(i){}dropFournisseur(i){this._fuseConfirmationService.open(this.configValid).afterClosed().subscribe({next:o=>{"confirmed"==o&&this.fournisseurService.deletetiers(i.uuid).subscribe({next:()=>{this.getAllFournisseur(),this.getAllClient()},error:r=>{console.log(r)}})}})}search(i){this.searchForm.controls.tenant_id.setValue(this.tenant_id),this.searchForm.controls.nature.setValue(i),this.fournisseurService.filterfrs(this.searchForm.getRawValue()).subscribe({next:t=>{"FOURNISSEUR"==i&&(this.dataSourceFrs=t,this.isEmptyDatasourceFrs=0==t.length),"CLIENT"==i&&(this.dataSourceClient=t,this.isEmptyDatasourceClient=0==t.length)},error:t=>{}})}onKeyDownEvent(i){setTimeout(()=>{this.search(i)},600)}addfrs(){this.router.navigate(["../addfrs"],{relativeTo:this.route}).then(i=>{},i=>{})}addClient(){this.router.navigate(["../addclient"],{relativeTo:this.route}).then(i=>{},i=>{})}}$.\u0275fac=function(i){return new(i||$)(e.Y36(x.K),e.Y36(U.b),e.Y36(f.F0),e.Y36(f.gz),e.Y36(si.R))},$.\u0275cmp=e.Xpm({type:$,selectors:[["app-contact"]],decls:66,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400"],[3,"selectedIndex"],["label","Client",1,"rtl:rtlsubmenu"],["type","button",1,"button-yellow-plus","px-5","py-2.5","text-center","inline-flex","items-center",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-2"],[1,"title-3","pt-8"],["class","search-div mt-7 py-5",4,"ngIf"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","","class","overflow-x-auto w-full ",3,"dataSource",4,"ngIf"],["class","flex  justify-center",4,"ngIf"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["contractPaginator",""],["label","Fournisseur",1,"rtl:rtlsubmenu"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Code_tiers"],["matColumnDef","tel"],["matColumnDef","Email"],["matColumnDef","Statut"],["mat-cell","","class","justify-items-center text-center",4,"matCellDef"],["matColumnDef","Action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"container","mx-5"],[3,"formGroup","ngSubmit"],[1,"grid","xs:grid-cols-4","md:grid-cols-3","lg:grid-cols-4","gap-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","nom","value","Nom",3,"keydown"],["matInput","","formControlName","code","value","Nom",3,"keydown"],["appearance","outline"],["formControlName","state"],["value","ACTIVE"],["value","INACTIVE"],[1,"w-full"],["type","submit",1,"button-yellow-plus","px-10","py-5","text-center","inline-flex","items-center"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"justify-items-center","text-center"],[3,"ngClass"],[1,"justify-items-center","text-center"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],["src","./assets/imgs/pencil.svg",1,"image-svg","max-w-none"],["mat-icon-button","",3,"click"],["src","./assets/imgs/trash.svg",1,"w-4"],["mat-header-row",""],["mat-row",""],[1,"flex","justify-center"],[1,"text-center","emptyTable"],["src","assets/imgs/emptydata.svg",1,"w-25"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",3)(5,"h2",4),e._uU(6," Facturation "),e.qZA()()(),e.TgZ(7,"div",5)(8,"div")(9,"a",6),e._uU(10,"Accueil "),e.qZA()(),e.TgZ(11,"div",7),e._UZ(12,"mat-icon",8),e.TgZ(13,"span",9),e._uU(14,"Facturation"),e.qZA()()()()(),e.TgZ(15,"div",10)(16,"div",11)(17,"mat-tab-group",12)(18,"mat-tab",13)(19,"button",14),e.NdJ("click",function(){return t.addClient()}),e._uU(20," Ajouter Client "),e._UZ(21,"mat-icon",15),e.qZA(),e.TgZ(22,"h2",16),e._uU(23," Liste des Client "),e.qZA(),e.YNc(24,ci,23,1,"div",17),e.TgZ(25,"div",18)(26,"div",19)(27,"div",20),e.YNc(28,Ai,21,3,"table",21),e.YNc(29,qi,4,0,"div",22),e._UZ(30,"mat-paginator",23,24),e.qZA()()()(),e.TgZ(32,"mat-tab",25)(33,"button",14),e.NdJ("click",function(){return t.addfrs()}),e._uU(34," Ajouter Fournisseur "),e._UZ(35,"mat-icon",15),e.qZA(),e.TgZ(36,"h2",16),e._uU(37," Liste des Fournisseurs "),e.qZA(),e.YNc(38,yi,23,1,"div",17),e.TgZ(39,"div",18)(40,"div",19)(41,"div",20)(42,"table",26),e.ynx(43,27),e.YNc(44,Ui,2,0,"th",28),e.YNc(45,Ii,2,1,"td",29),e.BQk(),e.ynx(46,30),e.YNc(47,Ni,2,0,"th",28),e.YNc(48,Si,2,1,"td",29),e.BQk(),e.ynx(49,31),e.YNc(50,Fi,2,0,"th",28),e.YNc(51,wi,2,1,"td",29),e.BQk(),e.ynx(52,32),e.YNc(53,ki,2,0,"th",28),e.YNc(54,Ji,2,1,"td",29),e.BQk(),e.ynx(55,33),e.YNc(56,Di,2,0,"th",28),e.YNc(57,Qi,3,5,"td",34),e.BQk(),e.ynx(58,35),e.YNc(59,Yi,2,0,"th",28),e.YNc(60,Ei,6,0,"td",29),e.BQk(),e.YNc(61,Pi,1,0,"tr",36),e.YNc(62,Oi,1,0,"tr",37),e.qZA(),e.YNc(63,Mi,4,0,"div",22),e._UZ(64,"mat-paginator",23,24),e.qZA()()()()()()()()),2&i&&(e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(5),e.Q6J("selectedIndex",t.fournisseurService.selectedIndex),e.xp6(7),e.Q6J("ngIf",!t.isEmptydatatoSearch),e.xp6(4),e.Q6J("ngIf",!t.isEmptyDatasourceClient),e.xp6(1),e.Q6J("ngIf",t.isEmptyDatasourceClient),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(12,Ce)),e.xp6(8),e.Q6J("ngIf",!t.isEmptydatatoSearch),e.xp6(4),e.Q6J("dataSource",t.dataSourceFrs),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumnsContact),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsContact),e.xp6(1),e.Q6J("ngIf",t.isEmptyDatasourceFrs),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(13,Ce)))},dependencies:[c.mk,c.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,v.ey,u.KE,u.hX,g.Nt,Z.gD,Ze.uX,Ze.SP,I.RK,T.Hw,Te.NW,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk]});var xe=s(24183),Ae=s(17009),qe=s(98214);function Li(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"Information"),e.qZA())}function Vi(n,i){1&n&&(e.TgZ(0,"div",72)(1,"fuse-alert",73)(2,"span",74),e._uU(3,"Notification"),e.qZA(),e._uU(4," vous voulez choisir une image Notification "),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("type","warn")("appearance","border"))}function Ri(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"Type tiers"),e.qZA())}function ji(n,i){if(1&n&&(e.TgZ(0,"mat-option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t,"")}}function Bi(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"idbancaire"),e.qZA())}function $i(n,i){if(1&n&&(e.TgZ(0,"mat-option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function Hi(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"prospect Client"),e.qZA())}class H{ngOnInit(){this.nationalities=this.nationalitiesService.nationalities,this.banks=this.bankService.banks,this.getPartnerTenantId(),this.initClientForm()}constructor(i,t,o,r,l,m,h,b,C){this.builder=i,this.router=t,this.nationalitiesService=o,this.partnerService=r,this.tiersservice=l,this.bankService=m,this.route=h,this._snackBar=b,this.toast=C,this.isValid=!1,this.url=""}initClientForm(){this.clientForm=new a.cw({information:this.builder.group({logo:this.builder.control("",a.kI.required),nom:this.builder.control("",[a.kI.required,a.kI.minLength(3)]),nomaltern:this.builder.control("",[a.kI.required,a.kI.minLength(3)]),fax:this.builder.control("",[a.kI.required,a.kI.min(1e7),a.kI.max(99999999)]),tel:this.builder.control("",[a.kI.required,a.kI.min(1e7),a.kI.max(99999999)]),email:this.builder.control("",[a.kI.required,a.kI.email]),web:this.builder.control("",[a.kI.required,a.kI.minLength(8)])}),type_tiers:this.builder.group({type:this.builder.control(""),salarie:this.builder.control(""),pays:this.builder.control(""),typeId:this.builder.control(""),capital:this.builder.control(""),etat:this.builder.control("")}),idbancaire:this.builder.group({accountNumber:this.builder.control(""),nomBank:this.builder.control("")}),prospectClient:this.builder.group({type_nature:this.builder.control("CLIENT"),code_tiers:this.builder.control(""),register_commerce:this.builder.control(""),mat_fiscale:this.builder.control(""),assujettiTva:this.builder.control(""),numTva:this.builder.control("")})})}getPartnerTenantId(){let i=localStorage.getItem("useruuid");this.partnerService.getPartnerByuuid(i).subscribe(t=>{this.tenant_id=t.tenant_id})}get information(){return this.clientForm.get("information")}get prospectClient(){return this.clientForm.get("prospectClient")}get type_tiers(){return this.clientForm.get("type_tiers")}get idbancaire(){return this.clientForm.get("idbancaire")}retourPageClient(i){this.tiersservice.selectedIndex=i,this.router.navigate(["../contact"],{relativeTo:this.route}).then(t=>{console.log(t)},t=>{console.log(t)})}onSelectImgClient(i){if(i.target.files&&i.target.files[0]){const t=new FileReader;if(t.readAsDataURL(i.target.files[0]),this.Personnelpicture=i.target.files[0],null!=this.Personnelpicture&&this.Personnelpicture.size>1048576)return void this.toast.error({detail:"l image de Client d\xe9passe la taille maximale de 1mb",duration:5e3});t.onload=o=>{this.url=o.target.result}}}AjouterClient(){let i={country_Code:this.clientForm.value.type_tiers.pays,country:this.clientForm.value.type_tiers.pays,name:this.clientForm.value.information.nom,alternative_Name:this.clientForm.value.information.nomaltern,nature:this.clientForm.value.prospectClient.type_nature,code:this.clientForm.value.prospectClient.code_tiers,state:this.clientForm.value.type_tiers.etat,phone:this.clientForm.value.information.tel,fax:this.clientForm.value.information.fax,email:this.clientForm.value.information.email,web:this.clientForm.value.information.web,rc:this.clientForm.value.prospectClient.register_commerce,capital:parseInt(this.clientForm.value.type_tiers.capital),tax_Registration:this.clientForm.value.prospectClient.mat_fiscale,vat_Liable:Boolean(this.clientForm.value.prospectClient.assujettiTva),vat_Number:this.clientForm.value.prospectClient.numTva,tiers_Type:this.clientForm.value.type_tiers.type,employee:"",type_LegEnt:"",logo:"",tenantId:this.tenant_id};this.tiersservice.add(i).subscribe({next:t=>{this.uploadpictureToClient(t.uuid),this.tiersservice.addBankAccount({tiers:{uuid:t.uuid},accountNumber:this.clientForm.value.idbancaire.accountNumber,bank:this.clientForm.value.idbancaire.nomBank}).subscribe(r=>{}),this._snackBar.open("Client Ajouter","Done!",{horizontalPosition:"end",verticalPosition:"top",duration:2e3}),this.retourPageClient(0)},error:t=>{console.log(t.error),this.toast.error({detail:t.error+" deja exist",duration:5e3})}})}uploadpictureToClient(i){const t=new FormData;t.append("avatar",this.Personnelpicture),this.tiersservice.addpicture(t,i).subscribe(o=>{})}verifimg(){this.isValid=!0}}function Gi(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"Information"),e.qZA())}function Ki(n,i){1&n&&(e.TgZ(0,"div",72)(1,"fuse-alert",73)(2,"span",74),e._uU(3,"Notification"),e.qZA(),e._uU(4," vous voulez choisir une image Notification "),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("type","warn")("appearance","border"))}function zi(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"Type tiers"),e.qZA())}function Xi(n,i){if(1&n&&(e.TgZ(0,"mat-option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t,"")}}function Wi(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"idbancaire"),e.qZA())}function en(n,i){if(1&n&&(e.TgZ(0,"mat-option",75),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function tn(n,i){1&n&&(e.TgZ(0,"div",71),e._uU(1,"prospect Client"),e.qZA())}H.\u0275fac=function(i){return new(i||H)(e.Y36(a.qu),e.Y36(f.F0),e.Y36(xe.d),e.Y36(U.b),e.Y36(x.K),e.Y36(ne.y),e.Y36(f.gz),e.Y36(Ae.ux),e.Y36(A.s))},H.\u0275cmp=e.Xpm({type:H,selectors:[["app-addclient"]],decls:167,vars:24,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"art","dark:text-amber-50"],[1,"text-2xl"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-10","bg-card","dark:bg-transparent"],["mat-stroked-button","",3,"click"],["svgIcon","mat_outline:arrow_back"],[1,"flex-auto","sm:p-6"],[1,"h-400","min-h-400","max-h-400"],[3,"formGroup","ngSubmit"],[3,"linear"],["stepper",""],[3,"stepControl"],["formGroupName","information"],["matStepLabel",""],[1,"grid","md:grid-cols-3","gap-4","place-items-left","self-center"],[1,"md:col-span-1","sm:ml-15","rounded-full","place-items-left","self-center"],["alt","Current profile photo",1,"h-50","w-50","object-cover","imgfsr","rounded-full",3,"src"],[1,"md:col-span-2","items-baseline","my-auto","ml-0"],["for","demo-file",1,"label-button-yellow-plus",2,"cursor","pointer"],["type","file","id","demo-file","name","logo","accept","image/png, image/jpeg","formControlName","logo",1,"demo-file",2,"visibility","hidden",3,"change"],["class","col-span-4 mx-10",4,"ngIf"],[1,"grid","gap-2","md:grid-cols-2","mt-10","md:mx-10"],["appearance","outline",1,"w-full"],["matInput","","name","firstname","formControlName","nom","required",""],["matInput","","name","NomAlter","formControlName","nomaltern",3,"placeholder"],["matInput","","type","number","name","fax","formControlName","fax","oninput"," if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength) ","maxlength","8",3,"placeholder"],["matInput","","type","number","name","tel","formControlName","tel","oninput"," if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength) ","maxlength","8",3,"placeholder"],["type","email","matInput","","name","email","formControlName","email",3,"placeholder"],["matInput","","name","Etat","formControlName","web",3,"placeholder"],[1,"grid","justify-items-end"],["type","button","matStepperNext","",1,"button-black",3,"click"],["formGroupName","type_tiers"],[1,"grid","gap-2","grid-cols-2","mt-10","md:mx-10"],["matInput","","name","firstname","formControlName","type","required",""],["matInput","","name","Salari\xe9","formControlName","salarie",3,"placeholder"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","w-full"],["name","pays","formControlName","pays"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","pays","formControlName","typeId",3,"placeholder"],["type","number","matInput","","name","capital","formControlName","capital",3,"placeholder"],["required","","formControlName","etat"],["value","ACTIVE"],["value","INACTIVE"],["type","button","matStepperNext","",1,"button-black"],["formGroupName","idbancaire"],["matInput","","name","accountNumber","formControlName","accountNumber","required",""],["name","nomBank","formControlName","nomBank",3,"placeholder"],["formGroupName","prospectClient"],["readonly","","disabled","","matInput","","name","accountNumber","formControlName","type_nature","required",""],["matInput","","name","code_tiers","formControlName","code_tiers",3,"placeholder"],["matInput","","name","register de commerce","formControlName","register_commerce",3,"placeholder"],["matInput","","name","mat_fiscale","formControlName","mat_fiscale",3,"placeholder"],["matInput","","name","numTva","formControlName","numTva",3,"placeholder"],[1,"self-center","mb-1"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","name","assujettiTva","formControlName","assujettiTva",1,"sr-only","peer"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"],[1,"ml-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"grid","grid-cols-2","gap-4"],[1,"justify-self-end"],["type","reset",1,"button-black"],[1,"justify-self-start"],["type","submit",1,"button-yellow"],[1,"stepper-label","mb-2"],[1,"col-span-4","mx-10"],[3,"type","appearance"],["fuseAlertTitle",""],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4)(5,"div",5),e._uU(6,"Ajouter Client"),e.qZA()()(),e.TgZ(7,"div",6)(8,"div")(9,"a",7),e._uU(10,"Page d'Accueil "),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"mat-icon",9),e.TgZ(13,"span",10),e._uU(14,"Ajouter nouveau Client"),e.qZA()()()()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return t.retourPageClient(0)}),e._UZ(17,"mat-icon",13),e._uU(18," Retour "),e.qZA()(),e.TgZ(19,"div",14)(20,"div",15)(21,"form",16),e.NdJ("ngSubmit",function(){return t.AjouterClient()}),e.TgZ(22,"mat-vertical-stepper",17,18)(24,"mat-step",19)(25,"form",20),e.YNc(26,Li,2,0,"ng-template",21),e.TgZ(27,"div",22)(28,"div",23),e._UZ(29,"img",24),e.qZA(),e.TgZ(30,"div",25)(31,"label",26),e._uU(32,"Choisir une image"),e.qZA(),e.TgZ(33,"input",27),e.NdJ("change",function(r){return t.onSelectImgClient(r)}),e.qZA()(),e.YNc(34,Vi,5,2,"div",28),e.qZA(),e.TgZ(35,"div",29)(36,"mat-form-field",30)(37,"mat-label"),e._uU(38,"Nom de Tier"),e.qZA(),e._UZ(39,"input",31),e.qZA(),e.TgZ(40,"div")(41,"mat-form-field",30)(42,"mat-label"),e._uU(43,"Nom alternatif"),e.qZA(),e._UZ(44,"input",32),e.qZA()(),e.TgZ(45,"div")(46,"mat-form-field",30)(47,"mat-label"),e._uU(48,"Fax"),e.qZA(),e._UZ(49,"input",33),e.qZA()(),e.TgZ(50,"div")(51,"mat-form-field",30)(52,"mat-label"),e._uU(53,"Telephone"),e.qZA(),e._UZ(54,"input",34),e.qZA()(),e.TgZ(55,"div")(56,"mat-form-field",30)(57,"mat-label"),e._uU(58,"Email"),e.qZA(),e._UZ(59,"input",35),e.qZA()(),e.TgZ(60,"div")(61,"mat-form-field",30)(62,"mat-label"),e._uU(63,"web"),e.qZA(),e._UZ(64,"input",36),e.qZA()()(),e.TgZ(65,"div",37)(66,"button",38),e.NdJ("click",function(){return t.verifimg()}),e._uU(67," Suivant "),e.qZA()()()(),e.TgZ(68,"mat-step",19)(69,"form",39),e.YNc(70,Ri,2,0,"ng-template",21),e.TgZ(71,"div",40)(72,"mat-form-field",30)(73,"mat-label"),e._uU(74,"Type de Tiers"),e.qZA(),e._UZ(75,"input",41),e.qZA(),e.TgZ(76,"div")(77,"mat-form-field",30)(78,"mat-label"),e._uU(79,"Salari\xe9"),e.qZA(),e._UZ(80,"input",42),e.qZA()(),e.TgZ(81,"div")(82,"mat-form-field",43)(83,"mat-label"),e._uU(84,"pays"),e.qZA(),e.TgZ(85,"mat-select",44),e.YNc(86,ji,2,2,"mat-option",45),e.qZA()()(),e.TgZ(87,"div")(88,"mat-form-field",30)(89,"mat-label"),e._uU(90,"Type d'entite l\xe9gale"),e.qZA(),e._UZ(91,"input",46),e.qZA()(),e.TgZ(92,"div")(93,"mat-form-field",30)(94,"mat-label"),e._uU(95,"capital"),e.qZA(),e._UZ(96,"input",47),e.qZA()(),e.TgZ(97,"div")(98,"mat-form-field",30)(99,"mat-label"),e._uU(100,"Etat"),e.qZA(),e.TgZ(101,"mat-select",48)(102,"mat-option",49),e._uU(103,"Active"),e.qZA(),e.TgZ(104,"mat-option",50),e._uU(105,"Inactive"),e.qZA()()()()(),e.TgZ(106,"div",37)(107,"button",51),e._uU(108," Suivant "),e.qZA()()()(),e.TgZ(109,"mat-step",19)(110,"form",52),e.YNc(111,Bi,2,0,"ng-template",21),e.TgZ(112,"div",40)(113,"mat-form-field",30)(114,"mat-label"),e._uU(115,"Account Number"),e.qZA(),e._UZ(116,"input",53),e.qZA(),e.TgZ(117,"div")(118,"mat-form-field",30)(119,"mat-label"),e._uU(120,"Nom de bank *"),e.qZA(),e.TgZ(121,"mat-select",54),e.YNc(122,$i,2,2,"mat-option",45),e.qZA()()()(),e.TgZ(123,"div",37)(124,"button",51),e._uU(125," Suivant "),e.qZA()()()(),e.TgZ(126,"mat-step",19)(127,"form",55),e.YNc(128,Hi,2,0,"ng-template",21),e.TgZ(129,"div",40)(130,"mat-form-field",30)(131,"mat-label"),e._uU(132,"type/nature"),e.qZA(),e._UZ(133,"input",56),e.qZA(),e.TgZ(134,"div")(135,"mat-form-field",30)(136,"mat-label"),e._uU(137,"code tiers"),e.qZA(),e._UZ(138,"input",57),e.qZA()(),e.TgZ(139,"div")(140,"mat-form-field",30)(141,"mat-label"),e._uU(142,"register de commerce"),e.qZA(),e._UZ(143,"input",58),e.qZA()(),e.TgZ(144,"div")(145,"mat-form-field",30)(146,"mat-label"),e._uU(147,"matricule fiscale"),e.qZA(),e._UZ(148,"input",59),e.qZA()(),e.TgZ(149,"div")(150,"mat-form-field",30)(151,"mat-label"),e._uU(152,"Num de tva"),e.qZA(),e._UZ(153,"input",60),e.qZA()(),e.TgZ(154,"div",61)(155,"label",62),e._UZ(156,"input",63)(157,"div",64),e.TgZ(158,"span",65),e._uU(159,"Assujetti \xe0 la Tva "),e.qZA()()()()()()(),e.TgZ(160,"div",66)(161,"div",67)(162,"button",68),e._uU(163,"Annuler"),e.qZA()(),e.TgZ(164,"div",69)(165,"button",70),e._uU(166,"Sauvegarder"),e.qZA()()()()()()()),2&i&&(e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(9),e.Q6J("formGroup",t.clientForm),e.xp6(1),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",t.information),e.xp6(5),e.Q6J("src",t.url?t.url:"./assets/imgs/user_avatar.svg",e.LSH),e.xp6(5),e.Q6J("ngIf",t.information.controls.logo.invalid&&t.isValid),e.xp6(10),e.Q6J("placeholder","Nom alternatif *"),e.xp6(5),e.Q6J("placeholder","fax *"),e.xp6(5),e.Q6J("placeholder","Telephone *"),e.xp6(5),e.Q6J("placeholder","email *"),e.xp6(5),e.Q6J("placeholder","web *"),e.xp6(4),e.Q6J("stepControl",t.type_tiers),e.xp6(12),e.Q6J("placeholder","Salari\xe9 *"),e.xp6(6),e.Q6J("ngForOf",t.nationalities),e.xp6(5),e.Q6J("placeholder","Type d'entite l\xe9gale *"),e.xp6(5),e.Q6J("placeholder","capital *"),e.xp6(13),e.Q6J("stepControl",t.idbancaire),e.xp6(12),e.Q6J("placeholder","Nom de bank *"),e.xp6(1),e.Q6J("ngForOf",t.banks),e.xp6(4),e.Q6J("stepControl",t.prospectClient),e.xp6(12),e.Q6J("placeholder","code tiers  *"),e.xp6(5),e.Q6J("placeholder","register de commerce  *"),e.xp6(5),e.Q6J("placeholder","matricule fiscale  *"),e.xp6(5),e.Q6J("placeholder","num Tva  *"))},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.wV,a.Wl,a.JJ,a.JL,a.Q7,a.nD,a.F,a.sg,a.u,a.x0,v.ey,u.KE,u.hX,g.Nt,Z.gD,p.C0,p.VY,p.Vq,p.Ic,I.lW,T.Hw,qe.W]});class G{ngOnInit(){this.nationalities=this.nationalitiesService.nationalities,this.banks=this.bankService.banks,this.getPartnerTenantId(),this.initFournisseurForm()}constructor(i,t,o,r,l,m,h,b,C){this.builder=i,this.router=t,this.nationalitiesService=o,this.partnerService=r,this.tiersservice=l,this.bankService=m,this.route=h,this._snackBar=b,this.toast=C,this.isValid=!1,this.url=""}initFournisseurForm(){this.fournisseurForm=new a.cw({information:this.builder.group({logo:this.builder.control("",a.kI.required),nom:this.builder.control("",[a.kI.required,a.kI.minLength(3)]),nomaltern:this.builder.control("",[a.kI.required,a.kI.minLength(3)]),fax:this.builder.control("",[a.kI.required,a.kI.min(1e7),a.kI.max(99999999)]),tel:this.builder.control("",[a.kI.required,a.kI.min(1e7),a.kI.max(99999999)]),email:this.builder.control("",[a.kI.required,a.kI.email]),web:this.builder.control("",[a.kI.required,a.kI.minLength(8)])}),type_tiers:this.builder.group({type:this.builder.control(""),salarie:this.builder.control(""),pays:this.builder.control(""),typeId:this.builder.control(""),capital:this.builder.control(""),etat:this.builder.control("")}),idbancaire:this.builder.group({accountNumber:this.builder.control(""),nomBank:this.builder.control("")}),prospectClient:this.builder.group({type_nature:this.builder.control("FOURNISSEUR"),code_tiers:this.builder.control(""),register_commerce:this.builder.control(""),mat_fiscale:this.builder.control(""),assujettiTva:this.builder.control(""),numTva:this.builder.control("")})})}getPartnerTenantId(){let i=localStorage.getItem("useruuid");this.partnerService.getPartnerByuuid(i).subscribe(t=>{this.tenant_id=t.tenant_id,console.log("tid",this.tenant_id)})}get information(){return this.fournisseurForm.get("information")}get prospectClient(){return this.fournisseurForm.get("prospectClient")}get type_tiers(){return this.fournisseurForm.get("type_tiers")}get idbancaire(){return this.fournisseurForm.get("idbancaire")}retourToFournisseurPage(i){this.tiersservice.selectedIndex=i,this.router.navigate(["../contact"],{relativeTo:this.route}).then(t=>{console.log(t)},t=>{console.log(t)})}onSelectImgFournisseur(i){if(i.target.files&&i.target.files[0]){const t=new FileReader;if(t.readAsDataURL(i.target.files[0]),this.Personnelpicture=i.target.files[0],null!=this.Personnelpicture&&this.Personnelpicture.size>1048576)return void this.toast.error({detail:"l image de Fournisseur d\xe9passe la taille maximale de 1mb",duration:5e3});t.onload=o=>{this.url=o.target.result}}}AjouterfournisseurForm(){let i={country_Code:this.fournisseurForm.value.type_tiers.pays,country:this.fournisseurForm.value.type_tiers.pays,name:this.fournisseurForm.value.information.nom,alternative_Name:this.fournisseurForm.value.information.nomaltern,nature:this.fournisseurForm.value.prospectClient.type_nature,code:this.fournisseurForm.value.prospectClient.code_tiers,state:this.fournisseurForm.value.type_tiers.etat,phone:this.fournisseurForm.value.information.tel,fax:this.fournisseurForm.value.information.fax,email:this.fournisseurForm.value.information.email,web:this.fournisseurForm.value.information.web,rc:this.fournisseurForm.value.prospectClient.register_commerce,capital:parseInt(this.fournisseurForm.value.type_tiers.capital),tax_Registration:this.fournisseurForm.value.prospectClient.mat_fiscale,vat_Liable:Boolean(this.fournisseurForm.value.prospectClient.assujettiTva),vat_Number:this.fournisseurForm.value.prospectClient.numTva,tiers_Type:this.fournisseurForm.value.type_tiers.type,employee:"",type_LegEnt:"",logo:"",tenantId:this.tenant_id};this.tiersservice.add(i).subscribe({next:t=>{this.tiersservice.addBankAccount({tiers:{uuid:t.uuid},accountNumber:this.fournisseurForm.value.idbancaire.accountNumber,bank:this.fournisseurForm.value.idbancaire.nomBank}).subscribe(r=>{console.log("resp",r)}),this.uploadpictureToClient(t.uuid),this._snackBar.open("Fournisseur Ajouter","Done!",{horizontalPosition:"end",verticalPosition:"top",duration:2e3}),this.retourToFournisseurPage(1)},error:t=>{console.log(t.error),this.toast.error({detail:t.error+" deja exist",duration:5e3})}})}uploadpictureToClient(i){const t=new FormData;t.append("avatar",this.Personnelpicture),this.tiersservice.addpicture(t,i).subscribe(o=>{})}verifimg(){this.isValid=!0}}G.\u0275fac=function(i){return new(i||G)(e.Y36(a.qu),e.Y36(f.F0),e.Y36(xe.d),e.Y36(U.b),e.Y36(x.K),e.Y36(ne.y),e.Y36(f.gz),e.Y36(Ae.ux),e.Y36(A.s))},G.\u0275cmp=e.Xpm({type:G,selectors:[["app-addFournisseur"]],decls:167,vars:24,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"art","dark:text-amber-50"],[1,"text-2xl"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-10","bg-card","dark:bg-transparent"],["mat-stroked-button","",3,"click"],["svgIcon","mat_outline:arrow_back"],[1,"flex-auto","sm:p-6"],[1,"h-400","min-h-400","max-h-400"],[3,"formGroup","ngSubmit"],[3,"linear"],["stepper",""],[3,"stepControl"],["formGroupName","information"],["matStepLabel",""],[1,"grid","md:grid-cols-3","gap-4","place-items-left","self-center"],[1,"md:col-span-1","sm:ml-15","rounded-full","place-items-left","self-center"],["alt","Current profile photo",1,"h-50","w-50","object-cover","imgfsr","rounded-full",3,"src"],[1,"md:col-span-2","items-baseline","my-auto","ml-0"],["for","demo-file",1,"label-button-yellow-plus",2,"cursor","pointer"],["type","file","id","demo-file","name","logo","accept","image/png, image/jpeg","formControlName","logo",1,"demo-file",2,"visibility","hidden",3,"change"],["class","col-span-4 mx-10",4,"ngIf"],[1,"grid","gap-2","md:grid-cols-2","mt-10","md:mx-10"],["appearance","outline",1,"w-full"],["matInput","","name","firstname","formControlName","nom","required",""],["matInput","","name","NomAlter","formControlName","nomaltern",3,"placeholder"],["matInput","","type","number","name","fax","formControlName","fax","oninput"," if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength) ","maxlength","8",3,"placeholder"],["matInput","","type","number","name","tel","formControlName","tel","oninput"," if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength) ","maxlength","8",3,"placeholder"],["type","email","matInput","","name","capital","formControlName","email",3,"placeholder"],["matInput","","name","Etat","formControlName","web",3,"placeholder"],[1,"grid","justify-items-end"],["type","button","matStepperNext","",1,"button-black",3,"click"],["formGroupName","type_tiers"],[1,"grid","gap-2","grid-cols-2","mt-10","md:mx-10"],["matInput","","name","firstname","formControlName","type","required",""],["type","number","matInput","","name","Salari\xe9","formControlName","salarie",3,"placeholder"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","w-full"],["name","pays","formControlName","pays"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","pays","formControlName","typeId",3,"placeholder"],["type","number","matInput","","name","capital","formControlName","capital",3,"placeholder"],["required","","formControlName","etat"],["value","ACTIVE"],["value","INACTIVE"],["type","button","matStepperNext","",1,"button-black"],["formGroupName","idbancaire"],["matInput","","name","accountNumber","formControlName","accountNumber","required",""],["name","nomBank","formControlName","nomBank",3,"placeholder"],["formGroupName","prospectClient"],["readonly","","disabled","","matInput","","name","accountNumber","formControlName","type_nature","required",""],["matInput","","name","code_tiers","formControlName","code_tiers",3,"placeholder"],["matInput","","name","register de commerce","formControlName","register_commerce",3,"placeholder"],["matInput","","name","mat_fiscale","formControlName","mat_fiscale",3,"placeholder"],["matInput","","name","numTva","formControlName","numTva",3,"placeholder"],[1,"self-center","mb-1"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox","name","assujettiTva","formControlName","assujettiTva",1,"sr-only","peer"],[1,"w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","dark:peer-focus:ring-blue-800","rounded-full","peer","dark:bg-gray-700","peer-checked:after:translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","dark:border-gray-600","peer-checked:bg-blue-600"],[1,"ml-3","text-sm","font-medium","text-gray-900","dark:text-gray-300"],[1,"grid","grid-cols-2","gap-4"],[1,"justify-self-end"],["type","reset",1,"button-black"],[1,"justify-self-start"],["type","submit",1,"button-yellow"],[1,"stepper-label","mb-2"],[1,"col-span-4","mx-10"],[3,"type","appearance"],["fuseAlertTitle",""],[3,"value"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4)(5,"div",5),e._uU(6,"Ajouter Fournisseur"),e.qZA()()(),e.TgZ(7,"div",6)(8,"div")(9,"a",7),e._uU(10,"Page d'Accueil "),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"mat-icon",9),e.TgZ(13,"span",10),e._uU(14,"Ajouter nouveau Fourniseur"),e.qZA()()()()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return t.retourToFournisseurPage(1)}),e._UZ(17,"mat-icon",13),e._uU(18," Retour "),e.qZA()(),e.TgZ(19,"div",14)(20,"div",15)(21,"form",16),e.NdJ("ngSubmit",function(){return t.AjouterfournisseurForm()}),e.TgZ(22,"mat-vertical-stepper",17,18)(24,"mat-step",19)(25,"form",20),e.YNc(26,Gi,2,0,"ng-template",21),e.TgZ(27,"div",22)(28,"div",23),e._UZ(29,"img",24),e.qZA(),e.TgZ(30,"div",25)(31,"label",26),e._uU(32,"Choisir une image"),e.qZA(),e.TgZ(33,"input",27),e.NdJ("change",function(r){return t.onSelectImgFournisseur(r)}),e.qZA()(),e.YNc(34,Ki,5,2,"div",28),e.qZA(),e.TgZ(35,"div",29)(36,"mat-form-field",30)(37,"mat-label"),e._uU(38,"Nom de Tier"),e.qZA(),e._UZ(39,"input",31),e.qZA(),e.TgZ(40,"div")(41,"mat-form-field",30)(42,"mat-label"),e._uU(43,"Nom alternatif"),e.qZA(),e._UZ(44,"input",32),e.qZA()(),e.TgZ(45,"div")(46,"mat-form-field",30)(47,"mat-label"),e._uU(48,"Fax"),e.qZA(),e._UZ(49,"input",33),e.qZA()(),e.TgZ(50,"div")(51,"mat-form-field",30)(52,"mat-label"),e._uU(53,"Telephone"),e.qZA(),e._UZ(54,"input",34),e.qZA()(),e.TgZ(55,"div")(56,"mat-form-field",30)(57,"mat-label"),e._uU(58,"Email"),e.qZA(),e._UZ(59,"input",35),e.qZA()(),e.TgZ(60,"div")(61,"mat-form-field",30)(62,"mat-label"),e._uU(63,"web"),e.qZA(),e._UZ(64,"input",36),e.qZA()()(),e.TgZ(65,"div",37)(66,"button",38),e.NdJ("click",function(){return t.verifimg()}),e._uU(67," Suivant "),e.qZA()()()(),e.TgZ(68,"mat-step",19)(69,"form",39),e.YNc(70,zi,2,0,"ng-template",21),e.TgZ(71,"div",40)(72,"mat-form-field",30)(73,"mat-label"),e._uU(74,"Type de Tiers"),e.qZA(),e._UZ(75,"input",41),e.qZA(),e.TgZ(76,"div")(77,"mat-form-field",30)(78,"mat-label"),e._uU(79,"Salari\xe9"),e.qZA(),e._UZ(80,"input",42),e.qZA()(),e.TgZ(81,"div")(82,"mat-form-field",43)(83,"mat-label"),e._uU(84,"pays"),e.qZA(),e.TgZ(85,"mat-select",44),e.YNc(86,Xi,2,2,"mat-option",45),e.qZA()()(),e.TgZ(87,"div")(88,"mat-form-field",30)(89,"mat-label"),e._uU(90,"Type d'entite l\xe9gale"),e.qZA(),e._UZ(91,"input",46),e.qZA()(),e.TgZ(92,"div")(93,"mat-form-field",30)(94,"mat-label"),e._uU(95,"capital"),e.qZA(),e._UZ(96,"input",47),e.qZA()(),e.TgZ(97,"div")(98,"mat-form-field",30)(99,"mat-label"),e._uU(100,"Etat"),e.qZA(),e.TgZ(101,"mat-select",48)(102,"mat-option",49),e._uU(103,"Active"),e.qZA(),e.TgZ(104,"mat-option",50),e._uU(105,"Inactive"),e.qZA()()()()(),e.TgZ(106,"div",37)(107,"button",51),e._uU(108," Suivant "),e.qZA()()()(),e.TgZ(109,"mat-step",19)(110,"form",52),e.YNc(111,Wi,2,0,"ng-template",21),e.TgZ(112,"div",40)(113,"mat-form-field",30)(114,"mat-label"),e._uU(115,"Account Number"),e.qZA(),e._UZ(116,"input",53),e.qZA(),e.TgZ(117,"div")(118,"mat-form-field",30)(119,"mat-label"),e._uU(120,"Nom de bank *"),e.qZA(),e.TgZ(121,"mat-select",54),e.YNc(122,en,2,2,"mat-option",45),e.qZA()()()(),e.TgZ(123,"div",37)(124,"button",51),e._uU(125," Suivant "),e.qZA()()()(),e.TgZ(126,"mat-step",19)(127,"form",55),e.YNc(128,tn,2,0,"ng-template",21),e.TgZ(129,"div",40)(130,"mat-form-field",30)(131,"mat-label"),e._uU(132,"type/nature"),e.qZA(),e._UZ(133,"input",56),e.qZA(),e.TgZ(134,"div")(135,"mat-form-field",30)(136,"mat-label"),e._uU(137,"code tiers"),e.qZA(),e._UZ(138,"input",57),e.qZA()(),e.TgZ(139,"div")(140,"mat-form-field",30)(141,"mat-label"),e._uU(142,"register de commerce"),e.qZA(),e._UZ(143,"input",58),e.qZA()(),e.TgZ(144,"div")(145,"mat-form-field",30)(146,"mat-label"),e._uU(147,"matricule fiscale"),e.qZA(),e._UZ(148,"input",59),e.qZA()(),e.TgZ(149,"div")(150,"mat-form-field",30)(151,"mat-label"),e._uU(152,"Num de tva"),e.qZA(),e._UZ(153,"input",60),e.qZA()(),e.TgZ(154,"div",61)(155,"label",62),e._UZ(156,"input",63)(157,"div",64),e.TgZ(158,"span",65),e._uU(159,"Assujetti \xe0 la Tva "),e.qZA()()()()()()(),e.TgZ(160,"div",66)(161,"div",67)(162,"button",68),e._uU(163,"Annuler"),e.qZA()(),e.TgZ(164,"div",69)(165,"button",70),e._uU(166,"Sauvegarder"),e.qZA()()()()()()()),2&i&&(e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(9),e.Q6J("formGroup",t.fournisseurForm),e.xp6(1),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",t.information),e.xp6(5),e.Q6J("src",t.url?t.url:"./assets/imgs/user_avatar.svg",e.LSH),e.xp6(5),e.Q6J("ngIf",t.information.controls.logo.invalid&&t.isValid),e.xp6(10),e.Q6J("placeholder","Nom alternatif *"),e.xp6(5),e.Q6J("placeholder","fax *"),e.xp6(5),e.Q6J("placeholder","Telephone *"),e.xp6(5),e.Q6J("placeholder","email *"),e.xp6(5),e.Q6J("placeholder","web *"),e.xp6(4),e.Q6J("stepControl",t.type_tiers),e.xp6(12),e.Q6J("placeholder","Salari\xe9 *"),e.xp6(6),e.Q6J("ngForOf",t.nationalities),e.xp6(5),e.Q6J("placeholder","Type d'entite l\xe9gale *"),e.xp6(5),e.Q6J("placeholder","capital *"),e.xp6(13),e.Q6J("stepControl",t.idbancaire),e.xp6(12),e.Q6J("placeholder","Nom de bank *"),e.xp6(1),e.Q6J("ngForOf",t.banks),e.xp6(4),e.Q6J("stepControl",t.prospectClient),e.xp6(12),e.Q6J("placeholder","code tiers  *"),e.xp6(5),e.Q6J("placeholder","register de commerce  *"),e.xp6(5),e.Q6J("placeholder","matricule fiscale  *"),e.xp6(5),e.Q6J("placeholder","num Tva  *"))},dependencies:[c.sg,c.O5,a._Y,a.Fj,a.wV,a.Wl,a.JJ,a.JL,a.Q7,a.nD,a.F,a.sg,a.u,a.x0,v.ey,u.KE,u.hX,g.Nt,Z.gD,p.C0,p.VY,p.Vq,p.Ic,I.lW,T.Hw,qe.W],styles:[".imgfsr[_ngcontent-%COMP%]{width:50%}"]});var ye=s(30430);const nn=["transactionPaginator"];function on(n,i){1&n&&e._UZ(0,"mat-icon",73),2&n&&e.Q6J("svgIcon","heroicons_outline:check-circle")}function an(n,i){1&n&&e._UZ(0,"mat-icon",74),2&n&&e.Q6J("svgIcon","heroicons_outline:exclamation-circle")}function rn(n,i){if(1&n&&(e.TgZ(0,"div",75),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" de ",e.xi3(2,2,t.searchForm.getRawValue().start,"dd/MM/yyyy")," \xe0 ",e.xi3(3,5,t.searchForm.getRawValue().end,"dd/MM/yyyy")," ")}}function ln(n,i){if(1&n&&(e.TgZ(0,"div",76),e._uU(1),e.ALo(2,"date"),e.ALo(3,"date"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" de ",e.xi3(2,2,t.searchForm.getRawValue().start,"dd/MM/yyyy")," \xe0 ",e.xi3(3,5,t.searchForm.getRawValue().end,"dd/MM/yyyy")," ")}}function sn(n,i){if(1&n&&(e.TgZ(0,"div",77),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("+",e.xi3(2,1,t.difference,"4.1-5")," DT")}}function cn(n,i){if(1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("",e.xi3(2,1,t.difference,"4.1-5")," DT")}}function un(n,i){if(1&n&&(e.TgZ(0,"div",57)(1,"div",58),e.YNc(2,on,1,1,"mat-icon",59),e.YNc(3,an,1,1,"mat-icon",60),e.qZA(),e.TgZ(4,"div",61)(5,"div",62)(6,"div",63),e._uU(7,"D\xe9claration pr\xe9cedente"),e.qZA(),e.YNc(8,rn,4,8,"div",64),e.YNc(9,ln,4,8,"div",65),e.qZA()(),e.TgZ(10,"div",66)(11,"div",67)(12,"div",68)(13,"div")(14,"div",69),e._uU(15,"Cr\xe9dit"),e.qZA(),e.TgZ(16,"div",70),e._uU(17),e.ALo(18,"number"),e.qZA()(),e.TgZ(19,"div")(20,"div",69),e._uU(21,"Pay\xe9"),e.qZA(),e.TgZ(22,"div",70),e._uU(23),e.ALo(24,"number"),e.qZA()(),e.TgZ(25,"div")(26,"div",69),e._uU(27,"Reste a pay\xe9"),e.qZA(),e.TgZ(28,"div",70),e._uU(29),e.ALo(30,"number"),e.qZA()(),e.TgZ(31,"div")(32,"div",69),e._uU(33,"Avoir"),e.qZA(),e.TgZ(34,"div",70),e._uU(35),e.ALo(36,"number"),e.qZA()()()(),e.TgZ(37,"div",67)(38,"div",68)(39,"div")(40,"div",69),e._uU(41,"D\xe9bit"),e.qZA(),e.TgZ(42,"div",70),e._uU(43),e.ALo(44,"number"),e.qZA()(),e.TgZ(45,"div")(46,"div",69),e._uU(47,"Pay\xe9"),e.qZA(),e.TgZ(48,"div",70),e._uU(49),e.ALo(50,"number"),e.qZA()(),e.TgZ(51,"div")(52,"div",69),e._uU(53,"Reste a pay\xe9"),e.qZA(),e.TgZ(54,"div",70),e._uU(55),e.ALo(56,"number"),e.qZA()(),e.TgZ(57,"div")(58,"div",69),e._uU(59,"Avoir"),e.qZA(),e.TgZ(60,"div",70),e._uU(61),e.ALo(62,"number"),e.qZA()()()(),e.TgZ(63,"div",67)(64,"div",69),e._uU(65,"Diff\xe9rence"),e.qZA(),e.YNc(66,sn,3,4,"div",71),e.YNc(67,cn,3,4,"div",72),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.difference>0),e.xp6(1),e.Q6J("ngIf",t.difference<0),e.xp6(5),e.Q6J("ngIf",t.difference>0),e.xp6(1),e.Q6J("ngIf",t.difference<0),e.xp6(8),e.hij("",e.xi3(18,14,t.credit,"4.1-5")," DT"),e.xp6(6),e.hij("",e.xi3(24,17,t.payeCredit,"4.1-5")," DT"),e.xp6(6),e.hij("",e.xi3(30,20,t.leftToPayCredit,"4.1-5"),"DT"),e.xp6(6),e.hij("",e.xi3(36,23,0,"4.1-5"),"DT"),e.xp6(8),e.hij("",e.xi3(44,26,t.debit,"4.1-5"),"DT"),e.xp6(6),e.hij("",e.xi3(50,29,t.payeDebit,"4.1-5")," DT"),e.xp6(6),e.hij("",e.xi3(56,32,t.leftToPayDebit,"4.1-5"),"DT"),e.xp6(6),e.hij("",e.xi3(62,35,0,"4.1-5"),"DT"),e.xp6(5),e.Q6J("ngIf",t.difference>0),e.xp6(1),e.Q6J("ngIf",t.difference<0)}}function dn(n,i){if(1&n&&(e.TgZ(0,"mat-option",79),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.s9C("value",t.uuid),e.xp6(1),e.Oqu(t.alternative_Name)}}function mn(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," R\xe9f\xe9rence "),e.qZA())}function pn(n,i){if(1&n&&(e.TgZ(0,"td",81),e._uU(1),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",t.invoiceNumber," ")}}function _n(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," Date "),e.qZA())}function gn(n,i){if(1&n&&(e.TgZ(0,"td",81),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.invoiceDate,"dd/MM/yyyy HH:mm")," ")}}function fn(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," D\xe9bit "),e.qZA())}function hn(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.total_ttc)}}function vn(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Zn(n,i){if(1&n&&(e.TgZ(0,"td",81),e.YNc(1,hn,2,1,"span",82),e.YNc(2,vn,2,0,"span",82),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","ACHAT"==t.invoicetype),e.xp6(1),e.Q6J("ngIf","VENTE"==t.invoicetype)}}function Tn(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," Cr\xe9dit "),e.qZA())}function bn(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"_________"),e.qZA())}function Cn(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.total_ttc)}}function xn(n,i){if(1&n&&(e.TgZ(0,"td",81),e.YNc(1,bn,2,0,"span",82),e.YNc(2,Cn,2,1,"span",82),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","ACHAT"==t.invoicetype),e.xp6(1),e.Q6J("ngIf","VENTE"==t.invoicetype)}}function An(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," Status "),e.qZA())}function qn(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Pay\xe9"))}function yn(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Non pay\xe9"))}function Un(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu("Partiellement pay\xe9"))}function In(n,i){if(1&n&&(e.TgZ(0,"td",81),e.YNc(1,qn,2,1,"span",82),e.YNc(2,yn,2,1,"span",82),e.YNc(3,Un,2,1,"span",82),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf","PAYE"==t.status),e.xp6(1),e.Q6J("ngIf","NON_PAYE"==t.status),e.xp6(1),e.Q6J("ngIf","PARTIELLEMENT_PAYE"==t.status)}}function Nn(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," Pay\xe9 "),e.qZA())}function Sn(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.total_ttc-t.left_to_pay)}}function Fn(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"0"),e.qZA())}function wn(n,i){if(1&n&&(e.TgZ(0,"td",81),e.YNc(1,Sn,2,1,"span",82),e.YNc(2,Fn,2,0,"span",82),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.left_to_pay),e.xp6(1),e.Q6J("ngIf",null==t.left_to_pay)}}function kn(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," Reste a pay\xe9 "),e.qZA())}function Jn(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.left_to_pay)}}function Dn(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.total_ttc)}}function Qn(n,i){if(1&n&&(e.TgZ(0,"td",81),e.YNc(1,Jn,2,1,"span",82),e.YNc(2,Dn,2,1,"span",82),e.qZA()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.left_to_pay),e.xp6(1),e.Q6J("ngIf",null==t.left_to_pay)}}function Yn(n,i){1&n&&(e.TgZ(0,"th",80),e._uU(1," Avoir "),e.qZA())}function En(n,i){1&n&&(e.TgZ(0,"td",81),e._uU(1," 0 "),e.qZA())}function Pn(n,i){1&n&&e._UZ(0,"tr",83)}function On(n,i){1&n&&e._UZ(0,"tr",84)}function Mn(n,i){1&n&&(e.TgZ(0,"div",85)(1,"span",86),e._uU(2,"Choisir un tier"),e.qZA(),e.TgZ(3,"div",87),e._UZ(4,"img",88),e.qZA()())}function Ln(n,i){1&n&&(e.TgZ(0,"div",85)(1,"div",89),e._UZ(2,"img",88),e.qZA(),e.TgZ(3,"span",86),e._uU(4,"Aucune donn\xe9e disponible dans le tableau "),e.qZA(),e._UZ(5,"hr"),e.qZA())}const Vn=function(){return[5,10,20]};function Rn(n,i){1&n&&e._UZ(0,"mat-paginator",90,91),2&n&&e.Q6J("pageSizeOptions",e.DdM(1,Vn))}function jn(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),e._uU(6," Transactions "),e.qZA()(),e.TgZ(7,"div",6)(8,"div")(9,"a",7),e._uU(10,"Caisse"),e.qZA()(),e.TgZ(11,"div",8),e._UZ(12,"mat-icon",9),e.TgZ(13,"a",10),e._uU(14,"Transactions"),e.qZA()()()()(),e.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"h2",15),e._uU(20," \xc9tat tier "),e.qZA()(),e.TgZ(21,"div",14),e.YNc(22,un,68,38,"div",16),e.qZA()(),e.TgZ(23,"div",17)(24,"div",18)(25,"form",19)(26,"div",20)(27,"div",21)(28,"div",22)(29,"div",14)(30,"mat-form-field",23)(31,"mat-label"),e._uU(32,"Type de document"),e.qZA(),e.TgZ(33,"mat-select",24)(34,"mat-option",25),e._uU(35,"Facture"),e.qZA(),e.TgZ(36,"mat-option",26),e._uU(37,"Bon de livraison"),e.qZA()()()(),e.TgZ(38,"div",14)(39,"mat-form-field",23)(40,"mat-label"),e._uU(41,"Type tier"),e.qZA(),e.TgZ(42,"mat-select",27),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onSelectTier(r))}),e.TgZ(43,"mat-option",28),e._uU(44,"Client"),e.qZA(),e.TgZ(45,"mat-option",29),e._uU(46,"Fournisseur"),e.qZA(),e.TgZ(47,"mat-option",30),e._uU(48,"Client/Fournisseur"),e.qZA()()()(),e.TgZ(49,"div",14)(50,"mat-form-field",23)(51,"mat-label"),e._uU(52,"Tier"),e.qZA(),e.TgZ(53,"mat-select",31),e.YNc(54,dn,2,2,"mat-option",32),e.qZA()()(),e.TgZ(55,"div",14)(56,"mat-form-field",33)(57,"mat-label"),e._uU(58,"Date de d\xe9but *"),e.qZA(),e._UZ(59,"input",34)(60,"mat-datepicker-toggle",35)(61,"mat-datepicker",null,36),e.qZA()(),e.TgZ(63,"div",14)(64,"mat-form-field",33)(65,"mat-label"),e._uU(66,"Date de fin * "),e.qZA(),e._UZ(67,"input",37)(68,"mat-datepicker-toggle",35)(69,"mat-datepicker",null,38),e.qZA()()()(),e.TgZ(71,"div",39)(72,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.rechercher())}),e._uU(73,"Rechercher"),e.qZA()()()()()(),e.TgZ(74,"div",17)(75,"div",18)(76,"div",41)(77,"table",42),e.ynx(78,43),e.YNc(79,mn,2,0,"th",44),e.YNc(80,pn,2,1,"td",45),e.BQk(),e.ynx(81,46),e.YNc(82,_n,2,0,"th",44),e.YNc(83,gn,3,4,"td",45),e.BQk(),e.ynx(84,47),e.YNc(85,fn,2,0,"th",44),e.YNc(86,Zn,3,2,"td",45),e.BQk(),e.ynx(87,48),e.YNc(88,Tn,2,0,"th",44),e.YNc(89,xn,3,2,"td",45),e.BQk(),e.ynx(90,49),e.YNc(91,An,2,0,"th",44),e.YNc(92,In,4,3,"td",45),e.BQk(),e.ynx(93,50),e.YNc(94,Nn,2,0,"th",44),e.YNc(95,wn,3,2,"td",45),e.BQk(),e.ynx(96,51),e.YNc(97,kn,2,0,"th",44),e.YNc(98,Qn,3,2,"td",45),e.BQk(),e.ynx(99,52),e.YNc(100,Yn,2,0,"th",44),e.YNc(101,En,2,0,"td",45),e.BQk(),e.YNc(102,Pn,1,0,"tr",53),e.YNc(103,On,1,0,"tr",54),e.qZA(),e.YNc(104,Mn,5,0,"div",55),e.YNc(105,Ln,6,0,"div",55),e.YNc(106,Rn,2,2,"mat-paginator",56),e.qZA()()()()()(),e.BQk()}if(2&n){const t=e.MAs(62),o=e.MAs(70),r=e.oxw();e.xp6(12),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(10),e.Q6J("ngIf",0!=r.listFactures.length),e.xp6(3),e.Q6J("formGroup",r.searchForm),e.xp6(29),e.Q6J("ngForOf",r.tiers),e.xp6(5),e.Q6J("matDatepicker",t)("max",r.today),e.xp6(1),e.Q6J("for",t),e.xp6(7),e.Q6J("matDatepicker",o)("max",r.today),e.xp6(1),e.Q6J("for",o),e.xp6(9),e.Q6J("dataSource",r.transactionsTable),e.xp6(25),e.Q6J("matHeaderRowDef",r.transactionsTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.transactionsTableColumns),e.xp6(1),e.Q6J("ngIf",""==r.searchForm.getRawValue().tier),e.xp6(1),e.Q6J("ngIf",""!=r.searchForm.getRawValue().tier&&0==r.listFactures.length),e.xp6(1),e.Q6J("ngIf",0!=r.listFactures.length)}}class K{constructor(i,t,o){this.fournisseurService=i,this.toast=t,this.buillingService=o,this.transactionsTableColumns=["invoiceDate","invoiceNumber","debit","credit","status","pay\xe9","reste_a_pay\xe9","avoir"],this.tiers=[],this.today=(new Date).toJSON().split("T")[0],this.searchForm=new a.cw({document:new a.NI("",[a.kI.required]),typeTier:new a.NI("",[a.kI.required]),start:new a.NI("",[a.kI.required]),end:new a.NI("",[a.kI.required]),tier:new a.NI("",[a.kI.required])}),this.listFactures=[],this.debit=0,this.credit=0,this.difference=0,this.leftToPayCredit=0,this.leftToPayDebit=0,this.payeCredit=0,this.payeDebit=0}ngOnInit(){}onSelectTier(i){this.fournisseurService.getTiersByTypeNature(i.value).subscribe(t=>{this.tiers=t})}trackByFn(i,t){return t.id||i}addDay(i){var t=new Date(i);return t.setDate(t.getDate()+1),t}rechercher(){this.searchForm.valid&&(this.searchForm.value.start>this.searchForm.value.end?this.toast.warning({detail:"Warning! Enter une date valide",duration:5e3}):this.getAllTransactionsByTier())}operationCalcul(i){this.initialize(),i.forEach(t=>{console.log(t),"ACHAT"===t.invoicetype?(this.debit+=t.total_ttc,this.difference-=t.total_ttc,null==t.left_to_pay?(this.leftToPayDebit+=t.total_ttc,this.payeDebit+=0):(this.payeDebit+=t.total_ttc-t.left_to_pay,this.leftToPayDebit+=t.left_to_pay)):(this.credit+=t.total_ttc,this.difference+=t.total_ttc,null==t.left_to_pay?(this.leftToPayCredit+=t.total_ttc,this.payeCredit+=0):(console.log(t.left_to_pay),this.payeCredit+=t.total_ttc-t.left_to_pay,this.leftToPayCredit+=t.left_to_pay))})}getAllTransactionsByTier(){console.log("Document",this.searchForm.getRawValue().document);const i={tier:this.searchForm.getRawValue().tier,start:this.addDay(this.searchForm.getRawValue().start),end:this.addDay(this.searchForm.getRawValue().end)};"FACTURE"===this.searchForm.getRawValue().document?this.buillingService.getAllInvoicesByTierInPeriod(i).subscribe(t=>{this.processAfterResponse(t)}):this.buillingService.getAllDeliveryFormsByTierInPeriod(i).subscribe(t=>{this.processAfterResponse(t)})}processAfterResponse(i){this.listFactures=i,this.operationCalcul(i),this.transactionsTable=new d.by(this.listFactures),this.setPaginator()}setPaginator(){this.transactionsTable.paginator=this.transactionPaginator}initialize(){this.debit=0,this.credit=0,this.difference=0,this.leftToPayCredit=0,this.leftToPayDebit=0,this.payeCredit=0,this.payeDebit=0}}K.\u0275fac=function(i){return new(i||K)(e.Y36(x.K),e.Y36(A.s),e.Y36(oe.e))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-transactions"]],viewQuery:function(i,t){if(1&i&&e.Gf(nn,5),2&i){let o;e.iGM(o=e.CRH())&&(t.transactionPaginator=o.first)}},decls:1,vars:0,consts:[[4,"transloco"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],[1,"grid","lg:grid-cols-2","md:grid-cols-1","gap-2"],[1,"grid-cols"],[1,"title-3","pt-8","font-bold"],["class","relative flex flex-col flex-auto p-6 pr-3 pb-3 bg-card rounded-2xl shadow overflow-hidden",4,"ngIf"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[3,"formGroup"],[1,"grid","grid-cols-4"],[1,"col-span-4"],[1,"grid","lg:grid-cols-5","md:grid-cols-2"],["appearance","outline"],["formControlName","document"],["value","FACTURE"],["value","BON_LIVRAISON"],["formControlName","typeTier",3,"selectionChange"],["value","CLIENT"],["value","FOURNISSEUR"],["value","BOTH"],["formControlName","tier"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","subscriptSizing","dynamic",1,"search"],["matInput","","formControlName","start",3,"matDatepicker","max"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","end",3,"matDatepicker","max"],["picker2",""],[1,"col-span-1"],[1,"button-yellow-search","font-bold",3,"click"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","invoiceNumber"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","invoiceDate"],["matColumnDef","debit"],["matColumnDef","credit"],["matColumnDef","status"],["matColumnDef","pay\xe9"],["matColumnDef","reste_a_pay\xe9"],["matColumnDef","avoir"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","flex flex-col my-2",4,"ngIf"],["showFirstLastButtons","","class","overflow-x-auto w-full","aria-label","Select page of periodic elements",3,"pageSizeOptions",4,"ngIf"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],["class","icon-size-24 opacity-25 text-green-500 dark:text-green-400",3,"svgIcon",4,"ngIf"],["class","icon-size-24 opacity-25 text-red-500 dark:text-red-400",3,"svgIcon",4,"ngIf"],[1,"flex","items-center"],[1,"flex","flex-col"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],["class","text-green-600 font-medium text-sm",4,"ngIf"],["class","text-red-600 font-medium text-sm",4,"ngIf"],[1,"flex","flex-row","flex-wrap","mt-4","-mx-6"],[1,"flex","flex-col","mx-6","my-3"],[1,"grid","grid-cols-1","gap-4"],[1,"text-sm","font-medium","leading-none","text-secondary"],[1,"mt-2","font-medium","text-3xl","leading-none"],["class","mt-2 font-medium text-3xl text-green-500 leading-none",4,"ngIf"],["class","mt-2 font-medium text-3xl text-red-500 leading-none",4,"ngIf"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"icon-size-24","opacity-25","text-red-500","dark:text-red-400",3,"svgIcon"],[1,"text-green-600","font-medium","text-sm"],[1,"text-red-600","font-medium","text-sm"],[1,"mt-2","font-medium","text-3xl","text-green-500","leading-none"],[1,"mt-2","font-medium","text-3xl","text-red-500","leading-none"],[3,"value"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[4,"ngIf"],["mat-header-row",""],["mat-row",""],[1,"flex","flex-col","my-2"],[1,"text-3xl","text-center","my-6"],[1,"flex","justify-center"],["src","../../../../../assets/imgs/undraw_select.svg",1,"w-4/12"],[1,"flex","justify-center","mt-10"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["transactionPaginator",""]],template:function(i,t){1&i&&e.YNc(0,jn,107,16,"ng-container",0)},dependencies:[c.sg,c.O5,ye.KI,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,v.ey,w.Mq,w.hl,w.nW,u.KE,u.hX,u.R9,g.Nt,Z.gD,T.Hw,Te.NW,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,c.JJ,c.uU]});const Bn=[{path:"vente",component:j},{path:"achat",component:B},{path:"contact",component:$},{path:"addfrs",component:G},{path:"addclient",component:H},{path:"transactions",component:K}];class E{}E.\u0275fac=function(i){return new(i||E)},E.\u0275mod=e.oAB({type:E}),E.\u0275inj=e.cJS({imports:[f.Bz.forChild(Bn),f.Bz]});var Ue=s(24300);class P{}P.\u0275fac=function(i){return new(i||P)},P.\u0275mod=e.oAB({type:P}),P.\u0275inj=e.cJS({imports:[Ue.m]});var $n=s(77775);class O{}O.\u0275fac=function(i){return new(i||O)},O.\u0275mod=e.oAB({type:O}),O.\u0275inj=e.cJS({imports:[c.ez,E,ye.y4,Ue.m,P,$n.fC]})}}]);