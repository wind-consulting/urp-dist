"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[114],{65778:(T,y,i)=>{i.d(y,{W:()=>M});var e=i(94650);class h{constructor(){}}var t=i(73836);class b{constructor(){}}var m=i(65938),g=i(18998),f=i(89858),s=i(48768),u=i(24006),l=i(3238),n=i(59549),o=i(284),r=i(84385),A=i(30430);function L(E,c){if(1&E){const a=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"label",6),e._uU(7,"Ajouter une nouvelle r\xe8gle de cong\xe9"),e.qZA()()(),e.TgZ(8,"div",7)(9,"form",8,9),e.NdJ("ngSubmit",function(){e.CHM(a);const _=e.oxw();return e.KtG(_.onFormSubmit())}),e.TgZ(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),e._uU(14),e.qZA(),e.TgZ(15,"mat-select",12),e.NdJ("ngModelChange",function(_){e.CHM(a);const v=e.oxw();return e.KtG(v.type=_)})("selectionChange",function(_){e.CHM(a);const v=e.oxw();return e.KtG(v.onChangeLeaveType(_))}),e.TgZ(16,"mat-option",13),e._uU(17),e.qZA(),e.TgZ(18,"mat-option",14),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",10)(21,"mat-form-field",15)(22,"mat-label"),e._uU(23),e.qZA(),e.TgZ(24,"input",16),e.NdJ("ngModelChange",function(_){e.CHM(a);const v=e.oxw();return e.KtG(v.companyEnabledRule.name=_)}),e.qZA()()(),e.TgZ(25,"div",10)(26,"mat-form-field",15)(27,"mat-label"),e._uU(28),e.qZA(),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(_){e.CHM(a);const v=e.oxw();return e.KtG(v.totalLaeveDays=_)}),e.qZA()()(),e.TgZ(30,"label"),e._uU(31,"Max Valeur 9"),e.qZA(),e.TgZ(32,"div",18)(33,"button",19),e._uU(34),e.qZA()()()()(),e.BQk()}if(2&E){const a=c.$implicit,p=e.oxw();e.xp6(14),e.Oqu(a("sirh.Type")),e.xp6(1),e.Q6J("ngModel",p.type),e.xp6(2),e.Oqu(a("sirh.CongesP")),e.xp6(2),e.Oqu(a("sirh.CongesM")),e.xp6(4),e.Oqu(a("sirh.Titre")),e.xp6(1),e.Q6J("ngModel",p.companyEnabledRule.name),e.xp6(4),e.Oqu(a("sirh.Total")),e.xp6(1),e.Q6J("ngModel",p.totalLaeveDays),e.xp6(5),e.Oqu(a("sirh.Ajout"))}}class M{constructor(c,a,p,_,v,d,C){this.leaveService=c,this.partnerService=a,this.ref=p,this.toast=_,this.dialog=v,this.dialogRef=d,this.data=C,this.dataEvent=new e.vpe,this.companyEnabledLeaveList=[],this.companyEnabledRule=new h,this.leaveDaysInMonths=new b,this.leave=new t.D,this.payedLeaveRulesList=[],this.visible=!0}ngOnInit(){this.type=this.data.dataKey,this.getAllCollaborator()}getAllCollaborator(){let c=localStorage.getItem("useruuid");this.partnerService.getPartnerByuuid(c).subscribe(a=>{this.leaveService.getAllLeaveByCollaborator().subscribe(p=>{this.partnerService.getPartnerByuuid(c).subscribe(_=>{this.leaveService.getAllByTenantId().subscribe(v=>{v.forEach(d=>{this.companyEnabledLeaveList.push({active:d.active,days_in_advance:d.days_in_advance,deductible:d.deductible,full_day:d.full_day,negative_credit:d.negative_credit,partial_day:d.partial_day,simultaneously_limit:d.simultaneously_limit,type:d.type,custom_type:d.custom_type,uuid:d.uuid,max_days:d.max_days,isValid:!0})})}),this.leaveService.getAllLeaveRules().subscribe(v=>{v.forEach(d=>{const C=d.value.split(",",12);p.map(Z=>{(Z.sickLeave_rule.uuid===d.uuid||Z.payed_rule.uuid===d.uuid)&&(this.visible=!1)}),C.reduce((Z,U)=>Z+Number(U),0).toFixed(2),this.visible=!0,this.ref.detectChanges()})})})})})}onChangeLeaveType(c){this.type=c.value}onFormSubmit(){if("PAYED_LEAVE"==this.type){const a=(Number(this.totalLaeveDays)/12).toFixed(1),p=(Number(this.totalLaeveDays)-11*Number(a)).toFixed(1);this.leaveDaysInMonths.days=[a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),a.toString(),p.toString()]}else this.leaveDaysInMonths.days=[this.totalLaeveDays.toString(),"0","0","0","0","0","0","0","0","0","0","0"];this.companyEnabledRule.value="".concat(this.leaveDaysInMonths.days,","),null!=this.type?this.companyEnabledLeaveList.forEach(a=>{a.type==this.type&&(this.selectedUuid=a.uuid,console.log("Select",this.selectedUuid))}):(this.selectedUuid=this.leave.uuid,console.log("Select",this.selectedUuid));let c={is_default:!0,name:this.companyEnabledRule.name,leave:{active:!1,days_in_advance:null,deductible:null,full_day:null,negative_credit:null,partial_day:null,simultaneously_limit:null,type:null,custom_type:null,uuid:this.selectedUuid},value:this.companyEnabledRule.value,uuid:""};console.log("leave obj",c),this.leaveService.createLeaveRule(c).subscribe({next:a=>{"PAYED_LEAVE"==a.leave.type&&(this.payedLeaveRulesList.push({item_id:a.uuid,item_text:a.name,item_type:a.leave,item_value:a.value}),this.dialogRef.close(this.payedLeaveRulesList)),"SICK_LEAVE"==a.leave.type&&(this.payedLeaveRulesList.push({item_id:a.uuid,item_text:a.name,item_type:a.leave,item_value:a.value}),this.dialogRef.close(this.payedLeaveRulesList)),this.toast.success({detail:"Succ\xe8s! la r\xe8gle de cong\xe9 est ajout\xe9e avec succ\xe8s",duration:5e3})}})}}M.\u0275fac=function(c){return new(c||M)(e.Y36(g.t),e.Y36(f.b),e.Y36(e.sBO),e.Y36(s.s),e.Y36(m.uw),e.Y36(m.so),e.Y36(m.WI))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-dialog-form-menu"]],outputs:{dataEvent:"dataEvent"},decls:1,vars:0,consts:[[4,"transloco"],["mat-dialog-content",""],[1,"mt-0","mb-2","p-2","w-100"],[1,"flex","justify-center","mb-2"],["src","assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center"],[1,"text-black","dark:text-white","font-bold"],[1,"grid","grid-cols-1"],["id","form1","role","form","ngNativeValidate","",3,"ngSubmit"],["testForm","ngForm"],[1,"mb-4"],["appearance","outline","subscriptSizing","dynamic",1,"hidden","fullwidth","in_text_add","w-full"],["name","type",3,"ngModel","ngModelChange","selectionChange"],["value","PAYED_LEAVE"],["value","SICK_LEAVE"],["appearance","outline","subscriptSizing","dynamic",1,"fullwidth","in_text_add","w-full"],["matInput","","name","titre","required","",3,"ngModel","ngModelChange"],["type","number","matInput","","name","total","required","",3,"ngModel","ngModelChange"],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","submit",1,"button-yellow"]],template:function(c,a){1&c&&e.YNc(0,L,35,9,"ng-container",0)},dependencies:[u.Fj,u.wV,u.JJ,u.JL,u.Q7,u.On,u.F,l.ey,n.KE,n.hX,o.Nt,r.gD,m.xY,m.H8,A.KI]})},94715:(T,y,i)=>{i.d(y,{M:()=>l});var e=i(24006),h=i(65938),t=i(94650),b=i(18998),m=i(36895),g=i(284),f=i(59549);function s(n,o){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const r=o.$implicit;t.xp6(1),t.hij(" ",r," ")}}function u(n,o){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const r=o.$implicit;t.xp6(1),t.hij(" ",r," ")}}class l{constructor(o,r){this.leaveService=o,this.data=r,this.donneesGeneral=new e.cw({uuid:new e.NI(""),type:new e.NI(null),name:new e.NI(null)}),this.moisList=["Janv","F\xe9v","Mars","Avril","Mai","Juin"],this.moisList2=["Juillet","Aout","Sep","Oct","Nov","Dec"]}ngOnInit(){this.getAllLeaveRules()}getAllLeaveRules(){this.leaveService.getLeaveRules(this.data.dataKey).subscribe(o=>{this.donneesGeneral.controls.type.setValue(o.leave.type),this.donneesGeneral.controls.name.setValue(o.name);const r=o.value.split(",",6),A=o.value.split(",",12);this.splitted2=r;const L=A.splice(6);this.splitted3=L})}}l.\u0275fac=function(o){return new(o||l)(t.Y36(b.t),t.Y36(h.WI))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-previsualiser-modal"]],decls:72,vars:3,consts:[["mat-dialog-content",""],[1,"flex","justify-center","mb-2"],["src","assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mb-4"],[1,"text-black","dark:text-white","font-bold"],[1,"grid","grid-cols-1","mt-8"],[3,"formGroup"],[1,"mb-4"],["appearance","outline","subscriptSizing","dynamic","disabled","",1,"fullwidth","in_text_add","w-full"],["matInput","","formControlName","type","name","titre","readonly",""],["formControlName","name","matInput","","name","total","readonly",""],[1,"mt-3","mb-3"],["id","table",1,"table-editable"],[1,"table-add","float-right",2,"padding","0"],[1,"table","table-bordered","table-responsive-md","table-striped","text-center","table-sm","table-prev"],[1,"pt-5","pb-5","pl-5","pr-5","th-table-prev"],[1,"pt-6","pb-6","pl-6","pr-6","th-table-prev"],["class"," pt-5 pb-5 pl-5 pr-5 td-table-prev ",4,"ngFor","ngForOf"],["id","table",1,"table-editable","mt-5"],[1,"pt-4","pb-4","pl-4","pr-4","th-table-prev"],[1,"pt-5","pb-5","pl-5","pr-5","td-table-prev"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"label",4),t._uU(5,"Nombre de jours autoris\xe9s pour chaque mois"),t.qZA()(),t.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"mat-form-field",8)(10,"mat-label"),t._uU(11,"Type"),t.qZA(),t._UZ(12,"input",9),t.qZA()(),t.TgZ(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Titre"),t.qZA(),t._UZ(17,"input",10),t.qZA()(),t.TgZ(18,"h2",11),t._uU(19," Nombre de jours "),t.qZA(),t.TgZ(20,"div",12),t._UZ(21,"span",13),t.TgZ(22,"table",14)(23,"thead")(24,"tr")(25,"th",15)(26,"span"),t._uU(27,"Janv"),t.qZA()(),t.TgZ(28,"th",16)(29,"span"),t._uU(30,"F\xe9v"),t.qZA()(),t.TgZ(31,"th",15)(32,"span"),t._uU(33,"Mars"),t.qZA()(),t.TgZ(34,"th",15)(35,"span"),t._uU(36,"Avril"),t.qZA()(),t.TgZ(37,"th",16)(38,"span"),t._uU(39,"Mai"),t.qZA()(),t.TgZ(40,"th",16)(41,"span"),t._uU(42,"Juin"),t.qZA()()()(),t.TgZ(43,"tbody")(44,"tr"),t.YNc(45,s,2,1,"td",17),t.qZA()()()(),t.TgZ(46,"div",18),t._UZ(47,"span",13),t.TgZ(48,"table",14)(49,"thead")(50,"tr")(51,"th",19)(52,"span"),t._uU(53,"Juillet"),t.qZA()(),t.TgZ(54,"th",15)(55,"span"),t._uU(56,"Ao\xfbt"),t.qZA()(),t.TgZ(57,"th",16)(58,"span"),t._uU(59,"Sep"),t.qZA()(),t.TgZ(60,"th",16)(61,"span"),t._uU(62,"Oct"),t.qZA()(),t.TgZ(63,"th",16)(64,"span"),t._uU(65,"Nov"),t.qZA()(),t.TgZ(66,"th",16)(67,"span"),t._uU(68,"Dec"),t.qZA()()()(),t.TgZ(69,"tbody")(70,"tr"),t.YNc(71,u,2,1,"td",17),t.qZA()()()()()()()),2&o&&(t.xp6(7),t.Q6J("formGroup",r.donneesGeneral),t.xp6(38),t.Q6J("ngForOf",r.splitted2),t.xp6(26),t.Q6J("ngForOf",r.splitted3))},dependencies:[m.sg,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,g.Nt,f.KE,f.hX,h.xY]})},68514:(T,y,i)=>{i.d(y,{s:()=>g});var e=i(65938),h=i(61135),t=i(94650),b=i(18998),m=i(48768);class g{constructor(s,u,l,n){this.data=s,this.leaveService=u,this.dialogRef=l,this.toast=n,this.visible=!0,this.congeRulesList=[],this.getAllLeaveFinished=new h.X(null)}ngOnInit(){}deleteLeaves(){this.leaveService.deletecompanyLeaveRule(this.data.dataKey).subscribe(s=>s),this.getAllLeaves()}getAllLeaves(){this.leaveService.getAllLeaveByCollaborator().subscribe(s=>{this.getAllLeaveCollab(s)})}getAllLeaveCollab(s){this.leaveService.getAllLeaveRules().subscribe(u=>{u.forEach(l=>{const n=l.value.split(",",12);s.map(r=>{(r.sickLeave_rule.uuid===l.uuid||r.payed_rule.uuid===l.uuid)&&(this.visible=!1)});const o=n.reduce((r,A)=>r+Number(A),0).toFixed(2);this.congeRulesList.push({isdefault:l.is_default,name:l.name,leave:l.leave,value:l.value,uuid:l.uuid,total:o,listleaveperday:n,visible:this.visible}),this.toast.success({detail:"Succ\xe8s! la r\xe8gle de cong\xe9 \xe0 \xe9t\xe9 supprim\xe9 avec succ\xe9s",duration:5e3})},l=>{this.toast.error({detail:"Error!",duration:5e3})}),this.dialogRef.close(this.congeRulesList),this.visible=!0})}}g.\u0275fac=function(s){return new(s||g)(t.Y36(e.WI),t.Y36(b.t),t.Y36(e.so),t.Y36(m.s))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-remove-modal"]],decls:9,vars:0,consts:[["mat-dialog-content",""],[1,"flex","justify-center","mb-2"],["src","assets/imgs/ajout-pencil.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mb-4"],[1,"text-black","dark:text-white","font-bold"],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","button",1,"button-yellow",3,"click"]],template:function(s,u){1&s&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.qZA(),t.TgZ(3,"div",3)(4,"label",4),t._uU(5,"Vous \xeates sur le point de confirmer la suppression de cette r\xe8gle"),t.qZA()(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return u.deleteLeaves()}),t._uU(8,"Valider"),t.qZA()()())},dependencies:[e.xY,e.H8]})},24441:(T,y,i)=>{i.d(y,{p:()=>s});var e=i(54004),h=i(17414),t=i(70262),b=i(21261),m=i(94650),g=i(80529),f=i(97316);class s{constructor(l,n){this.http=l,this.localSt=n,this.baseUrl=b.N.sirhUrl}getAllDepartment(){return this.http.get(`${this.baseUrl}/department/list`).pipe((0,e.U)(l=>this.teamsResultList=l))}getAllPostes(){return this.http.get(`${this.baseUrl}/level/list`).pipe((0,e.U)(l=>l))}getAllNiveauByDepartment(l){return this.http.get(`${this.baseUrl}/level/listByDepartment/${l}`).pipe((0,e.U)(n=>n))}createDepartment(l){return this.http.post(`${this.baseUrl}/department/create`,l).pipe((0,h.V)(6e4),(0,t.K)((n,o)=>[]),(0,e.U)(n=>n))}createNiveau(l){return this.http.post(`${this.baseUrl}/level/create`,l).pipe((0,h.V)(6e4),(0,t.K)((n,o)=>[]),(0,e.U)(n=>n))}}s.\u0275fac=function(l){return new(l||s)(m.LFG(g.eN),m.LFG(f.n))},s.\u0275prov=m.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}}]);