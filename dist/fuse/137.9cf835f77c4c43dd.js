"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[137],{69454:(vt,H,c)=>{c.r(H),c.d(H,{AdminModule:()=>D});var u=c(36895),T=c(30144),r=c(24006),t=c(94650),$=c(80529),d=c(65938),A=c(284),h=c(59549),w=c(84385),l=c(3238),p=c(98214);function v(i,n){1&i&&(t.TgZ(0,"fuse-alert",18)(1,"span",19),t._uU(2,"Notice"),t.qZA(),t._uU(3," Num de caracter superieur a 4 "),t.qZA()),2&i&&t.Q6J("type","warning")}function L(i,n){1&i&&(t.TgZ(0,"fuse-alert",18)(1,"span",19),t._uU(2,"Notice"),t.qZA(),t._uU(3," Zip code supperieur a 1000 "),t.qZA()),2&i&&t.Q6J("type","warning")}function g(i,n){if(1&i&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.alpha2),t.xp6(1),t.hij(" ",e.name," ")}}class B{constructor(n){this.http=n,this.adressObj=new r.cw({address:new r.NI("",[r.kI.required,r.kI.minLength(4)]),countrie:new r.NI("",[r.kI.required]),zip_code:new r.NI("",[r.kI.required,r.kI.min(1e3)])})}ngOnInit(){}getCountriesList(){this.http.get("./assets/countries.json").subscribe({next:e=>{this.countries=e},error:e=>{console.log("erreur ")}})}submit(){}ngAfterViewInit(){this.getCountriesList()}}B.\u0275fac=function(n){return new(n||B)(t.Y36($.eN))},B.\u0275cmp=t.Xpm({type:B,selectors:[["app-add-date-modal"]],decls:31,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-0"],[1,"flex","justify-center"],["src","assets/imgs/edit.svg",2,"width","45px","height","45px"],[1,"text-black","dark:text-white"],[1,"grid","grid-cols-1","mt-8"],[3,"formGroup","ngSubmit"],[1,"mb-4","w-full"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Adress","formControlName","address","required",""],[3,"type",4,"ngIf"],[1,"mb-4"],["matInput","","type","number","placeholder","Zip Code","min","0","formControlName","zip_code","required",""],["formControlName","countrie","name","countrie"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"flex","justify-center","mb-2"],["type","button",1,"button-yellow",3,"mat-dialog-close","disabled"],[3,"type"],["fuseAlertTitle",""],[3,"value"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",3)(6,"label",5),t._uU(7,"Vous \xeates sur le point d'ajouter une nouvelle adresse"),t.qZA()()(),t.TgZ(8,"div",6)(9,"form",7),t.NdJ("ngSubmit",function(){return e.submit()}),t.TgZ(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),t._uU(13,"Adress"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.YNc(15,v,4,1,"fuse-alert",11),t.qZA(),t.TgZ(16,"div",12)(17,"mat-form-field",9)(18,"mat-label"),t._uU(19,"ZipCode"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.YNc(21,L,4,1,"fuse-alert",11),t.qZA(),t.TgZ(22,"div",12)(23,"mat-form-field",9)(24,"mat-label"),t._uU(25,"Countries"),t.qZA(),t.TgZ(26,"mat-select",14),t.YNc(27,g,2,2,"mat-option",15),t.qZA()()()()(),t.TgZ(28,"div",16)(29,"button",17),t._uU(30,"Ajouter "),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("formGroup",e.adressObj),t.xp6(6),t.Q6J("ngIf",e.adressObj.controls.address.invalid&&e.adressObj.controls.address.dirty),t.xp6(6),t.Q6J("ngIf",e.adressObj.controls.zip_code.invalid&&e.adressObj.controls.zip_code.dirty),t.xp6(6),t.Q6J("ngForOf",e.countries),t.xp6(2),t.Q6J("mat-dialog-close",e.adressObj.getRawValue())("disabled",e.adressObj.invalid))},dependencies:[u.sg,u.O5,d.ZT,d.uh,d.xY,d.H8,A.Nt,h.KE,h.hX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.sg,r.u,w.gD,l.ey,p.W]});var bt=c(42618),mt=c(21261),xt=c(88951),Ct=c(37495),_t=c(89858),R=c(48768),Tt=c(7401),yt=c(74890),y=c(3848),Y=c(97392),at=c(4859),K=c(30430);function Zt(i,n){1&i&&(t.TgZ(0,"mat-hint"),t._uU(1,"Nom de l'entreprise est requis"),t.qZA())}function At(i,n){1&i&&(t.TgZ(0,"mat-hint"),t._uU(1,"Adresse email est requise"),t.qZA())}function wt(i,n){1&i&&(t.TgZ(0,"mat-hint"),t._uU(1,"Num\xe9ro de t\xe9l\xe9phone doit contenir 8 chiffres"),t.qZA())}function Lt(i,n){1&i&&(t.TgZ(0,"mat-hint"),t._uU(1,"Site web est requis"),t.qZA())}function Nt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"label",70),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.partner.company_name)}}function qt(i,n){if(1&i&&(t.TgZ(0,"mat-option",71),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.s9C("value",e.text),t.xp6(1),t.AsE("",e.text," ",e.zip_code,"")}}function Ut(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"div")(9,"a",7),t._uU(10),t.qZA()(),t.TgZ(11,"div",8),t._UZ(12,"mat-icon",9),t.TgZ(13,"span",10),t._uU(14),t.qZA()()()()(),t.TgZ(15,"div",11)(16,"div",12)(17,"mat-tab-group")(18,"mat-tab",13)(19,"form",14,15),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modifierDonnesEntreprise())}),t.TgZ(21,"div",1)(22,"div",16)(23,"div",17)(24,"div",18),t._UZ(25,"img",19),t.qZA(),t.TgZ(26,"div",20)(27,"label",21),t._uU(28),t.qZA(),t.TgZ(29,"input",22),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.openCrapDialog(o))}),t.qZA()()(),t.TgZ(30,"div",23)(31,"div",24)(32,"mat-form-field",25)(33,"mat-label"),t._uU(34),t.qZA(),t._UZ(35,"input",26),t.YNc(36,Zt,2,0,"mat-hint",27),t.qZA()(),t.TgZ(37,"div")(38,"mat-form-field",28)(39,"mat-label"),t._uU(40),t.qZA(),t._UZ(41,"input",29)(42,"mat-icon",30),t.YNc(43,At,2,0,"mat-hint",27),t.qZA()(),t.TgZ(44,"div")(45,"mat-form-field",31)(46,"mat-label"),t._uU(47),t.qZA(),t._UZ(48,"input",32),t.qZA()(),t.TgZ(49,"div")(50,"mat-form-field",25)(51,"mat-label"),t._uU(52),t.qZA(),t._UZ(53,"input",33),t.YNc(54,wt,2,0,"mat-hint",27),t.qZA()(),t.TgZ(55,"div")(56,"mat-form-field",25)(57,"mat-label"),t._uU(58),t.qZA(),t._UZ(59,"input",34),t.YNc(60,Lt,2,0,"mat-hint",27),t.qZA()()(),t.TgZ(61,"div",35)(62,"button",36),t._uU(63),t.qZA()()()()()(),t.TgZ(64,"mat-tab",13)(65,"form",14),t.NdJ("ngSubmit",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.modifierDonnesEntreprise())}),t.TgZ(66,"div",1)(67,"div",16)(68,"div",37)(69,"div",18),t._UZ(70,"img",19),t.qZA(),t.TgZ(71,"div",38),t.YNc(72,Nt,3,1,"div",27),t.qZA()(),t.TgZ(73,"div",23)(74,"div")(75,"mat-form-field",25)(76,"mat-label"),t._uU(77),t.qZA(),t.TgZ(78,"mat-select",39)(79,"mat-option",40),t._uU(80),t.qZA(),t.TgZ(81,"mat-option",41),t._uU(82),t.qZA()()()(),t.TgZ(83,"div")(84,"mat-form-field",25)(85,"mat-label"),t._uU(86),t.qZA(),t.TgZ(87,"mat-select",42)(88,"mat-option",43),t._uU(89),t.qZA(),t.TgZ(90,"mat-option",44),t._uU(91),t.qZA(),t.TgZ(92,"mat-option",45),t._uU(93),t.qZA()()()(),t.TgZ(94,"div",24)(95,"mat-form-field",25)(96,"mat-label"),t._uU(97),t.qZA(),t._UZ(98,"input",46),t.qZA()(),t.TgZ(99,"div")(100,"mat-form-field",25)(101,"mat-label"),t._uU(102),t.qZA(),t._UZ(103,"input",47),t.qZA()(),t.TgZ(104,"div",48)(105,"div",49)(106,"mat-form-field",25)(107,"mat-label"),t._uU(108),t.qZA(),t.TgZ(109,"mat-select",50),t.YNc(110,qt,2,3,"mat-option",51),t.qZA()()(),t.TgZ(111,"div",52)(112,"button",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openDialog())}),t._UZ(113,"mat-icon",54),t.qZA()()(),t.TgZ(114,"div")(115,"mat-form-field",25)(116,"mat-label"),t._uU(117),t.qZA(),t._UZ(118,"input",55),t.qZA()(),t.TgZ(119,"div")(120,"mat-form-field",25)(121,"mat-label"),t._uU(122),t.qZA(),t.TgZ(123,"mat-select",56)(124,"mat-option",57),t._uU(125),t.qZA(),t.TgZ(126,"mat-option",58),t._uU(127),t.qZA(),t.TgZ(128,"mat-option",59),t._uU(129),t.qZA()()()()(),t.TgZ(130,"div",35)(131,"button",36),t._uU(132),t.qZA()()()()()(),t.TgZ(133,"mat-tab",60)(134,"div",61)(135,"div",62)(136,"div",63)(137,"ul")(138,"li")(139,"a",64),t._UZ(140,"img",65)(141,"img",66),t.TgZ(142,"span"),t._uU(143,"Child"),t.qZA()(),t.TgZ(144,"ul")(145,"li")(146,"a",67),t._UZ(147,"img",68),t.TgZ(148,"span"),t._uU(149,"Grand Child"),t.qZA()(),t.TgZ(150,"ul")(151,"li")(152,"a",67),t._UZ(153,"img",69),t.TgZ(154,"span"),t._uU(155,"Great Grand Child"),t.qZA()()(),t.TgZ(156,"li")(157,"a",67),t._UZ(158,"img",69),t.TgZ(159,"span"),t._uU(160,"Great Grand Child"),t.qZA()()(),t.TgZ(161,"li")(162,"a",67),t._UZ(163,"img",69),t.TgZ(164,"span"),t._uU(165,"Great Grand Child"),t.qZA()()()()(),t.TgZ(166,"li")(167,"a",67),t._UZ(168,"img",69),t.TgZ(169,"span"),t._uU(170,"Grand Child"),t.qZA()(),t.TgZ(171,"ul")(172,"li")(173,"a",67),t._UZ(174,"img",69),t.TgZ(175,"span"),t._uU(176,"Grand Child"),t.qZA()()(),t.TgZ(177,"li")(178,"a",67),t._UZ(179,"img",69),t.TgZ(180,"span"),t._uU(181,"Grand Child"),t.qZA()()()()(),t.TgZ(182,"li")(183,"a",67),t._UZ(184,"img",69),t.TgZ(185,"span"),t._uU(186,"Grand Child"),t.qZA()()()()()()()()()()()()()(),t.BQk()}if(2&i){const e=n.$implicit,a=t.oxw();t.xp6(6),t.hij(" ",e("partner.Donneesentreprise")," "),t.xp6(4),t.hij("",e("partner.Accueil")," "),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(2),t.Oqu(e("partner.Donneesentreprise")),t.xp6(4),t.s9C("label",e("partner.dgenerale")),t.xp6(1),t.Q6J("formGroup",a.donneesGeneral),t.xp6(6),t.Q6J("src",a.urlLogo?a.urlLogo:"./assets/imgs/admin.svg",t.LSH),t.xp6(3),t.Oqu(e("partner.Importeruneimage")),t.xp6(6),t.Oqu(e("partner.companyname")),t.xp6(2),t.Q6J("ngIf",a.Company_name.touched&&a.Company_name.invalid),t.xp6(4),t.Oqu(e("partner.email")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:mail"),t.xp6(1),t.Q6J("ngIf",a.Email.touched&&a.Email.invalid),t.xp6(4),t.Oqu(e("partner.Identifiantunique")),t.xp6(5),t.Oqu(e("partner.phonenumber")),t.xp6(2),t.Q6J("ngIf",a.Phone_number.touched&&a.Phone_number.invalid),t.xp6(4),t.Oqu(e("partner.website")),t.xp6(2),t.Q6J("ngIf",a.Web_site.touched&&a.Web_site.invalid),t.xp6(2),t.Q6J("disabled",a.donneesGeneral.invalid),t.xp6(1),t.Oqu(e("partner.SAUVEGARDER")),t.xp6(1),t.s9C("label",e("partner.dspecifique")),t.xp6(1),t.Q6J("formGroup",a.Donneesspecifiques),t.xp6(5),t.Q6J("src",a.urlLogo?a.urlLogo:"./assets/imgs/admin.svg",t.LSH),t.xp6(2),t.Q6J("ngIf",!!a.partner),t.xp6(5),t.Oqu(e("partner.typeentreprise")),t.xp6(3),t.Oqu(e("partner.sural")),t.xp6(2),t.Oqu(e("partner.sarl")),t.xp6(4),t.Oqu(e("partner.activitytype")),t.xp6(3),t.hij("",e("partner.TOTALLY_EXPORTING")," "),t.xp6(2),t.hij("",e("partner.PARTIALLY_EXPORTING")," "),t.xp6(2),t.Oqu(e("partner.ONSHORE")),t.xp6(4),t.Oqu(e("partner.owner")),t.xp6(5),t.Oqu(e("partner.manager")),t.xp6(6),t.Oqu(e("partner.adresse")),t.xp6(2),t.Q6J("ngForOf",a.addresseList),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:plus-circle"),t.xp6(4),t.Oqu(e("partner.Capital")),t.xp6(5),t.Oqu(e("partner.devise")),t.xp6(3),t.hij("",e("partner.DINAR")," "),t.xp6(2),t.hij("",e("partner.EURO")," "),t.xp6(2),t.hij("",e("partner.DOLLAR")," "),t.xp6(2),t.Q6J("disabled",a.Donneesspecifiques.invalid),t.xp6(1),t.Oqu(e("partner.SAUVEGARDER")),t.xp6(1),t.s9C("label",e("partner.sentreprise"))}}class O{constructor(n,e,a,o,s,m,f,C,G){this.dialog=n,this.authService=e,this.userServicer=a,this.partnerService=o,this.router=s,this.ref=m,this.toast=f,this._fuseConfirmationService=C,this.imageService=G,this.donneesGeneral=new r.cw({uuid:new r.NI(""),email:new r.NI("",[r.kI.required,r.kI.email,r.kI.minLength(5)]),trade_register:new r.NI("",[r.kI.required]),logo:new r.NI(null),company_name:new r.NI("",[r.kI.required,r.kI.minLength(3)]),phone_number:new r.NI("",[r.kI.required]),web_site:new r.NI("",[r.kI.required])}),this.Donneesspecifiques=new r.cw({type_entreprise:new r.NI("",[r.kI.required]),activity_type:new r.NI("",[r.kI.required]),owner:new r.NI("",[r.kI.required]),manager:new r.NI("",[r.kI.required]),adresse:new r.NI("",[r.kI.required]),capital:new r.NI("",[r.kI.required]),devis:new r.NI("",[r.kI.required])}),this.urlLogo="",this.addresseList=[],this.partnerUrl=mt.N.partnersUrl,this.configValid={title:"Modifier Donn\xe9es Entreprise",message:'voulez-vous enregistrer vos modifications? <span class="font-medium">Cette action peut \xeatre annul\xe9e !</span>',icon:{show:!0,name:"heroicons_outline:pencil-alt",color:"warning"},actions:{confirm:{show:!0,label:"Remove",color:"warn"},cancel:{show:!0,label:"Cancel"}},dismissible:!0}}get Email(){return this.donneesGeneral.get("email")}get Phone_number(){return this.donneesGeneral.get("phone_number")}get Company_name(){return this.donneesGeneral.get("company_name")}get Web_site(){return this.donneesGeneral.get("web_site")}ngOnInit(){this.getPartnerByuuid()}openDialog(){this.dialog.open(B,{}).afterClosed().subscribe(e=>{this.adressObj=e;let a=localStorage.getItem("useruuid");this.partnerService.parametersAddadress={text:e.address,uuid:a,country:e.countrie.toUpperCase(),main:!0,zip_code:e.zip_code},this.partnerService.addAdresse(this.partnerService.parametersAddadress).subscribe({next:o=>{this.getPartnerByuuid()},error:o=>{console.log(o.message)}})})}getPartnerByuuid(){this.userServicer.user$.subscribe({next:n=>{this.partnerService.getPartnerByuuid(n.id).subscribe({next:e=>{this.oldAvatar=e.logo,this.partnerService.getAllAddresseBytenantId().subscribe(o=>{this.addresseList=o}),this.partner=e,this.donneesGeneral.controls.uuid.setValue(e.id),this.partner.logo=`${mt.N.partnersUrl}/partners/loadFile/`+e.logo,this.urlLogo=this.partner.logo;let a=Object.assign({},this.donneesGeneral.getRawValue(),this.partner);this.donneesGeneral.patchValue(a),this.Donneesspecifiques.patchValue(a),this.partnerService.getAllAddresseBytenantId().subscribe(o=>{this.addresseList=o})},error:e=>{console.log(e.message)}})}})}modifierDonnesEntreprise(){const n={uuid:this.donneesGeneral.controls.uuid.value,email:this.donneesGeneral.controls.email.value,trade_register:this.donneesGeneral.controls.trade_register.value,tenant_id:this.partner.tenant_id,patent:this.donneesGeneral.controls.email.value,logo:this.partner.logo,patent_asset:this.partner.patent_asset,trade_registry_asset:this.partner.trade_registry_asset,company_name:this.donneesGeneral.controls.company_name.value,phone_number:this.donneesGeneral.controls.phone_number.value,web_site:this.donneesGeneral.controls.web_site.value,type_entreprise:this.Donneesspecifiques.controls.type_entreprise.value,activity_type:this.Donneesspecifiques.controls.activity_type.value,owner:this.Donneesspecifiques.controls.owner.value,adresse:this.Donneesspecifiques.controls.adresse.value,manager:this.Donneesspecifiques.controls.manager.value,capital:this.Donneesspecifiques.controls.capital.value,devis:this.Donneesspecifiques.controls.devis.value,verified:!0,created:1e3};let e=this.personalPicture;null==e?(n.logo=this.oldAvatar,this.partnerService.updateParttnersansImage(n).subscribe({next:a=>{this.toast.success({detail:"Modification",summary:"Modification effectu\xe9e avec succ\xe8s",duration:5e3})},error:a=>{this.toast.error({detail:"Modification",summary:"Modification ",duration:5e3})},complete:()=>{}})):this.partnerService.ModifyProfile(n,e).subscribe({next:a=>{const o={url:this.urlLogo.toString(),name:n.company_name,email:n.email};this.imageService.sendData5(o),this.toast.success({detail:"Modification",summary:"Modification effectu\xe9e avec succ\xe8s",duration:5e3})},error:a=>{this.toast.error({detail:"Modification",summary:"Modification ",duration:5e3})},complete:()=>{}})}convertDataUrlToBlob(n){const e=n.split(","),a=e[0].match(/:(.*?);/)[1],o=atob(e[1]);let s=o.length;const m=new Uint8Array(s);for(;s--;)m[s]=o.charCodeAt(s);return new Blob([m],{type:a})}onSelectFile(n){const e=new File([this.convertDataUrlToBlob(n)],"filename",{type:"image/png"});this.logoPicture=e,this.personalPicture=e,this.urlLogo=n}openCrapDialog(n){this.dialog.open(bt.U,{data:{element:n}}).afterClosed().subscribe(a=>{a&&this.onSelectFile(a)})}openConfirmationDialog(){this._fuseConfirmationService.open(this.configValid).afterClosed().subscribe(e=>{console.log(e)})}}O.\u0275fac=function(n){return new(n||O)(t.Y36(d.uw),t.Y36(xt.e),t.Y36(Ct.K),t.Y36(_t.b),t.Y36(T.F0),t.Y36(t.sBO),t.Y36(R.s),t.Y36(Tt.R),t.Y36(yt.A))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-donnees-entreprise"]],decls:1,vars:0,consts:[[4,"transloco"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-secondary"],[1,"flex-auto","p-6","sm:p-10"],[1,"h-400","min-h-400","max-h-400"],[1,"rtl:rtlsubmenu",3,"label"],[3,"formGroup","ngSubmit"],["f","ngForm"],[1,"container","gap-x-2","gap-y-3","mx-10"],[1,"grid","gap-6","mb-6","md:grid-cols-3","mt-8","md:ml-4","place-items-left","self-center"],[1,"md:col-span-1","sm:m-auto"],["alt","Current profile photo",1,"h-50","w-50","object-cover","border-8","border-gray-300","rounded-full",3,"src"],[1,"md:col-span-2","items-center","my-auto","ml-0"],["for","demo-file",1,"label-button-yellow-plus","rtl:text-xl"],["type","file","id","demo-file","name","logo","accept","image/png, image/jpeg",1,"demo-file",2,"visibility","hidden",3,"change"],[1,"grid","gap-6","mb-6","md:grid-cols-2"],[1,"md:col-span-2"],["appearance","outline",1,"w-full"],["matInput","","placeholder","Nom d'entreprise","formControlName","company_name","required",""],[4,"ngIf"],["appearance","outline",1,"flex-auto","w-full"],["matInput","","placeholder","Email","formControlName","email","required",""],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["appearance","outline","disabled","",1,"w-full"],["matInput","","placeholder","Identifiant unique","readonly","","formControlName","trade_register","required",""],["matInput","","placeholder","Num\xe9ro de t\xe9l\xe9phone","formControlName","phone_number","type","number","min","10000000","max","99999999","required",""],["matInput","","placeholder","Site web","formControlName","web_site","required",""],[1,"grid","justify-items-end"],["type","submit",1,"button-yellow","rtl:text-3xl",3,"disabled"],[1,"grid","mb-6","md:grid-cols-3","mt-8","md:ml-4","place-items-left","self-center"],[1,"md:col-span-2","md:items-baseline","md:my-auto","ml-0","mx-sm:justify-self-center","mx-sm:mt-4"],["formControlName","type_entreprise","required",""],["value","SUARL"],["value","SARL"],["formControlName","activity_type","required",""],["value","TOTALLY_EXPORTING"],["value","PARTIALLY_EXPORTING"],["value","ONSHORE"],["matInput","","formControlName","owner","required",""],["matInput","","placeholder","G\xe9rant","formControlName","manager","required",""],[1,"flex","inline"],[1,"w-full"],["formControlName","adresse","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"mt-1","ml-1"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-10","text-yellow-400",3,"svgIcon"],["matInput","","placeholder","Capital","formControlName","capital","required",""],["formControlName","devis","required",""],["value","DINAR"],["value","EURO"],["value","DOLLAR"],["lass","rtl:rtlsubmenu",3,"label"],[1,"row"],[1,"col-md-12"],[1,"tree"],["href","#",1,"parent"],["src","./assets/imgs/stru/7.jpg",1,"image2"],["src","./assets/imgs/stru/b-img.svg",1,"image1"],["href","#"],["src","./assets/imgs/stru/b-img.svg"],["src","./assets/imgs/stru/empl.png"],[1,"label"],[3,"value"]],template:function(n,e){1&n&&t.YNc(0,Ut,187,44,"ng-container",0)},dependencies:[u.sg,u.O5,y.uX,y.SP,Y.Hw,A.Nt,h.KE,h.hX,h.bx,h.qo,h.R9,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.qQ,r.Fd,at.RK,K.KI,r.sg,r.u,w.gD,l.ey],styles:['.tree[_ngcontent-%COMP%]{width:100%;height:auto;text-align:center}.tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-top:20px;position:relative;transition:.5s}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-table;text-align:center;list-style-type:none;position:relative;padding:10px;transition:.5s}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before, .tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:50%;border-top:1px solid #ccc;width:51%;height:10px}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{right:auto;left:50%;border-left:1px solid #ccc}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:only-child:after, .tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:only-child:before{display:none}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:only-child{padding-top:0}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:before, .tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:after{border:0 none}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before{border-right:1px solid #ccc;border-radius:0 5px 0 0;-webkit-border-radius:0 5px 0 0;-moz-border-radius:0 5px 0 0}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child:after{border-radius:5px 0 0;-webkit-border-radius:5px 0 0 0;-moz-border-radius:5px 0 0 0}.tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:50%;border-left:1px solid #ccc;width:0;height:20px}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;display:inline-grid;text-decoration-line:none;border-radius:5px;transition:.5s}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;margin-bottom:10px!important;border-radius:100px;margin:auto}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;padding:8px;font-size:15px;text-transform:uppercase;letter-spacing:1px;font-weight:500;font-family:Poppins-Regular}.tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover + ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:rgba(248,246,200,.44);color:#000}.parent[_ngcontent-%COMP%]{position:relative;top:0;left:0}.image1[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:1;width:140px}.image2[_ngcontent-%COMP%]{position:absolute;top:27px;left:27px;width:115px!important;height:115px!important;border:#1da1f2 15px;z-index:3}']});var _=c(30671),z=c(98739),P=c(61135),W=(()=>{return(i=W||(W={})).ESPECE_PAYMENT="CSH",i.CHEQUE_PAYMENT="CHQ",i.TRAITE_PAYMENT="PRO",i.VIREMENT_PAYMENT="VIR",i.CARD_PAYMENT="CRD",W;var i})(),J=(()=>{return(i=J||(J={})).ACHAT="ACHAT",i.VENTE="VENTE",J;var i})();class It{constructor(n,e,a,o,s,m,f,C,G,lt,pa,ha,ga,fa,va){this.caisse=n,this.deadlinedate=e,this.valueDate=a,this.devise=o,this.id=s,this.infosvirement=m,this.invoice=f,this.amount=C,this.nomtraite=G,this.numcheque=lt,this.payType=pa,this.status=ha,this.uuid=ga,this.tier=fa,this.refInvoice=va}}class Ft{constructor(n,e,a,o,s,m){this.left_to_pay=n,this.percentage_rs=e,this.total_payed=a,this.total_rs=o,this.transactions=s,this.sens=m}}var X=(()=>{return(i=X||(X={})).DEBIT="DEBIT",i.CREDIT="CREDIT",X;var i})();class dt{constructor(n,e,a,o,s,m,f,C,G,lt){this.amount=n,this.id=e,this.invoice=a,this.isdeleted=o,this.percentage=s,this.solde=m,this.status=f,this.tiers=C,this.uuid=G,this.valueDate=lt}}var ot=c(81794),tt=c(46345);class N{constructor(n,e,a){this.fournisseurService=n,this.commonService=e,this.partnerService=a}ngOnInit(){this.initData()}initData(){this.fournisseurService.gettiers(this.invoice.invoice.customer).subscribe(n=>{this.fournisseur=n;for(let e of this.fournisseur.tiers_address){if(e.isDefault){this.defaultFournisseurAddress=e;break}this.defaultFournisseurAddress=this.fournisseur.tiers_address[0]}}),this.partnerService.getadresse(this.invoice.invoice.partnerAdress).subscribe(n=>{this.partnerAddress=n}),this.partnerService.getPartner().subscribe(n=>{this.partner=n}),this.montantNet=this.invoice.invoice.total_ttc-this.invoice.retenue.amount}save(){this.commonService.generateSpecificDocRetenueSource(this.invoice,this.partner,this.partnerAddress,this.montantNet,this.fournisseur,this.defaultFournisseurAddress)}}N.\u0275fac=function(n){return new(n||N)(t.Y36(ot.K),t.Y36(tt.v),t.Y36(_t.b))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-retenue-source-doc"]],inputs:{invoice:"invoice"},decls:142,vars:26,consts:[[1,"m-16"],[1,"grid","grid-cols-2","items-center","gap-30"],[1,"flex","flex-col"],[1,"text-xl","font-semibold","text-center"],[1,"text-xl","font-bold","text","text-center"],[1,"text-center","my-10"],[1,"border-4","border-b","border-black"],[1,"mx-0.5","my-5"],[1,"grid","grid-cols-2","gap-12"],[1,"text-xl","font-bold"],[1,"text-center","font-semibold"],[1,"border-collapse"],[1,"text-center"],[1,"border-2","border-black"],[1,"flex","flex-col","mt-4"],[1,"mb-4"],[1,"font-bold"],[1,"table-fixed","border-collapse","w-full"],[1,"border-4","border-black","w-[70%]","text-xl","font-bold"],[1,"border-4","border-black","text-center","mx-2"],[1,"border-4","border-black","w-[70%]"],[1,"list-inside","list-disc","ml-2"],[1,"flex","flex-row-reverse"],[1,"border-4","border-black","text-center","mx-2","font-bold"],[1,"border-4","border-b","border-t-[0.1px]","border-black"],[1,"mx-0.5"],[1,"grid","grid-cols-2","gap-12","items-center"],[1,"grid","grid-cols-2","ml-2","items-center"],[1,"border-2","border-black","w-[70%]"],[1,"flex","flex-col","my-4"],[1,"border-4","border-black"],[1,"my-5","flex","justify-center","mx-40"],[1,"flex","justify-center","my-5"],[1,"text-xl","font-bold","ml-40"],[1,"flex","justify-center","mt-2","mb-8"],[1,"text-l","font-bold","ml-80"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"REPUBLIQUE TUNISIENNE"),t.qZA(),t.TgZ(5,"span",3),t._uU(6,"MINISTERE DU PLAN ET DES FINANCES DIRECTION GENERALE DU CONTROLE FISCAL"),t.qZA()(),t.TgZ(7,"span",4),t._uU(8,"CERTIFICAT DE RETENUE D'IMPOT SUR LE REVENU OU D'IMPORT SUR LES SOCIETES"),t.qZA()(),t.TgZ(9,"div",5)(10,"span"),t._uU(11),t.ALo(12,"date"),t.qZA()(),t.TgZ(13,"div")(14,"div",6)(15,"div",7)(16,"div",8)(17,"span",9),t._uU(18,"A - PERSONNE OU ORGANISME PAYEUR : "),t.qZA(),t.TgZ(19,"div",2)(20,"span",10),t._uU(21,"IDENTIFIANT"),t.qZA(),t.TgZ(22,"table",11)(23,"thead")(24,"tr",12)(25,"th",13),t._uU(26,"Matricule Fiscal"),t.qZA(),t.TgZ(27,"th",13),t._uU(28,"Code T.V.A"),t.qZA(),t.TgZ(29,"th",13),t._uU(30,"Code Cat\xe9gorie"),t.qZA(),t.TgZ(31,"th",13),t._uU(32,"N\xb0 Etab. S\xe9condaire"),t.qZA()()(),t.TgZ(33,"tbody")(34,"tr",12)(35,"td",13),t._uU(36),t.qZA(),t.TgZ(37,"td",13),t._uU(38,"N"),t.qZA(),t.TgZ(39,"td",13),t._uU(40,"M"),t.qZA(),t.TgZ(41,"td",13),t._uU(42,"0000"),t.qZA()()()()()(),t.TgZ(43,"div",14)(44,"span",15),t._uU(45,"D\xe9nomination de la personne ou de l'organisme payeur : "),t.TgZ(46,"span",16),t._uU(47),t.qZA()(),t.TgZ(48,"span"),t._uU(49),t.qZA()()()(),t.TgZ(50,"div")(51,"table",17)(52,"tr")(53,"td",18),t._uU(54,"B - RETENUES EFFECTUEES SUR :"),t.qZA(),t.TgZ(55,"td",19),t._uU(56,"MONTANT BRUT"),t.qZA(),t.TgZ(57,"td",19),t._uU(58),t.qZA(),t.TgZ(59,"td",19),t._uU(60,"MONTANT NET"),t.qZA()(),t.TgZ(61,"tr")(62,"td",20)(63,"ul",21)(64,"li"),t._uU(65,"Honoraire, commissions, courtages, vacations et loyers ......."),t.qZA(),t.TgZ(66,"li"),t._uU(67),t.qZA(),t.TgZ(68,"li"),t._uU(69,"Revenus des comptes sp\xe9ciaux d'eparne ouverts aupr\xe9s des banques."),t.qZA(),t.TgZ(70,"li"),t._uU(71,"Revenus des capitaux mobilers ......."),t.qZA(),t.TgZ(72,"li"),t._uU(73,"Revenus des bons de caisse au porteur ......"),t.qZA()()(),t.TgZ(74,"td",19),t._uU(75),t.qZA(),t.TgZ(76,"td",19),t._uU(77),t.qZA(),t.TgZ(78,"td",19),t._uU(79),t.qZA()(),t.TgZ(80,"tr")(81,"td",18)(82,"span",22),t._uU(83," Total G\xe9n\xe9ral "),t.qZA()(),t.TgZ(84,"td",23),t._uU(85),t.qZA(),t.TgZ(86,"td",23),t._uU(87),t.qZA(),t.TgZ(88,"td",23),t._uU(89),t.qZA()()()(),t.TgZ(90,"div",24)(91,"div",7)(92,"span",9),t._uU(93,"C - BENEFICIAIRE : "),t.qZA()(),t.TgZ(94,"div",25)(95,"div",26)(96,"div",27)(97,"span"),t._uU(98," N\xb0 de la carte d'identit\xe9 ou de s\xe9jour pour les \xe9trangers "),t.qZA(),t._UZ(99,"input",28),t.qZA(),t.TgZ(100,"div",2)(101,"span",10),t._uU(102,"IDENTIFIANT"),t.qZA(),t.TgZ(103,"table",11)(104,"thead")(105,"tr",12)(106,"th",13),t._uU(107,"Matricule Fiscal"),t.qZA(),t.TgZ(108,"th",13),t._uU(109,"Code T.V.A"),t.qZA(),t.TgZ(110,"th",13),t._uU(111,"Code Cat\xe9gorie"),t.qZA(),t.TgZ(112,"th",13),t._uU(113,"N\xb0 Etab. S\xe9condaire"),t.qZA()()(),t.TgZ(114,"tbody")(115,"tr",12)(116,"td",13),t._uU(117),t.qZA(),t.TgZ(118,"td",13),t._uU(119),t.qZA(),t.TgZ(120,"td",13),t._uU(121,"M"),t.qZA(),t.TgZ(122,"td",13),t._uU(123,"0000"),t.qZA()()()()()(),t.TgZ(124,"div",29)(125,"span"),t._uU(126),t.qZA(),t.TgZ(127,"span"),t._uU(128),t.qZA(),t.TgZ(129,"span"),t._uU(130,"Adresse de R\xe9sidence : _______"),t.qZA()()()(),t.TgZ(131,"div",30)(132,"div",31)(133,"span",12),t._uU(134,"Je soussign\xe9, certifie exacts les renseignements figurant sur le pr\xe9sent certificat et m'expose aux sanctions pr\xe9vues par la loi pour toute inexactitude"),t.qZA()(),t.TgZ(135,"div",32)(136,"span",33),t._uU(137),t.ALo(138,"date"),t.qZA()(),t.TgZ(139,"div",34)(140,"span",35),t._uU(141," Cachet et signature du payeur "),t.qZA()()()()()),2&n&&(t.xp6(11),t.hij("Retenue effectu\xe9e le : ",t.xi3(12,20,e.invoice.invoice.invoiceDate,"dd/MM/yyyy"),""),t.xp6(25),t.Oqu(null==e.partner?null:e.partner.trade_register),t.xp6(11),t.hij(' Soci\xe9t\xe9 "',null==e.partner?null:e.partner.company_name,'"'),t.xp6(2),t.hij("Adresse : ",null==e.partnerAddress?null:e.partnerAddress.text,""),t.xp6(9),t.hij("RETENUE ",e.invoice.retenue.percentage,"%"),t.xp6(9),t.AsE("Factures N\xb0",e.invoice.invoice.invoiceNumber," \xa0 R-S ",e.invoice.retenue.percentage,"%"),t.xp6(8),t.Oqu(e.invoice.invoice.total_ttc.toFixed(3).replace(".",",")),t.xp6(2),t.Oqu(e.invoice.retenue.amount.toFixed(3).replace(".",",")),t.xp6(2),t.Oqu(e.montantNet.toFixed(3).replace(".",",")),t.xp6(6),t.Oqu(e.invoice.invoice.total_ttc.toFixed(3).replace(".",",")),t.xp6(2),t.Oqu(e.invoice.retenue.amount.toFixed(3).replace(".",",")),t.xp6(2),t.Oqu(e.montantNet.toFixed(3).replace(".",",")),t.xp6(28),t.Oqu(null==e.fournisseur?null:e.fournisseur.tax_Registration),t.xp6(2),t.Oqu(null!=e.fournisseur&&e.fournisseur.vat_Liable?"A":"N"),t.xp6(7),t.hij("Nom et Pr\xe9noms ou Raison Sociale : ",(null==e.fournisseur?null:e.fournisseur.name)+" "+(null==e.fournisseur?null:e.fournisseur.alternative_Name)," "),t.xp6(2),t.AsE("Adresse professionnelle : ",null==e.defaultFournisseurAddress?null:e.defaultFournisseurAddress.location," / ",null==e.defaultFournisseurAddress?null:e.defaultFournisseurAddress.zipCode,""),t.xp6(9),t.AsE(" A ",null==e.partnerAddress?null:e.partnerAddress.country," le : ",t.xi3(138,23,e.invoice.retenue.created,"dd/MM/yyyy")," "))},dependencies:[u.uU]});var b=c(37084);class q{constructor(){this.panelOpenState=!1}ngOnInit(){}saveRS(){this.childComponent.save()}}q.\u0275fac=function(n){return new(n||q)},q.\u0275cmp=t.Xpm({type:q,selectors:[["wind-retenue-source"]],viewQuery:function(n,e){if(1&n&&t.Gf(N,5),2&n){let a;t.iGM(a=t.CRH())&&(e.childComponent=a.first)}},inputs:{retenue:"retenue",devise:"devise",invoice:"invoice"},decls:10,vars:4,consts:[[3,"opened","closed"],[1,"border","rounded-2xl","my-2"],[3,"invoice"]],template:function(n,e){1&n&&(t.TgZ(0,"mat-expansion-panel",0),t.NdJ("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),t.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-panel-description"),t._uU(5," MONTANT : "),t.TgZ(6,"span"),t._uU(7),t.qZA()()(),t.TgZ(8,"div",1),t._UZ(9,"app-retenue-source-doc",2),t.qZA()()),2&n&&(t.xp6(3),t.hij(" Retenue \xe0 la source: ",null==e.retenue?null:e.retenue.percentage," % "),t.xp6(4),t.AsE(" \xa0 ",null==e.retenue?null:e.retenue.amount," ",e.devise,""),t.xp6(2),t.Q6J("invoice",e.invoice))},dependencies:[b.ib,b.yz,b.yK,b.u4,N]});var x=c(29443),st=c(45386),ut=c(71948),Mt=c(15439),pt=c.n(Mt),Et=c(30895),rt=c(99602);function kt(i,n){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Montant depass\xe9e "),t.qZA())}function St(i,n){if(1&i&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.s9C("value",e.uuid),t.xp6(1),t.Oqu(e.label)}}function Dt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",3)(1,"mat-label"),t._uU(2,"Information du virement"),t.qZA(),t.TgZ(3,"input",14),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeVirementInfo())}),t.qZA()()}}function Bt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",3)(1,"mat-label"),t._uU(2,"Num\xe9ro "),t.qZA(),t.TgZ(3,"input",15),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeNumTraite())}),t.qZA()()}}function Rt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",3)(1,"mat-label"),t._uU(2,"Num\xe9ro "),t.qZA(),t.TgZ(3,"input",16),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeNumCheque())}),t.qZA()()}}function Yt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",3)(1,"mat-label"),t._uU(2,"Date d'\xe9ch\xe9ance"),t.qZA(),t.TgZ(3,"input",17),t.NdJ("dateChange",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeDateEcheance())}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",11)(5,"mat-datepicker",null,18),t.qZA()}if(2&i){const e=t.MAs(6);t.xp6(3),t.Q6J("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}class Q{constructor(n,e){this._formBuilder=n,this.fundService=e,this.panelOpenState=!1,this.new_left=new t.vpe,this.listTransactionForPayment=new t.vpe,this.addPayment=new t.vpe,this.listeCaisses=[]}ngAfterViewInit(){this.addPayment.emit(this.payment)}ngOnInit(){this.stagingLeftToPayValue=this.left_to_pay,this.initList(),this.initForms()}initForms(){switch(this.paymentType){case"Virement":this.payment=this._formBuilder.group({montant:["",r.kI.required],caisse:["",r.kI.required],date_reglement:["",r.kI.required],info_virement:[""]});break;case"Traite":this.payment=this._formBuilder.group({montant:["",r.kI.required],caisse:["",r.kI.required],num_traite:["",r.kI.required],date_reglement:["",r.kI.required],date_decheance:["",r.kI.required]});break;case"Ch\xe9que":this.payment=this._formBuilder.group({montant:["",r.kI.required],caisse:["",r.kI.required],num_cheque:["",r.kI.required],date_reglement:["",r.kI.required],date_decheance:["",r.kI.required]});break;default:this.payment=this._formBuilder.group({montant:["",r.kI.required],caisse:["",r.kI.required],date_reglement:["",r.kI.required]})}if(this.disabled)switch(this.payment.get("montant").setValue(this.line.amount),this.payment.get("montant").disable(),this.payment.get("caisse").setValue(this.line.caisse),this.payment.get("caisse").disable(),this.payment.get("date_reglement").setValue(this.line.valueDate),this.payment.get("date_reglement").disable(),this.paymentType){case"Virement":this.payment.get("info_virement").setValue(this.line.infosvirement),this.payment.get("info_virement").disable();break;case"Traite":this.payment.get("num_traite").setValue(this.line.nomtraite),this.payment.get("num_traite").disable(),this.payment.get("date_decheance").setValue(this.line.deadlinedate),this.payment.get("date_decheance").disable();break;case"Ch\xe9que":this.payment.get("num_cheque").setValue(this.line.numcheque),this.payment.get("num_cheque").disable(),this.payment.get("date_decheance").setValue(this.line.deadlinedate),this.payment.get("date_decheance").disable()}}initList(){this.fundService.getAllCaisses().subscribe(n=>{this.listeCaisses=n})}paymentSubmit(){}changeCaisse(){this.line.caisse=this.payment.get("caisse").value}changeDateReglement(){let n=this.payment.get("date_reglement").value.c,e=new Date(n.year,n.month-1,n.day);this.line.valueDate=pt()(e).format("YYYY-MM-DD")}changeDateEcheance(){let n=this.payment.get("date_decheance").value.c,e=new Date(n.year,n.month-1,n.day);this.line.deadlinedate=pt()(e).format("YYYY-MM-DD")}changeMontant(){this.payment.get("montant").value>this.stagingLeftToPayValue?this.payment.controls.montant.setErrors({amountExceeded:!0}):(this.line.amount=this.payment.get("montant").value,this.line.devise=this.invoice.devise,this.new_left.emit(this.stagingLeftToPayValue-this.payment.get("montant").value))}changeVirementInfo(){this.line.infosvirement=this.payment.get("info_virement").value}changeNumTraite(){this.line.nomtraite=this.payment.get("num_traite").value}changeNumCheque(){this.line.numcheque=this.payment.get("num_cheque").value}}function Ot(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",24)(1,"label",25),t._uU(2,"Retenue \xe0 la source"),t.qZA(),t.TgZ(3,"div",26)(4,"div",27)(5,"input",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changeStatusRS(!0))}),t.qZA(),t.TgZ(6,"p",29),t._uU(7,"Oui"),t.qZA()(),t.TgZ(8,"div",27)(9,"input",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changeStatusRS(!1))}),t.qZA(),t.TgZ(10,"p",29),t._uU(11,"Non"),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(5),t.Q6J("checked",e.checkRS),t.xp6(4),t.Q6J("checked",!e.checkRS)}}function Pt(i,n){1&i&&t._UZ(0,"div",30)}function Jt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",31)(2,"mat-radio-group",32),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeValueRS(o))})("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.valueRS=o)}),t.TgZ(3,"mat-radio-button",33),t._uU(4,"0.5 %"),t.qZA(),t.TgZ(5,"mat-radio-button",33),t._uU(6,"1.5 %"),t.qZA(),t.TgZ(7,"mat-radio-button",33),t._uU(8,"2.5 %"),t.qZA(),t.TgZ(9,"mat-radio-button",33),t._uU(10,"5 %"),t.qZA(),t.TgZ(11,"mat-radio-button",33),t._uU(12,"10 %"),t.qZA(),t.TgZ(13,"mat-radio-button",33),t._uU(14,"15 %"),t.qZA(),t.TgZ(15,"mat-radio-button",33),t._uU(16,"20 %"),t.qZA()()(),t.TgZ(17,"div",31)(18,"span",9),t._uU(19,"MONTANT EXCLU : "),t.qZA(),t.TgZ(20,"span"),t._uU(21),t.qZA()(),t.TgZ(22,"div",34)(23,"span",9),t._uU(24,"NET \xc0 PAYER : "),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.qZA()(),t.TgZ(27,"div",35)(28,"button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.compenser())}),t._uU(29,"Compenser"),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngModel",e.valueRS),t.xp6(1),t.Q6J("value",.5),t.xp6(2),t.Q6J("value",1.5),t.xp6(2),t.Q6J("value",2.5),t.xp6(2),t.Q6J("value",5),t.xp6(2),t.Q6J("value",10),t.xp6(2),t.Q6J("value",15),t.xp6(2),t.Q6J("value",20),t.xp6(6),t.AsE("",e.total_RS,"\xa0",e.invoice.devise," TTC "),t.xp6(5),t.AsE(" ",e.new_total,"\xa0",e.invoice.devise," TTC "),t.xp6(2),t.Q6J("disabled",0==e.valueRS)}}function Qt(i,n){if(1&i&&(t.TgZ(0,"div",21),t.YNc(1,Ot,12,2,"div",22),t.YNc(2,Pt,1,0,"div",23),t.YNc(3,Jt,30,13,"div",22),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.invoice.total_ttc>e.defaultRetenueValue),t.xp6(1),t.Q6J("ngIf",e.checkRS),t.xp6(1),t.Q6J("ngIf",e.checkRS)}}function jt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.removeRS())}),t._UZ(1,"mat-icon",44),t.qZA()}}function Vt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.saveRS())}),t._UZ(1,"mat-icon",45),t.qZA()}}function Gt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",37)(2,"div",38),t._UZ(3,"wind-retenue-source",39),t.qZA(),t.TgZ(4,"div",40),t.YNc(5,jt,2,0,"button",41),t.YNc(6,Vt,2,0,"ng-template",null,42,t.W1O),t.qZA()()()),2&i){const e=t.MAs(7),a=t.oxw();t.xp6(3),t.Q6J("retenue",a.invoiceData.retenue)("devise",a.invoice.devise)("invoice",a.invoiceData),t.xp6(2),t.Q6J("ngIf","NON_PAYE"===a.invoice.status)("ngIfElse",e)}}function Ht(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",37)(2,"div",38),t._UZ(3,"wind-common-payment",46),t.qZA(),t.TgZ(4,"div",40),t._UZ(5,"img",47),t.qZA()()()),2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!0)("paymentType","Carte")}}function $t(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",37)(2,"div",38),t._UZ(3,"wind-common-payment",46),t.qZA(),t.TgZ(4,"div",40),t._UZ(5,"img",47),t.qZA()()()),2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!0)("paymentType","Espece")}}function Kt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",37)(2,"div",38),t._UZ(3,"wind-common-payment",46),t.qZA(),t.TgZ(4,"div",40),t._UZ(5,"img",47),t.qZA()()()),2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!0)("paymentType","Virement")}}function zt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",37)(2,"div",38),t._UZ(3,"wind-common-payment",46),t.qZA(),t.TgZ(4,"div",40),t._UZ(5,"img",47),t.qZA()()()),2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!0)("paymentType","Traite")}}function Wt(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",37)(2,"div",38),t._UZ(3,"wind-common-payment",46),t.qZA(),t.TgZ(4,"div",40),t._UZ(5,"img",47),t.qZA()()()),2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!0)("paymentType","Ch\xe9que")}}function Xt(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ht,6,6,"div",15),t.YNc(2,$t,6,6,"div",15),t.YNc(3,Kt,6,6,"div",15),t.YNc(4,zt,6,6,"div",15),t.YNc(5,Wt,6,6,"div",15),t.qZA()),2&i){const e=n.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.CARD_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.ESPECE_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.VIREMENT_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.TRAITE_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.CHEQUE_PAYMENT)}}function te(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"div",38)(3,"wind-common-payment",48),t.NdJ("new_left",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLeftToPay(o))})("addPayment",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addedPayment(o))}),t.qZA()(),t.TgZ(4,"div",40)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.remove(o))}),t._UZ(6,"mat-icon",44),t.qZA()()()()}if(2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",s.listTransactions.length+a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!1)("paymentType","Carte")}}function ee(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"div",38)(3,"wind-common-payment",48),t.NdJ("new_left",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLeftToPay(o))})("addPayment",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addedPayment(o))}),t.qZA()(),t.TgZ(4,"div",40)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.remove(o))}),t._UZ(6,"mat-icon",44),t.qZA()()()()}if(2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",s.listTransactions.length+a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!1)("paymentType","Espece")}}function ie(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"div",38)(3,"wind-common-payment",48),t.NdJ("new_left",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLeftToPay(o))})("addPayment",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addedPayment(o))}),t.qZA()(),t.TgZ(4,"div",40)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.remove(o))}),t._UZ(6,"mat-icon",44),t.qZA()()()()}if(2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",s.listTransactions.length+a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!1)("paymentType","Virement")}}function ne(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"div",38)(3,"wind-common-payment",48),t.NdJ("new_left",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLeftToPay(o))})("addPayment",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addedPayment(o))}),t.qZA()(),t.TgZ(4,"div",40)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.remove(o))}),t._UZ(6,"mat-icon",44),t.qZA()()()()}if(2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",s.listTransactions.length+a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!1)("paymentType","Traite")}}function ae(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"div",37)(2,"div",38)(3,"wind-common-payment",48),t.NdJ("new_left",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateLeftToPay(o))})("addPayment",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addedPayment(o))}),t.qZA()(),t.TgZ(4,"div",40)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.remove(o))}),t._UZ(6,"mat-icon",44),t.qZA()()()()}if(2&i){const e=t.oxw(),a=e.index,o=e.$implicit,s=t.oxw();t.xp6(3),t.Q6J("lastIndex",s.listTransactions.length+a)("line",o)("invoice",s.invoice)("left_to_pay",s.new_left_to_pay)("disabled",!1)("paymentType","Ch\xe9que")}}function oe(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,te,7,6,"div",15),t.YNc(2,ee,7,6,"div",15),t.YNc(3,ie,7,6,"div",15),t.YNc(4,ne,7,6,"div",15),t.YNc(5,ae,7,6,"div",15),t.qZA()),2&i){const e=n.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.CARD_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.ESPECE_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.VIREMENT_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.TRAITE_PAYMENT),t.xp6(1),t.Q6J("ngIf",e.payType===a.paymentTypeEnum.CHEQUE_PAYMENT)}}function se(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",49)(1,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addLine(o.paymentTypeEnum.ESPECE_PAYMENT))}),t._uU(2," Esp\xe8ces "),t.qZA(),t.TgZ(3,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addLine(o.paymentTypeEnum.CHEQUE_PAYMENT))}),t._uU(4," Ch\xe8que "),t.qZA(),t.TgZ(5,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addLine(o.paymentTypeEnum.VIREMENT_PAYMENT))}),t._uU(6," Virement bancaire "),t.qZA(),t.TgZ(7,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addLine(o.paymentTypeEnum.TRAITE_PAYMENT))}),t._uU(8," Traite "),t.qZA(),t.TgZ(9,"button",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addLine(o.paymentTypeEnum.CARD_PAYMENT))}),t._uU(10," Carte bancaire "),t.qZA()()}}function re(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.validerPayment())}),t._uU(1,"Payer"),t.qZA()}}Q.\u0275fac=function(n){return new(n||Q)(t.Y36(r.qu),t.Y36(Et.t))},Q.\u0275cmp=t.Xpm({type:Q,selectors:[["wind-common-payment"]],inputs:{lastIndex:"lastIndex",line:"line",invoice:"invoice",disabled:"disabled",paymentType:"paymentType",left_to_pay:"left_to_pay"},outputs:{new_left:"new_left",listTransactionForPayment:"listTransactionForPayment",addPayment:"addPayment"},decls:33,vars:14,consts:[[3,"opened","closed"],[3,"formGroup","ngSubmit"],[1,"flex","flex-col","justify-center"],["appearance","outline",1,"w-[50%]","m-auto"],["matInput","","formControlName","montant",3,"change"],["matPrefix","",1,"p-4"],[4,"ngIf"],["formControlName","caisse",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","class","w-[50%] m-auto",4,"ngIf"],["matInput","","formControlName","date_reglement",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[3,"value"],["matInput","","formControlName","info_virement",3,"change"],["matInput","","formControlName","num_traite",3,"change"],["matInput","","formControlName","num_cheque",3,"change"],["matInput","","formControlName","date_decheance",3,"matDatepicker","dateChange"],["picker2",""]],template:function(n,e){if(1&n&&(t.TgZ(0,"mat-expansion-panel",0),t.NdJ("opened",function(){return e.panelOpenState=!0})("closed",function(){return e.panelOpenState=!1}),t.TgZ(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-panel-description"),t._uU(5," MONTANT : "),t.TgZ(6,"span"),t._uU(7),t.qZA()()(),t.TgZ(8,"form",1),t.NdJ("ngSubmit",function(){return e.paymentSubmit()}),t.TgZ(9,"div",2)(10,"mat-form-field",3)(11,"mat-label"),t._uU(12,"Montant"),t.qZA(),t.TgZ(13,"input",4),t.NdJ("change",function(){return e.changeMontant()}),t.qZA(),t.TgZ(14,"span",5),t._uU(15),t.qZA(),t.YNc(16,kt,2,0,"mat-error",6),t.qZA(),t.TgZ(17,"mat-form-field",3)(18,"mat-label"),t._uU(19,"Caisse"),t.qZA(),t.TgZ(20,"mat-select",7),t.NdJ("selectionChange",function(){return e.changeCaisse()}),t.YNc(21,St,2,2,"mat-option",8),t.qZA()(),t.YNc(22,Dt,4,0,"mat-form-field",9),t.YNc(23,Bt,4,0,"mat-form-field",9),t.YNc(24,Rt,4,0,"mat-form-field",9),t.TgZ(25,"mat-form-field",3)(26,"mat-label"),t._uU(27,"Date de r\xe8glement"),t.qZA(),t.TgZ(28,"input",10),t.NdJ("dateChange",function(){return e.changeDateReglement()}),t.qZA(),t._UZ(29,"mat-datepicker-toggle",11)(30,"mat-datepicker",null,12),t.qZA(),t.YNc(32,Yt,7,2,"mat-form-field",9),t.qZA()()()),2&n){const a=t.MAs(31);t.xp6(3),t.AsE(" # ",e.lastIndex+1," ",e.paymentType," "),t.xp6(4),t.AsE(" \xa0 ",e.line.amount," ",e.line.devise,""),t.xp6(1),t.Q6J("formGroup",e.payment),t.xp6(7),t.Oqu(e.invoice.devise),t.xp6(1),t.Q6J("ngIf",e.payment.controls.montant.hasError("amountExceeded")),t.xp6(5),t.Q6J("ngForOf",e.listeCaisses),t.xp6(1),t.Q6J("ngIf","Virement"==e.paymentType),t.xp6(1),t.Q6J("ngIf","Traite"==e.paymentType),t.xp6(1),t.Q6J("ngIf","Ch\xe9que"==e.paymentType),t.xp6(4),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(3),t.Q6J("ngIf","Traite"==e.paymentType||"Ch\xe9que"==e.paymentType)}},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,l.ey,rt.Mq,rt.hl,rt.nW,h.KE,h.hX,h.TO,h.qo,h.R9,A.Nt,w.gD,b.ib,b.yz,b.yK,b.u4]});class U{constructor(n,e,a,o){this.invoiceData=n,this.buillingService=e,this.toast=a,this.moduleService=o,this.paymentTypeEnum=W,this.listTransactions=[],this.facturelist=[],this.sensTransactions=X,this.checkRS=!1,this.new_total="0",this.listPaymentForms=[],this.RS_model=new dt("",null,"",!1,null,!0,"","","",new Date)}ngOnInit(){this.initList(),this.getConfigPaiment()}initList(){this.invoice=this.invoiceData.invoice,this.invoice.invoicetype===J.VENTE?this.buillingService.getRefundTransactions(this.invoice.uuid).subscribe(n=>{this.listTransactions=n}):this.invoice.invoicetype===J.ACHAT&&this.buillingService.getPayedTransactions(this.invoice.uuid).subscribe(n=>{this.listTransactions=n})}getConfigPaiment(){this.moduleService.getConfig().subscribe(n=>{this.defaultRetenueValue=n.retenue}),this.new_left_to_pay=Number(this.invoice.left_to_pay.toFixed(3)),this.invoiceData.has_retenue&&(this.total_RS=this.invoiceData.retenue.amount)}changeStatusRS(n){this.checkRS=n,n||(this.new_left_to_pay=this.invoice.left_to_pay,this.new_total=this.invoice.total_ttc,this.total_RS="0",this.valueRS=0)}changeValueRS(n){const e=this.invoice.left_to_pay;this.new_total=this.invoice.total_ttc,this.total_RS="0",this.total_RS=(Number(this.new_total)*Number(n)/100).toFixed(2),this.new_total=(Number(this.new_total)-Number(this.total_RS)).toFixed(2),this.new_left_to_pay=(Number(e)-Number(this.total_RS)).toFixed(3)}addLine(n){const e=this.facturelist.length;let a=0;this.facturelist.forEach(s=>{a+=Number(s.amount)}),Number(this.invoice.left_to_pay)-Number(a)>0&&(console.log(this.invoice),this.facturelist.push(new It("",null,null,"",e,"",this.invoice.uuid,"","","",n,"VALIDE","",this.invoice.customer,this.invoice.invoiceNumber)))}remove(n){this.facturelist.splice(n,1);let e=0;this.facturelist.forEach(o=>{e+=Number(o.amount)})}validerPayment(){let n=[];if(n.fill(!1),this.listPaymentForms.forEach((e,a)=>{n[a]=e.valid,e.markAllAsTouched()}),n.every(e=>1==e)){const e=new Ft(this.new_left_to_pay,this.valueRS,this.invoice.left_to_pay,this.total_RS,this.facturelist,"ACHAT"===this.invoice.invoicetype?this.sensTransactions.DEBIT:this.sensTransactions.CREDIT);this.buillingService.payer(e).subscribe(a=>{this.new_left_to_pay=Number(a.left_to_pay.toFixed(3)),this.initList(),this.invoice.status=0==this.new_left_to_pay?"Pay\xe9":this.new_left_to_pay>0?"Partiellement pay\xe9":"Sur pay\xe9",this.facturelist=[],this.toast.success({detail:"Paiment effectu\xe9 avec success",duration:3500})})}}compenser(){const n=new dt(this.total_RS,null,this.invoice.uuid,!1,this.valueRS,!0,"VALIDE",this.invoice.customer,"",new Date);this.buillingService.createRetenueSource(n).subscribe(e=>{this.RS_model=e,this.invoiceData.has_retenue=!0,this.invoiceData.retenue=e,this.toast.success({detail:"Compensation cr\xe9e avec success",duration:3500})})}removeRS(){this.buillingService.getRetenueSourceByInvoiceUuid(this.invoice.uuid).subscribe(n=>{this.buillingService.deleteRetenueSource(n.uuid).subscribe(()=>{this.invoiceData.has_retenue=!1,this.new_left_to_pay=(Number(this.new_left_to_pay)+Number(this.total_RS)).toFixed(3)})})}updateLeftToPay(n){this.new_left_to_pay=n}addedPayment(n){this.listPaymentForms.push(n)}saveRS(){this.retenueSourceChild.saveRS()}}U.\u0275fac=function(n){return new(n||U)(t.Y36(d.WI),t.Y36(x.e),t.Y36(R.s),t.Y36(st.C))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-payment"]],viewQuery:function(n,e){if(1&n&&t.Gf(q,5),2&n){let a;t.iGM(a=t.CRH())&&(e.retenueSourceChild=a.first)}},decls:38,vars:11,consts:[["mat-dialog-content",""],[1,"mt-0","mb-2","p-2"],[1,"flex","justify-center","mb-2"],["svgIcon","heroicons_outline:credit-card",1,"w-[45px]","h-[45px]"],[1,"flex","justify-center","mb-4"],[1,"text-black","dark:text-white","text-2xl"],[1,"mx-auto"],[1,"flex","justify-between"],[1,"flex","flex-col"],[1,"text-xl"],["disabled","",1,"search","text-blue-800","text-center",3,"value"],["disabled","",1,"search","text-red-700","text-center",3,"value"],["disabled","",1,"search","text-green-700","text-center",3,"value"],[1,"grow","my-3","border-b"],["class","border-2 rounded",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","flex justify-center my-6",4,"ngIf"],["mat-dialog-actions","",1,"flex","justify-end","mb-2"],["type","button","class","button-yellow mx-2",3,"click",4,"ngIf"],["type","button","mat-dialog-close","",1,"button-black"],[1,"border-2","rounded"],["class","flex flex-col justify-center",4,"ngIf"],["class","border-b",4,"ngIf"],[1,"flex","flex-col","justify-center"],[1,"text-xl","m-auto","my-4"],[1,"grid","grid-cols-2","gap-40","text-center","m-auto"],[1,"grid-rows-1"],["type","radio",1,"option-input","radio",3,"checked","click"],[1,"text-slate-900","font-semibold","text-center"],[1,"border-b"],[1,"m-auto","mt-2"],[3,"ngModel","ngModelChange"],[3,"value"],[1,"m-auto"],[1,"mx-auto","my-4"],["mat-raised-button","","color","primary",1,"text-white","mx-1",3,"disabled","click"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-11"],[3,"retenue","devise","invoice"],[1,"col-span-1","m-auto"],[3,"click",4,"ngIf","ngIfElse"],["downloadRS",""],[3,"click"],["svgIcon","heroicons_outline:trash"],["svgIcon","heroicons_outline:arrow-circle-down"],[3,"lastIndex","line","invoice","left_to_pay","disabled","paymentType"],["src","assets/imgs/paye.png"],[3,"lastIndex","line","invoice","left_to_pay","disabled","paymentType","new_left","addPayment"],[1,"flex","justify-center","my-6"],["mat-raised-button","","color","accent",1,"text-white","mx-1",3,"click"],["type","button",1,"button-yellow","mx-2",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"mat-icon",3),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Paiement"),t.qZA()()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div")(11,"span",9),t._uU(12,"TOTALE DES AVOIRS"),t.qZA()(),t.TgZ(13,"div"),t._UZ(14,"input",10),t.qZA()(),t.TgZ(15,"div",8)(16,"div")(17,"span",9),t._uU(18,"RESTE \xc0 PAYER"),t.qZA()(),t.TgZ(19,"div"),t._UZ(20,"input",11),t.qZA()(),t.TgZ(21,"div",8)(22,"div")(23,"span",9),t._uU(24,"MONTANT"),t.qZA()(),t.TgZ(25,"div"),t._UZ(26,"input",12),t.qZA()()(),t._UZ(27,"div",13),t.YNc(28,Qt,4,3,"div",14),t.YNc(29,Gt,8,5,"div",15),t.TgZ(30,"div"),t.YNc(31,Xt,6,5,"div",16),t.YNc(32,oe,6,5,"div",16),t.YNc(33,se,11,0,"div",17),t.qZA()(),t.TgZ(34,"div",18),t.YNc(35,re,2,0,"button",19),t.TgZ(36,"button",20),t._uU(37,"Annuler"),t.qZA()()()),2&n&&(t.xp6(14),t.MGl("value","00.00 ",e.invoice.devise," TTC"),t.xp6(6),t.hYB("value","",e.new_left_to_pay," ",e.invoice.devise," TTC"),t.xp6(6),t.hYB("value","",e.invoice.total_ttc," ",e.invoice.devise," TTC"),t.xp6(2),t.Q6J("ngIf",("NON_PAYE"===e.invoice.status||"PARTIELLEMENT_PAYE"===e.invoice.status)&&!e.invoiceData.has_retenue),t.xp6(1),t.Q6J("ngIf",e.invoiceData.has_retenue),t.xp6(2),t.Q6J("ngForOf",e.listTransactions),t.xp6(1),t.Q6J("ngForOf",e.facturelist),t.xp6(1),t.Q6J("ngIf","NON_PAYE"===e.invoice.status||"PARTIELLEMENT_PAYE"===e.invoice.status),t.xp6(2),t.Q6J("ngIf","PAYE"!=e.invoice.status))},dependencies:[u.sg,u.O5,r.JJ,r.On,ut.VQ,ut.U0,at.lW,Y.Hw,d.ZT,d.xY,d.H8,Q,q]});class I{constructor(n,e,a,o,s){this.commonService=n,this.buillingService=e,this.toast=a,this.dialogRef=o,this.devislist=[],this.bonCommandList=[],this.fineshedgenerateBR=new P.X(null),this.tableIndex=s.index,this.devislist=s.devislist,this.factType=s.factType,this.typeTransaction=s.typeTransaction,console.log("dataa",s)}TransfererBCommande(){var n=this.returnTargetList(this.factType);const e=this.commonService.TransfererBCommande(n[this.tableIndex],this.typeTransaction,"CREE","BILLING",this.factType);this.fineshedgenerateBR.next(!1),this.buillingService.getBonCommandeNumber(this.typeTransaction).subscribe(a=>{e.invoiceNumber=a.number,this.fineshedgenerateBR.next(!0)}),this.fineshedgenerateBR.subscribe(a=>{a&&this.buillingService.createBonCommande(e).subscribe(o=>{n[this.tableIndex].lineCommande=o.uuid,n[this.tableIndex].invoice="00000000-0000-0000-0000-000000000000",n[this.tableIndex].deliveryLine="00000000-0000-0000-0000-000000000000",this.toast.success({detail:"Succ\xe8s! devis converti en bon de commande avec succ\xe8s",duration:2e3}),this.dialogRef.close(o)})})}returnTargetList(n){var e;switch(n){case"devis":e=this.devislist;break;case"bon_commande":e=this.bonCommandList}return e}}I.\u0275fac=function(n){return new(n||I)(t.Y36(tt.v),t.Y36(x.e),t.Y36(R.s),t.Y36(d.so),t.Y36(d.WI))},I.\u0275cmp=t.Xpm({type:I,selectors:[["app-bon-commande-confirmation"]],decls:13,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-0"],[1,"flex","justify-center"],["src","assets/imgs/edit.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mt-5"],[1,"text-black","dark:text-white"],["mat-dialog-actions","",1,"flex","justify-center","mb-2","mt-4"],["type","button",1,"button-gray","mr-10"],["type","button",1,"button-yellow",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"label",6),t._uU(7,"\xcates-vous s\xfbr de transfomer ce devis en bon de commande ?"),t.qZA()()(),t.TgZ(8,"div",7)(9,"button",8),t._uU(10,"Non"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return e.TransfererBCommande()}),t._uU(12,"Oui"),t.qZA()()()())},dependencies:[d.uh,d.xY,d.H8]});class F{constructor(n,e,a,o,s){this.commonService=n,this.buillingService=e,this.toast=a,this.dialogRef=o,this.fineshedgenerateBR=new P.X(null),this.tableIndex=s.index,this.devislist=s.devislist,this.bonLivraisonList=s.bonLivraisonList,this.bonCommandList=s.bonCommandList,this.factType=s.factType,this.typeTransaction=s.typeTransaction}TransfererBLivraison(){var n=this.returnTargetList(this.factType),e=this.commonService.TransfererBLivraison(n[this.tableIndex],this.typeTransaction,"NON_LIVRE","BILLING",this.factType);this.fineshedgenerateBR.next(!1),this.buillingService.getBonLivraisonNumber(this.typeTransaction).subscribe(a=>{e.invoiceNumber=a.number,this.fineshedgenerateBR.next(!0)}),this.fineshedgenerateBR.subscribe(a=>{console.log("factType",this.factType),a&&this.buillingService.createBonLivraison(e).subscribe(o=>{n[this.tableIndex].deliveryLine=o.uuid,n[this.tableIndex].lineCommande="00000000-0000-0000-0000-000000000000",n[this.tableIndex].invoice="00000000-0000-0000-0000-000000000000",this.toast.success({detail:"Succ\xe8s! devis converti en bon de livraison avec succ\xe8s",duration:2e3}),this.dialogRef.close(o)})})}returnTargetList(n){var e;switch(n){case"devis":e=this.devislist;break;case"bon_commande":e=this.bonCommandList;break;case"bon_livraison":e=this.bonLivraisonList}return e}}F.\u0275fac=function(n){return new(n||F)(t.Y36(tt.v),t.Y36(x.e),t.Y36(R.s),t.Y36(d.so),t.Y36(d.WI))},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-bon-livraison-confirmation"]],decls:13,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-0"],[1,"flex","justify-center"],["src","assets/imgs/edit.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mt-5"],[1,"text-black","dark:text-white"],["mat-dialog-actions","",1,"flex","justify-center","mb-2","mt-4"],["type","button",1,"button-gray","mr-10"],["type","button",1,"button-yellow",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"label",6),t._uU(7,"\xcates-vous s\xfbr de transfomer ce devis en bon de livraison ?"),t.qZA()()(),t.TgZ(8,"div",7)(9,"button",8),t._uU(10,"Non"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return e.TransfererBLivraison()}),t._uU(12,"Oui"),t.qZA()()()())},dependencies:[d.uh,d.xY,d.H8]});class M{constructor(n,e,a,o,s){this.commonService=n,this.buillingService=e,this.toast=a,this.dialogRef=o,this.fineshedgenerateInvoiceNumber=new P.X(null),this.tableIndex=s.index,this.devislist=s.devislist,this.bonCommandList=s.bonCommandList,this.bonLivraisonList=s.bonLivraisonList,this.factType=s.factType,this.typeTransaction=s.typeTransaction}TransfererInvoice(){var n=this.returnTargetList(this.factType),e=this.commonService.TransfererInvoice(n[this.tableIndex],this.typeTransaction,"NON_PAYE","BILLING",this.factType);this.fineshedgenerateInvoiceNumber.next(!1),this.buillingService.getFactureNumber(this.typeTransaction).subscribe(a=>{e.invoiceNumber=a.number,this.fineshedgenerateInvoiceNumber.next(!0)}),this.fineshedgenerateInvoiceNumber.subscribe(a=>{a&&this.buillingService.createInvoice(e).subscribe(o=>{"devis"==this.factType&&(n[this.tableIndex].invoice=o.uuid),n[this.tableIndex].lineCommande="00000000-0000-0000-0000-000000000000",n[this.tableIndex].deliveryLine="00000000-0000-0000-0000-000000000000",this.toast.success({detail:"Succ\xe8s! devis converti en facture avec succ\xe8s",duration:2e3}),this.dialogRef.close(o)})})}returnTargetList(n){var e;switch(n){case"devis":e=this.devislist;break;case"bon_commande":e=this.bonCommandList;break;case"bon_livraison":e=this.bonLivraisonList}return e}}M.\u0275fac=function(n){return new(n||M)(t.Y36(tt.v),t.Y36(x.e),t.Y36(R.s),t.Y36(d.so),t.Y36(d.WI))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-facture-confirmation"]],decls:13,vars:0,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"mt-0"],[1,"flex","justify-center"],["src","assets/imgs/edit.svg",2,"width","45px","height","45px"],[1,"flex","justify-center","mt-5"],[1,"text-black","dark:text-white"],["mat-dialog-actions","",1,"flex","justify-center","mb-2","mt-4"],["type","button",1,"button-gray","mr-10"],["type","button",1,"button-yellow",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"label",6),t._uU(7,"\xcates-vous s\xfbr de transfomer ce devis en facture ?"),t.qZA()()(),t.TgZ(8,"div",7)(9,"button",8),t._uU(10,"Non"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return e.TransfererInvoice()}),t._uU(12,"Oui"),t.qZA()()()())},dependencies:[d.uh,d.xY,d.H8]});var E=c(28255);class k{transform(n){if(!n)return n;if("string"!=typeof n)return"Error while Transforming String";switch(n){case"NON_PAYE":return"Non pay\xe9";case"PARTIELLEMENT_PAYE":return"Partiellement pay\xe9";case"PAYE":return"Pay\xe9";case"SUR_PAYE":return"Sur pay\xe9";case"CREE":return"Cr\xe9e";case"ANNULE":return"Annul\xe9";case"VALIDE":return"Valid\xe9";case"LIVRE":return"Livr\xe9";case"NON_LIVRE":return"Non livr\xe9"}}}function ce(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function le(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function me(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function _e(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function de(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function ue(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function pe(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function he(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.isFactureChecked," ")}}function ge(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function fe(i,n){if(1&i&&(t.TgZ(0,"td",38)(1,"span",39),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","CREE"==e.status?"bg-[#CE857E]":"ANNULE"==e.status?"bg-zinc-900":"bg-yellow-400"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function ve(i,n){1&i&&t._UZ(0,"th",37)}function be(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openBonCommandeDialog("devis",o))}),t._uU(2," Transformer en Bon de Commande "),t.qZA()()}}function xe(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,be,3,0,"button",48),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.lineCommande==a.emptyValue||null==e.lineCommande)}}function Ce(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openBonLivraisonDialog("devis",o))}),t._uU(2," Transformer en Bon de Livraison "),t.qZA()()}}function Te(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ce,3,0,"button",48),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.deliveryLine==a.emptyValue||null==e.lineCommande)}}function ye(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openFactureDialog("devis",o))}),t._uU(2," Transformer en Facture Client "),t.qZA()()}}function Ze(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ye,3,0,"button",48),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.invoice==a.emptyValue||null==e.lineCommande)}}function Ae(i,n){if(1&i&&(t.TgZ(0,"td",40)(1,"div",41)(2,"div",42),t._UZ(3,"img",43),t.qZA(),t.TgZ(4,"div",44),t._UZ(5,"img",45),t.TgZ(6,"mat-menu",null,46),t.YNc(8,xe,2,1,"div",47),t.YNc(9,Te,2,1,"div",47),t.YNc(10,Ze,2,1,"div",47),t.qZA()()()()),2&i){const e=t.MAs(7),a=t.oxw(3);t.xp6(5),t.Q6J("matMenuTriggerFor",e),t.xp6(3),t.Q6J("ngIf",a.isBonCommandeChecked),t.xp6(1),t.Q6J("ngIf",a.isBonLivraisonChecked),t.xp6(1),t.Q6J("ngIf",a.isFactureChecked)}}function we(i,n){1&i&&t._UZ(0,"tr",51)}function Le(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",52),t.NdJ("click",function(o){const m=t.CHM(e).$implicit,f=t.oxw(3);return t.KtG(f.onRowClick(o,m))}),t.qZA()}}k.\u0275fac=function(n){return new(n||k)},k.\u0275pipe=t.Yjl({name:"statusInvoice",type:k,pure:!0});const et=function(){return[5,10,20]};function Ne(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",15)(1,"div",16)(2,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addDevis())}),t._uU(3),t._UZ(4,"mat-icon",18),t.qZA()(),t.TgZ(5,"h2",19),t._uU(6),t.qZA(),t.TgZ(7,"div",20)(8,"div",21)(9,"div",22)(10,"table",23),t.ynx(11,24),t.YNc(12,ce,2,1,"th",25),t.YNc(13,le,2,1,"td",26),t.BQk(),t.ynx(14,27),t.YNc(15,me,2,1,"th",25),t.YNc(16,_e,2,1,"td",26),t.BQk(),t.ynx(17,28),t.YNc(18,de,2,1,"th",25),t.YNc(19,ue,2,1,"td",26),t.BQk(),t.ynx(20,29),t.YNc(21,pe,2,1,"th",25),t.YNc(22,he,2,1,"td",26),t.BQk(),t.ynx(23,30),t.YNc(24,ge,2,1,"th",25),t.YNc(25,fe,4,4,"td",26),t.BQk(),t.ynx(26,31),t.TgZ(27,"div",32),t.YNc(28,ve,1,0,"th",25),t.YNc(29,Ae,11,4,"td",33),t.qZA(),t.BQk(),t.YNc(30,we,1,0,"tr",34),t.YNc(31,Le,1,0,"tr",35),t.qZA(),t._UZ(32,"mat-paginator",36),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.s9C("label",e("facturation.Devis")),t.xp6(3),t.hij(" ",e("facturation.AJOUTER_DEVIS")," "),t.xp6(3),t.hij(" ",e("facturation.LIST_DEVIS")," "),t.xp6(4),t.Q6J("dataSource",a.dataSourceDevisList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(7,et))}}function qe(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function Ue(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function Ie(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function Fe(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function Me(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function Ee(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function ke(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function Se(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function De(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function Be(i,n){if(1&i&&(t.TgZ(0,"td",38)(1,"span",39),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","CREE"==e.status?"bg-[#CE857E]":"ANNULE"==e.status?"bg-zinc-900":"bg-yellow-400"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function Re(i,n){1&i&&t._UZ(0,"th",37)}function Ye(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openBonLivraisonDialog("bon_commande",o))}),t._uU(2," Transformer en Bon de Livraison "),t.qZA()()}}function Oe(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ye,3,0,"button",48),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.deliveryLine==a.emptyValue||null==e.lineCommande)}}function Pe(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openFactureDialog("bon_commande",o))}),t._uU(2," Transformer en Facture Client "),t.qZA()()}}function Je(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Pe,3,0,"button",48),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.invoice==a.emptyValue||null==e.lineCommande)}}function Qe(i,n){if(1&i&&(t.TgZ(0,"td",40)(1,"div",41)(2,"div",42),t._UZ(3,"img",43),t.qZA(),t.TgZ(4,"div",44),t._UZ(5,"img",45),t.TgZ(6,"mat-menu",null,46),t.YNc(8,Oe,2,1,"div",47),t.YNc(9,Je,2,1,"div",47),t.qZA()()()()),2&i){const e=t.MAs(7),a=t.oxw(3);t.xp6(5),t.Q6J("matMenuTriggerFor",e),t.xp6(3),t.Q6J("ngIf",a.isBonLivraisonChecked),t.xp6(1),t.Q6J("ngIf",a.isFactureChecked)}}function je(i,n){1&i&&t._UZ(0,"tr",51)}function Ve(i,n){1&i&&t._UZ(0,"tr",59)}function Ge(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",15)(1,"div",16)(2,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addBonCommande())}),t._uU(3),t._UZ(4,"mat-icon",53),t.qZA()(),t.TgZ(5,"h2",19),t._uU(6),t.qZA(),t.TgZ(7,"div",20)(8,"div",21)(9,"div",54)(10,"div")(11,"div",55)(12,"div"),t._uU(13,"Devis"),t.qZA(),t.TgZ(14,"div")(15,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refDevis=o)}),t.qZA()()()(),t.TgZ(16,"div")(17,"button",57),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchBonCommande())}),t._uU(18),t.qZA()()()()(),t.TgZ(19,"div",20)(20,"div",21)(21,"div",22)(22,"table",23),t.ynx(23,24),t.YNc(24,qe,2,1,"th",25),t.YNc(25,Ue,2,1,"td",26),t.BQk(),t.ynx(26,27),t.YNc(27,Ie,2,1,"th",25),t.YNc(28,Fe,2,1,"td",26),t.BQk(),t.ynx(29,28),t.YNc(30,Me,2,1,"th",25),t.YNc(31,Ee,2,1,"td",26),t.BQk(),t.ynx(32,29),t.YNc(33,ke,2,1,"th",25),t.YNc(34,Se,2,1,"td",26),t.BQk(),t.ynx(35,30),t.YNc(36,De,2,1,"th",25),t.YNc(37,Be,4,4,"td",26),t.BQk(),t.ynx(38,31),t.TgZ(39,"div",32),t.YNc(40,Re,1,0,"th",25),t.YNc(41,Qe,10,3,"td",33),t.qZA(),t.BQk(),t.YNc(42,je,1,0,"tr",34),t.YNc(43,Ve,1,0,"tr",58),t.qZA(),t._UZ(44,"mat-paginator",36),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.s9C("label",e("facturation.Bon_Commande")),t.xp6(3),t.hij(" ",e("facturation.Ajout_Bon_commande")," "),t.xp6(3),t.hij(" ",e("facturation.Liste_Bon_commandes")," "),t.xp6(9),t.Q6J("ngModel",a.searchCriteria.refDevis),t.xp6(3),t.Oqu(e("facturation.Rechercher")),t.xp6(4),t.Q6J("dataSource",a.dataSourceBonCommandeList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(9,et))}}function He(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function $e(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function Ke(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function ze(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function We(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function Xe(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function ti(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function ei(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function ii(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function ni(i,n){if(1&i&&(t.TgZ(0,"td",38)(1,"span",39),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","LIVRE"==e.status?"bg-yellow-400":"bg-zinc-900"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function ai(i,n){1&i&&t._UZ(0,"th",37)}function oi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",49)(1,"a",50),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openFactureDialog("bon_livraison",o))}),t._uU(2," Transformer en Facture Client "),t.qZA()()}}function si(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,oi,3,0,"button",48),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.invoice==a.emptyValue||null==e.lineCommande)}}function ri(i,n){if(1&i&&(t.TgZ(0,"td",40)(1,"div",41)(2,"div",42),t._UZ(3,"img",43),t.qZA(),t.TgZ(4,"div",44),t._UZ(5,"img",45),t.TgZ(6,"mat-menu",null,46),t.YNc(8,si,2,1,"div",47),t.qZA()()()()),2&i){const e=t.MAs(7),a=t.oxw(3);t.xp6(5),t.Q6J("matMenuTriggerFor",e),t.xp6(3),t.Q6J("ngIf",a.isFactureChecked)}}function ci(i,n){1&i&&t._UZ(0,"tr",51)}function li(i,n){1&i&&t._UZ(0,"tr",59)}function mi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",15)(1,"div",16)(2,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addBonLivraison())}),t._uU(3),t._UZ(4,"mat-icon",18),t.qZA()(),t.TgZ(5,"h2",19),t._uU(6),t.qZA(),t.TgZ(7,"div",20)(8,"div",21)(9,"div",54)(10,"div")(11,"div",55)(12,"div"),t._uU(13),t.qZA(),t.TgZ(14,"div")(15,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refDevis=o)}),t.qZA()()()(),t.TgZ(16,"div")(17,"div",55)(18,"div"),t._uU(19),t.qZA(),t.TgZ(20,"div")(21,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refBonCommande=o)}),t.qZA()()()(),t.TgZ(22,"div")(23,"button",57),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchBonLivraison())}),t._uU(24),t.qZA()()()()(),t.TgZ(25,"div",20)(26,"div",21)(27,"div",22)(28,"table",23),t.ynx(29,24),t.YNc(30,He,2,1,"th",25),t.YNc(31,$e,2,1,"td",26),t.BQk(),t.ynx(32,27),t.YNc(33,Ke,2,1,"th",25),t.YNc(34,ze,2,1,"td",26),t.BQk(),t.ynx(35,28),t.YNc(36,We,2,1,"th",25),t.YNc(37,Xe,2,1,"td",26),t.BQk(),t.ynx(38,29),t.YNc(39,ti,2,1,"th",25),t.YNc(40,ei,2,1,"td",26),t.BQk(),t.ynx(41,30),t.YNc(42,ii,2,1,"th",25),t.YNc(43,ni,4,4,"td",26),t.BQk(),t.ynx(44,31),t.TgZ(45,"div",32),t.YNc(46,ai,1,0,"th",25),t.YNc(47,ri,9,2,"td",33),t.qZA(),t.BQk(),t.YNc(48,ci,1,0,"tr",34),t.YNc(49,li,1,0,"tr",58),t.qZA(),t._UZ(50,"mat-paginator",36),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.s9C("label",e("facturation.Bon_Livraison")),t.xp6(3),t.hij(" ",e("facturation.ajout_bon_livraison")," "),t.xp6(3),t.hij(" ",e("facturation.Liste_Bon_livraisons")," "),t.xp6(7),t.Oqu(e("facturation.Devis")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refDevis),t.xp6(4),t.Oqu(e("facturation.Bon_Commande")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refBonCommande),t.xp6(3),t.Oqu(e("facturation.Rechercher")),t.xp6(4),t.Q6J("dataSource",a.dataSourceBonLivraisonList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(12,et))}}function _i(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function di(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function ui(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function pi(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function hi(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function gi(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function fi(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function vi(i,n){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function bi(i,n){if(1&i&&(t.TgZ(0,"th",37),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function xi(i,n){if(1&i&&(t.TgZ(0,"td",38)(1,"span",39),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","PAYE"==e.status?"bg-yellow-400":"PARTIELLEMENT_PAYE"==e.status?"bg-yellow-500":"NON_PAYE"==e.status?"bg-[#CE857E]":"bg-zinc-900"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function Ci(i,n){1&i&&t._UZ(0,"th",37)}function Ti(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"td",40)(1,"div",61)(2,"div")(3,"button",62),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw(3);return t.KtG(m.openPayment(s))}),t._UZ(4,"img",63),t.qZA()(),t.TgZ(5,"div",64),t._UZ(6,"img",43),t.qZA()()()}}function yi(i,n){1&i&&t._UZ(0,"tr",51)}function Zi(i,n){1&i&&t._UZ(0,"tr",59)}function Ai(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",60)(1,"div",16)(2,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addFacture())}),t._uU(3),t._UZ(4,"mat-icon",18),t.qZA()(),t.TgZ(5,"h2",19),t._uU(6),t.qZA(),t.TgZ(7,"div",20)(8,"div",21)(9,"div",54)(10,"div")(11,"div",55)(12,"div"),t._uU(13),t.qZA(),t.TgZ(14,"div")(15,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refDevis=o)}),t.qZA()()()(),t.TgZ(16,"div")(17,"div",55)(18,"div"),t._uU(19),t.qZA(),t.TgZ(20,"div")(21,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refBonCommande=o)}),t.qZA()()()(),t.TgZ(22,"div")(23,"div",55)(24,"div"),t._uU(25),t.qZA(),t.TgZ(26,"div")(27,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refBonLivraison=o)}),t.qZA()()()(),t.TgZ(28,"div")(29,"button",57),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchFacture())}),t._uU(30),t.qZA()()()()(),t.TgZ(31,"div",20)(32,"div",21)(33,"div",22)(34,"table",23),t.ynx(35,24),t.YNc(36,_i,2,1,"th",25),t.YNc(37,di,2,1,"td",26),t.BQk(),t.ynx(38,27),t.YNc(39,ui,2,1,"th",25),t.YNc(40,pi,2,1,"td",26),t.BQk(),t.ynx(41,28),t.YNc(42,hi,2,1,"th",25),t.YNc(43,gi,2,1,"td",26),t.BQk(),t.ynx(44,29),t.YNc(45,fi,2,1,"th",25),t.YNc(46,vi,2,1,"td",26),t.BQk(),t.ynx(47,30),t.YNc(48,bi,2,1,"th",25),t.YNc(49,xi,4,4,"td",26),t.BQk(),t.ynx(50,31),t.TgZ(51,"div",32),t.YNc(52,Ci,1,0,"th",25),t.YNc(53,Ti,7,0,"td",33),t.qZA(),t.BQk(),t.YNc(54,yi,1,0,"tr",34),t.YNc(55,Zi,1,0,"tr",58),t.qZA(),t._UZ(56,"mat-paginator",36),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.xp6(3),t.hij(" ",e("facturation.ajout_facture")," "),t.xp6(3),t.hij(" ",e("facturation.Liste_factures_client")," "),t.xp6(7),t.Oqu(e("facturation.Devis")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refDevis),t.xp6(4),t.Oqu(e("facturation.Bon_Commande")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refBonCommande),t.xp6(4),t.Oqu(e("facturation.Bon_Livraison")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refBonLivraison),t.xp6(3),t.Oqu(e("facturation.Rechercher")),t.xp6(4),t.Q6J("dataSource",a.dataSourceFactureList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(13,et))}}function wi(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"div")(9,"a",7),t._uU(10),t.qZA()(),t.TgZ(11,"div",8),t._UZ(12,"mat-icon",9),t.TgZ(13,"a",10),t._uU(14),t.qZA()()()()(),t.TgZ(15,"div",11)(16,"div",12)(17,"mat-tab-group"),t.YNc(18,Ne,33,8,"mat-tab",13),t.YNc(19,Ge,45,10,"mat-tab",13),t.YNc(20,mi,51,13,"mat-tab",13),t.YNc(21,Ai,57,14,"mat-tab",14),t.qZA()()()(),t.BQk()),2&i){const e=n.$implicit,a=t.oxw();t.xp6(6),t.hij(" ",e("facturation.FACTURATION")," "),t.xp6(4),t.Oqu(e("facturation.FACTURATION")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(2),t.Oqu(e("facturation.ACHAT")),t.xp6(4),t.Q6J("ngIf",a.isDevisChecked),t.xp6(1),t.Q6J("ngIf",a.isBonCommandeChecked),t.xp6(1),t.Q6J("ngIf",a.isBonLivraisonChecked),t.xp6(1),t.Q6J("ngIf",a.isFactureChecked)}}class j{constructor(n,e,a,o,s,m){this._buillingService=n,this.router=e,this.dialog=a,this.fournisseurService=o,this.moduleService=s,this.buillingService=m,this.searchCriteria={refDevis:"",refBonCommande:"",refBonLivraison:"",refFacture:""},this.displayedColumns=["ref","date","fournisseur","montant_ttc","etat","actions"],this.devisList=[],this.bonCommandList=[],this.bonLivraisonList=[],this.factureList=[],this.has_retenue=!1,this.emptyValue="00000000-0000-0000-0000-000000000000",this.fineshed=new P.X(null),this.isDevisChecked=!1,this.isBonCommandeChecked=!1,this.isBonLivraisonChecked=!1,this.isFactureChecked=!1}ngOnInit(){this.getAllDevis(),this.getAllBonCommand(),this.getAllBonLivraison(),this.getAllFacture(),this.getFacturationSetting()}getFacturationSetting(){this.moduleService.getConfig().subscribe({next:n=>{this.isDevisChecked=n.has_devis,this.isBonCommandeChecked=n.has_bon_command,this.isBonLivraisonChecked=n.has_delivery_form,this.isFactureChecked=n.has_invoice}})}searchBonCommande(){this._buillingService.filterBonCommande(this.searchCriteria.refDevis,"ACHAT","BILLING").subscribe(e=>{console.log("filter resp",e),this.bonCommandList=e,this.dataSourceBonCommandeList=new _.by(this.bonCommandList)})}searchBonLivraison(){this._buillingService.filterBonLivraison(this.searchCriteria.refDevis,this.searchCriteria.refBonCommande,"ACHAT","BILLING").subscribe(a=>{console.log("filter resp",a),this.bonLivraisonList=a,this.dataSourceBonLivraisonList=new _.by(this.bonLivraisonList)})}searchFacture(){this._buillingService.filterFacture(this.searchCriteria.refDevis,this.searchCriteria.refBonCommande,this.searchCriteria.refBonLivraison,"ACHAT","BILLING").subscribe(o=>{console.log("filter resp",o),this.factureList=o,this.dataSourceFactureList=new _.by(this.factureList)})}getAllDevis(){this.fineshed.next(!1),this._buillingService.getAllDevisByType("ACHAT","BILLING").subscribe(n=>{console.log("devisList",n),this.devisList=n,this.dataSourceDevisList=new _.by(this.devisList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.devisList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.devisList[a].customerName=o.name})})})}getAllBonCommand(){this.fineshed.next(!1),this._buillingService.getAllBonCommandByType("ACHAT","BILLING").subscribe(n=>{this.bonCommandList=n,this.dataSourceBonCommandeList=new _.by(this.bonCommandList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.getListFournisseurName(this.bonCommandList)})}getListFournisseurName(n){n.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{n[a].customerName=o.name})})}getAllBonLivraison(){this.fineshed.next(!1),this._buillingService.getAllBonLivraisonByType("ACHAT","BILLING").subscribe(n=>{console.log("bonLivraisonList",n),this.bonLivraisonList=n,this.dataSourceBonLivraisonList=new _.by(this.bonLivraisonList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.bonLivraisonList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.bonLivraisonList[a].customerName=o.name})})})}getAllFacture(){this.fineshed.next(!1),this._buillingService.getAllFactureByType("ACHAT","BILLING").subscribe(n=>{console.log("factureList",n),this.factureList=n,this.dataSourceFactureList=new _.by(this.factureList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.factureList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.factureList[a].customerName=o.name})})})}openBonCommandeDialog(n,e){const a=new d.vA;a.data={index:e,devislist:this.devisList,factType:n,typeTransaction:"ACHAT"},a.minWidth="50%",this.dialog.open(I,a).afterClosed().subscribe(s=>{this.fournisseurService.gettiers(s?.customer).subscribe(m=>{s.customerName=m.name}),this.bonCommandList.push(s),this.dataSourceBonCommandeList=new _.by(this.bonCommandList)})}openBonLivraisonDialog(n,e){const a=new d.vA;a.data={index:e,devislist:this.devisList,bonCommandList:this.bonCommandList,bonLivraisonList:this.bonLivraisonList,factType:n,typeTransaction:"ACHAT"},a.minWidth="50%",this.dialog.open(F,a).afterClosed().subscribe(s=>{this.fournisseurService.gettiers(s.customer).subscribe(m=>{s.customerName=m.name}),this.bonLivraisonList.push(s),this.dataSourceBonLivraisonList=new _.by(this.bonLivraisonList)})}openFactureDialog(n,e){const a=new d.vA;a.data={index:e,devislist:this.devisList,bonCommandList:this.bonCommandList,bonLivraisonList:this.bonLivraisonList,factType:n,typeTransaction:"ACHAT"},a.minWidth="50%",this.dialog.open(M,a).afterClosed().subscribe(s=>{this.fournisseurService.gettiers(s.customer).subscribe(m=>{s.customerName=m.name}),this.factureList.push(s),this.dataSourceFactureList=new _.by(this.factureList)})}openPayment(n){this.getRetenueSourceByInvoice(n)}getRetenueSourceByInvoice(n){this.buillingService.getRetenueSourceByInvoiceUuid(n.uuid).subscribe(e=>{this.has_retenue=!!e,this.retenue=this.has_retenue?e:[],this.dialog.open(U,{data:{invoice:n,has_retenue:this.has_retenue,retenue:this.retenue},width:"60%"}).afterClosed().subscribe(()=>{this.buillingService.getInvoiceByUUID(n.uuid).subscribe(a=>{n.left_to_pay=a.left_to_pay,n.status=a.status})})})}onRowClick(n,e){this.selectedId=e.id}addDevis(){this.router.navigateByUrl("/invoice/achat",{state:{typePaper:"Devis",type:"BILLING"}})}addBonCommande(){this.router.navigateByUrl("/invoice/achat",{state:{typePaper:"BonCommande",type:"BILLING"}})}addBonLivraison(){this.router.navigateByUrl("/invoice/achat",{state:{typePaper:"BonLivraison",type:"BILLING"}})}addFacture(){this.router.navigateByUrl("/invoice/achat",{state:{typePaper:"FactureFournisseur",type:"BILLING"}})}}j.\u0275fac=function(n){return new(n||j)(t.Y36(x.e),t.Y36(T.F0),t.Y36(d.uw),t.Y36(ot.K),t.Y36(st.C),t.Y36(x.e))},j.\u0275cmp=t.Xpm({type:j,selectors:[["app-facturation-achat"]],viewQuery:function(n,e){if(1&n&&t.Gf(z.NW,5),2&n){let a;t.iGM(a=t.CRH())&&(e.paginator=a.first)}},decls:1,vars:0,consts:[[4,"transloco"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],[3,"label",4,"ngIf"],["label","Facture client",4,"ngIf"],[3,"label"],[1,"container"],["type","button",1,"button-yellow-plus","px-5","py-2.5","text-center","inline-flex","items-center",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-2"],[1,"title-3","pt-8"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","ref"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","fournisseur"],["matColumnDef","montant_ttc"],["matColumnDef","etat"],["matColumnDef","actions"],[1,"md:w-2"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"text-center"],[1,"text-white","text-xs","font-bold","mr-2","px-6","py-1","rounded-full",3,"ngClass"],["mat-cell",""],[1,"flex","flex-row","justify-center"],[1,"p-0.3","mt-1","mr-4"],["src","./assets/imgs/eye.svg ",1,"image-svg","max-w-none","cursor-pointer"],[1,"p-0.3"],["src","./assets/images/icons/transfer-icon.svg",1,"image-svg","max-w-none","cursor-pointer",3,"matMenuTriggerFor"],["menu","matMenu"],[4,"ngIf"],["mat-menu-item","",4,"ngIf"],["mat-menu-item",""],[1,"cursor-pointer",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-3"],[1,"grid","xs:grid-cols-6","md:grid-cols-1","lg:grid-cols-6","gap-4"],[1,"grid-cols-2"],["type","text",1,"search",3,"ngModel","ngModelChange"],[1,"button-yellow-search","mt-9",3,"click"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row",""],["label","Facture client"],[1,"flex","flex-row","justify-between","items-center"],[3,"click"],["src","assets/imgs/paiment.svg"],[1,""]],template:function(n,e){1&n&&t.YNc(0,wi,22,8,"ng-container",0)},dependencies:[u.mk,u.O5,K.KI,r.Fj,r.JJ,r.On,E.VK,E.OP,E.p6,y.uX,y.SP,Y.Hw,z.NW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,k]});var Li=c(44e3);function Ni(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function qi(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function Ui(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function Ii(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function Fi(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function Mi(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function Ei(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function ki(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function Si(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function Di(i,n){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","CREE"==e.status?"bg-[#CE857E]":"ANNULE"==e.status?"bg-zinc-900":"bg-yellow-400"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function Bi(i,n){1&i&&t._UZ(0,"th",38)}function Ri(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",50)(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openBonCommandeDialog("devis",o))}),t._uU(2," Transformer en Bon de Commande "),t.qZA()()}}function Yi(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ri,3,0,"button",49),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.lineCommande==a.emptyValue||null==e.lineCommande)}}function Oi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",50)(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openBonLivraisonDialog("devis",o))}),t._uU(2," Transformer en Bon de Livraison "),t.qZA()()}}function Pi(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Oi,3,0,"button",49),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.deliveryLine==a.emptyValue||null==e.lineCommande)}}function Ji(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",50)(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openFactureDialog("devis",o))}),t._uU(2," Transformer en Facture Client "),t.qZA()()}}function Qi(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Ji,3,0,"button",49),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.invoice==a.emptyValue||null==e.lineCommande)}}function ji(i,n){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.TgZ(2,"div",42)(3,"div",43),t._UZ(4,"img",44),t.qZA(),t.TgZ(5,"div",45),t._UZ(6,"img",46),t.TgZ(7,"mat-menu",null,47),t.YNc(9,Yi,2,1,"div",48),t.YNc(10,Pi,2,1,"div",48),t.YNc(11,Qi,2,1,"div",48),t.qZA()()()()),2&i){const e=t.MAs(8),a=t.oxw(3);t.xp6(1),t.hij(" ",a.i," "),t.xp6(5),t.Q6J("matMenuTriggerFor",e),t.xp6(3),t.Q6J("ngIf",a.isBonCommandeChecked),t.xp6(1),t.Q6J("ngIf",a.isBonLivraisonChecked),t.xp6(1),t.Q6J("ngIf",a.isFactureChecked)}}function Vi(i,n){1&i&&t._UZ(0,"tr",52)}function Gi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tr",53),t.NdJ("click",function(o){const m=t.CHM(e).$implicit,f=t.oxw(3);return t.KtG(f.onRowClick(o,m))}),t.qZA()}}const it=function(){return[5,10,20]};function Hi(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",16)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addDevis())}),t._uU(3),t._UZ(4,"mat-icon",19),t.qZA()(),t.TgZ(5,"h2",20),t._uU(6),t.qZA(),t.TgZ(7,"div",21)(8,"div",22)(9,"div",23)(10,"table",24),t.ynx(11,25),t.YNc(12,Ni,2,1,"th",26),t.YNc(13,qi,2,1,"td",27),t.BQk(),t.ynx(14,28),t.YNc(15,Ui,2,1,"th",26),t.YNc(16,Ii,2,1,"td",27),t.BQk(),t.ynx(17,29),t.YNc(18,Fi,2,1,"th",26),t.YNc(19,Mi,2,1,"td",27),t.BQk(),t.ynx(20,30),t.YNc(21,Ei,2,1,"th",26),t.YNc(22,ki,2,1,"td",27),t.BQk(),t.ynx(23,31),t.YNc(24,Si,2,1,"th",26),t.YNc(25,Di,4,4,"td",27),t.BQk(),t.ynx(26,32),t.TgZ(27,"div",33),t.YNc(28,Bi,1,0,"th",26),t.YNc(29,ji,12,5,"td",34),t.qZA(),t.BQk(),t.YNc(30,Vi,1,0,"tr",35),t.YNc(31,Gi,1,0,"tr",36),t.qZA(),t._UZ(32,"mat-paginator",37),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.s9C("label",e("facturation.Devis")),t.xp6(3),t.hij(" ",e("facturation.AJOUTER_DEVIS")," "),t.xp6(3),t.hij(" ",e("facturation.LIST_DEVIS")," "),t.xp6(4),t.Q6J("dataSource",a.dataSourceDevisList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(7,it))}}function $i(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function Ki(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function zi(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function Wi(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function Xi(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function tn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function en(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function nn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function an(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function on(i,n){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","CREE"==e.status?"bg-[#CE857E]":"ANNULE"==e.status?"bg-zinc-900":"bg-yellow-400"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function sn(i,n){1&i&&t._UZ(0,"th",38)}function rn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",50)(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openBonLivraisonDialog("bon_commande",o))}),t._uU(2," Transformer en Bon de Livraison "),t.qZA()()}}function cn(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,rn,3,0,"button",49),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.deliveryLine==a.emptyValue||null==e.lineCommande)}}function ln(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",50)(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openFactureDialog("bon_commande",o))}),t._uU(2," Transformer en Facture Client "),t.qZA()()}}function mn(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,ln,3,0,"button",49),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.invoice==a.emptyValue||null==e.lineCommande)}}function _n(i,n){if(1&i&&(t.TgZ(0,"td",41)(1,"div",42)(2,"div",43),t._UZ(3,"img",44),t.qZA(),t.TgZ(4,"div",45),t._UZ(5,"img",46),t.TgZ(6,"mat-menu",null,47),t.YNc(8,cn,2,1,"div",48),t.YNc(9,mn,2,1,"div",48),t.qZA()()()()),2&i){const e=t.MAs(7),a=t.oxw(3);t.xp6(5),t.Q6J("matMenuTriggerFor",e),t.xp6(3),t.Q6J("ngIf",a.isBonLivraisonChecked),t.xp6(1),t.Q6J("ngIf",a.isFactureChecked)}}function dn(i,n){1&i&&t._UZ(0,"tr",52)}function un(i,n){1&i&&t._UZ(0,"tr",61)}function pn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",54)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addBonCommande())}),t._uU(3),t._UZ(4,"mat-icon",55),t.qZA()(),t.TgZ(5,"h2",20),t._uU(6),t.qZA(),t.TgZ(7,"div",21)(8,"div",22)(9,"div",56)(10,"div")(11,"div",57)(12,"div"),t._uU(13,"Devis"),t.qZA(),t.TgZ(14,"div")(15,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refDevis=o)}),t.qZA()()()(),t.TgZ(16,"div")(17,"button",59),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchBonCommande())}),t._uU(18),t.qZA()()()()(),t.TgZ(19,"div",21)(20,"div",22)(21,"div",23)(22,"table",24),t.ynx(23,25),t.YNc(24,$i,2,1,"th",26),t.YNc(25,Ki,2,1,"td",27),t.BQk(),t.ynx(26,28),t.YNc(27,zi,2,1,"th",26),t.YNc(28,Wi,2,1,"td",27),t.BQk(),t.ynx(29,29),t.YNc(30,Xi,2,1,"th",26),t.YNc(31,tn,2,1,"td",27),t.BQk(),t.ynx(32,30),t.YNc(33,en,2,1,"th",26),t.YNc(34,nn,2,1,"td",27),t.BQk(),t.ynx(35,31),t.YNc(36,an,2,1,"th",26),t.YNc(37,on,4,4,"td",27),t.BQk(),t.ynx(38,32),t.TgZ(39,"div",33),t.YNc(40,sn,1,0,"th",26),t.YNc(41,_n,10,3,"td",34),t.qZA(),t.BQk(),t.YNc(42,dn,1,0,"tr",35),t.YNc(43,un,1,0,"tr",60),t.qZA(),t._UZ(44,"mat-paginator",37),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.MGl("label","",e("facturation.Bon_Commande")," "),t.xp6(3),t.hij(" ",e("facturation.Ajout_Bon_commande")," "),t.xp6(3),t.hij(" ",e("facturation.Liste_Bon_commandes")," "),t.xp6(9),t.Q6J("ngModel",a.searchCriteria.refDevis),t.xp6(3),t.Oqu(e("facturation.Rechercher")),t.xp6(4),t.Q6J("dataSource",a.dataSourceBonCommandeList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(9,it))}}function hn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function gn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function fn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function vn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function bn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function xn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function Cn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function Tn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function yn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function Zn(i,n){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","LIVRE"==e.status?"bg-yellow-400":"bg-zinc-900"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function An(i,n){1&i&&t._UZ(0,"th",38)}function wn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",50)(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.openFactureDialog("bon_livraison",o))}),t._uU(2," Transformer en Facture Client "),t.qZA()()}}function Ln(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,wn,3,0,"button",49),t.qZA()),2&i){const e=t.oxw().$implicit,a=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.invoice==a.emptyValue||null==e.lineCommande)}}function Nn(i,n){if(1&i&&(t.TgZ(0,"td",41)(1,"div",42)(2,"div",43),t._UZ(3,"img",44),t.qZA(),t.TgZ(4,"div",45),t._UZ(5,"img",46),t.TgZ(6,"mat-menu",null,47),t.YNc(8,Ln,2,1,"div",48),t.qZA()()()()),2&i){const e=t.MAs(7),a=t.oxw(3);t.xp6(5),t.Q6J("matMenuTriggerFor",e),t.xp6(3),t.Q6J("ngIf",a.isFactureChecked)}}function qn(i,n){1&i&&t._UZ(0,"tr",52)}function Un(i,n){1&i&&t._UZ(0,"tr",61)}function In(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",54)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addBonLivraison())}),t._uU(3),t._UZ(4,"mat-icon",19),t.qZA()(),t.TgZ(5,"h2",20),t._uU(6),t.qZA(),t.TgZ(7,"div",21)(8,"div",22)(9,"div",56)(10,"div")(11,"div",57)(12,"div"),t._uU(13),t.qZA(),t.TgZ(14,"div")(15,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refDevis=o)}),t.qZA()()()(),t.TgZ(16,"div")(17,"div",57)(18,"div"),t._uU(19),t.qZA(),t.TgZ(20,"div")(21,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refBonCommande=o)}),t.qZA()()()(),t.TgZ(22,"div")(23,"button",59),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchBonLivraison())}),t._uU(24),t.qZA()()()()(),t.TgZ(25,"div",21)(26,"div",22)(27,"div",23)(28,"table",24),t.ynx(29,25),t.YNc(30,hn,2,1,"th",26),t.YNc(31,gn,2,1,"td",27),t.BQk(),t.ynx(32,28),t.YNc(33,fn,2,1,"th",26),t.YNc(34,vn,2,1,"td",27),t.BQk(),t.ynx(35,29),t.YNc(36,bn,2,1,"th",26),t.YNc(37,xn,2,1,"td",27),t.BQk(),t.ynx(38,30),t.YNc(39,Cn,2,1,"th",26),t.YNc(40,Tn,2,1,"td",27),t.BQk(),t.ynx(41,31),t.YNc(42,yn,2,1,"th",26),t.YNc(43,Zn,4,4,"td",27),t.BQk(),t.ynx(44,32),t.TgZ(45,"div",33),t.YNc(46,An,1,0,"th",26),t.YNc(47,Nn,9,2,"td",34),t.qZA(),t.BQk(),t.YNc(48,qn,1,0,"tr",35),t.YNc(49,Un,1,0,"tr",60),t.qZA(),t._UZ(50,"mat-paginator",37),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.s9C("label",e("facturation.Bon_Livraison")),t.xp6(3),t.hij(" ",e("facturation.ajout_bon_livraison")," "),t.xp6(3),t.hij(" ",e("facturation.Liste_Bon_livraisons")," "),t.xp6(7),t.Oqu(e("facturation.Devis")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refDevis),t.xp6(4),t.Oqu(e("facturation.Bon_Commande")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refBonCommande),t.xp6(3),t.Oqu(e("facturation.Rechercher")),t.xp6(4),t.Q6J("dataSource",a.dataSourceBonLivraisonList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(12,it))}}function Fn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.REF")," ")}}function Mn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceNumber," ")}}function En(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Date")," ")}}function kn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.invoiceDate," ")}}function Sn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Fournisseur")," ")}}function Dn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.customerName," ")}}function Bn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Montant_TTC")," ")}}function Rn(i,n){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.total_ttc," ")}}function Yn(i,n){if(1&i&&(t.TgZ(0,"th",38),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e("facturation.Etat")," ")}}function On(i,n){if(1&i&&(t.TgZ(0,"td",39)(1,"span",40),t._uU(2),t.ALo(3,"statusInvoice"),t.qZA()()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngClass","PAYE"==e.status?"bg-yellow-400":"PARTIELLEMENT_PAYE"==e.status?"bg-yellow-500":"NON_PAYE"==e.status?"bg-[#CE857E]":"bg-zinc-900"),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.status)," ")}}function Pn(i,n){1&i&&t._UZ(0,"th",38)}function Jn(i,n){1&i&&(t.TgZ(0,"td",41)(1,"div",42)(2,"div",43),t._UZ(3,"img",44),t.qZA()()())}function Qn(i,n){1&i&&t._UZ(0,"tr",52)}function jn(i,n){1&i&&t._UZ(0,"tr",61)}function Vn(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-tab",62)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addFacture())}),t._uU(3),t._UZ(4,"mat-icon",19),t.qZA()(),t.TgZ(5,"h2",20),t._uU(6),t.qZA(),t.TgZ(7,"div",21)(8,"div",22)(9,"div",56)(10,"div")(11,"div",57)(12,"div"),t._uU(13),t.qZA(),t.TgZ(14,"div")(15,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refDevis=o)}),t.qZA()()()(),t.TgZ(16,"div")(17,"div",57)(18,"div"),t._uU(19),t.qZA(),t.TgZ(20,"div")(21,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refBonCommande=o)}),t.qZA()()()(),t.TgZ(22,"div")(23,"div",57)(24,"div"),t._uU(25),t.qZA(),t.TgZ(26,"div")(27,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.searchCriteria.refBonLivraison=o)}),t.qZA()()()(),t.TgZ(28,"div")(29,"button",59),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.searchFacture())}),t._uU(30),t.qZA()()()()(),t.TgZ(31,"div",21)(32,"div",22)(33,"div",23)(34,"table",24),t.ynx(35,25),t.YNc(36,Fn,2,1,"th",26),t.YNc(37,Mn,2,1,"td",27),t.BQk(),t.ynx(38,28),t.YNc(39,En,2,1,"th",26),t.YNc(40,kn,2,1,"td",27),t.BQk(),t.ynx(41,29),t.YNc(42,Sn,2,1,"th",26),t.YNc(43,Dn,2,1,"td",27),t.BQk(),t.ynx(44,30),t.YNc(45,Bn,2,1,"th",26),t.YNc(46,Rn,2,1,"td",27),t.BQk(),t.ynx(47,31),t.YNc(48,Yn,2,1,"th",26),t.YNc(49,On,4,4,"td",27),t.BQk(),t.ynx(50,32),t.TgZ(51,"div",33),t.YNc(52,Pn,1,0,"th",26),t.YNc(53,Jn,4,0,"td",34),t.qZA(),t.BQk(),t.YNc(54,Qn,1,0,"tr",35),t.YNc(55,jn,1,0,"tr",60),t.qZA(),t._UZ(56,"mat-paginator",37),t.qZA()()()()}if(2&i){const e=t.oxw().$implicit,a=t.oxw();t.xp6(3),t.hij(" ",e("facturation.ajout_facture")," "),t.xp6(3),t.hij(" ",e("facturation.Liste_factures_client")," "),t.xp6(7),t.Oqu(e("facturation.Devis")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refDevis),t.xp6(4),t.Oqu(e("facturation.Bon_Commande")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refBonCommande),t.xp6(4),t.Oqu(e("facturation.Bon_Livraison")),t.xp6(2),t.Q6J("ngModel",a.searchCriteria.refBonLivraison),t.xp6(3),t.Oqu(e("facturation.Rechercher")),t.xp6(4),t.Q6J("dataSource",a.dataSourceFactureList),t.xp6(20),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(13,it))}}function Gn(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"div")(9,"a",7),t._uU(10),t.qZA()(),t.TgZ(11,"div",8),t._UZ(12,"mat-icon",9),t.TgZ(13,"a",10),t._uU(14),t.qZA()()()()(),t.TgZ(15,"div",11)(16,"div",12)(17,"mat-tab-group"),t.YNc(18,Hi,33,8,"mat-tab",13),t.YNc(19,pn,45,10,"mat-tab",14),t.YNc(20,In,51,13,"mat-tab",14),t.YNc(21,Vn,57,14,"mat-tab",15),t.qZA()()()(),t.BQk()),2&i){const e=n.$implicit,a=t.oxw();t.xp6(6),t.hij(" ",e("facturation.FACTURATION")," "),t.xp6(4),t.Oqu(e("facturation.FACTURATION")),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:chevron-right"),t.xp6(2),t.Oqu(e("facturation.ACHAT")),t.xp6(4),t.Q6J("ngIf",a.isDevisChecked),t.xp6(1),t.Q6J("ngIf",a.isBonCommandeChecked),t.xp6(1),t.Q6J("ngIf",a.isBonLivraisonChecked),t.xp6(1),t.Q6J("ngIf",a.isFactureChecked)}}class V{constructor(n,e,a,o,s,m){this._buillingService=n,this.router=e,this.dialog=a,this.fournisseurService=o,this.moduleService=s,this.buillingService=m,this.searchCriteria={refDevis:"",refBonCommande:"",refBonLivraison:"",refFacture:""},this.displayedColumns=["ref","date","fournisseur","montant_ttc","etat","actions"],this.emptyValue="00000000-0000-0000-0000-000000000000",this.displayTransformationMenu=!1,this.devisList=[],this.bonCommandList=[],this.bonLivraisonList=[],this.factureList=[],this.fineshed=new P.X(null),this.has_retenue=!1,this.isDevisChecked=!1,this.isBonCommandeChecked=!1,this.isBonLivraisonChecked=!1,this.isFactureChecked=!1}ngOnInit(){this.getAllDevis(),this.getAllBonCommand(),this.getAllBonLivraison(),this.getAllFacture(),this.getFacturationSetting()}getFacturationSetting(){this.moduleService.getConfig().subscribe({next:n=>{this.isDevisChecked=n.has_devis,this.isBonCommandeChecked=n.has_bon_command,this.isBonLivraisonChecked=n.has_delivery_form,this.isFactureChecked=n.has_invoice}})}searchBonCommande(){this._buillingService.filterBonCommande(this.searchCriteria.refDevis,"VENTE","BILLING").subscribe(e=>{this.bonCommandList=e,this.dataSourceBonCommandeList=new _.by(this.bonCommandList)})}searchBonLivraison(){this._buillingService.filterBonLivraison(this.searchCriteria.refDevis,this.searchCriteria.refBonCommande,"VENTE","BILLING").subscribe(a=>{this.bonLivraisonList=a,this.dataSourceBonLivraisonList=new _.by(this.bonLivraisonList)})}searchFacture(){this._buillingService.filterBonLivraison(this.searchCriteria.refDevis,this.searchCriteria.refBonCommande,"VENTE","BILLING").subscribe(o=>{this.factureList=o,this.dataSourceFactureList=new _.by(this.factureList)})}getAllDevis(){this.fineshed.next(!1),this._buillingService.getAllDevisByType("VENTE","BILLING").subscribe(n=>{this.devisList=n,this.dataSourceDevisList=new _.by(this.devisList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.devisList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.devisList[a].customerName=o.name})})})}getAllBonCommand(){this.fineshed.next(!1),this._buillingService.getAllBonCommandByType("VENTE","BILLING").subscribe(n=>{this.bonCommandList=n,this.dataSourceBonCommandeList=new _.by(this.bonCommandList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.bonCommandList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.bonCommandList[a].customerName=o.name})})})}getAllBonLivraison(){this.fineshed.next(!1),this._buillingService.getAllBonLivraisonByType("VENTE","BILLING").subscribe(n=>{this.bonLivraisonList=n,this.dataSourceBonLivraisonList=new _.by(this.bonLivraisonList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.bonLivraisonList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.bonLivraisonList[a].customerName=o.name})})})}getAllFacture(){this.fineshed.next(!1),this._buillingService.getAllFactureByType("VENTE","BILLING").subscribe(n=>{this.factureList=n,this.dataSourceFactureList=new _.by(this.factureList),this.fineshed.next(!0)}),this.fineshed.subscribe(n=>{n&&this.factureList.forEach((e,a)=>{this.fournisseurService.gettiers(e.customer).subscribe(o=>{this.factureList[a].customerName=o.name})})})}openDialog(n){this.dialog.open(Li.m,{width:"100%"})}openBonCommandeDialog(n,e){const a=new d.vA;a.data={index:e,devislist:this.devisList,factType:n,typeTransaction:"VENTE"},a.minWidth="50%",this.dialog.open(I,a).afterClosed().subscribe(s=>{this.fournisseurService.gettiers(s?.customer).subscribe(m=>{s.customerName=m.name}),this.bonCommandList.push(s),this.dataSourceBonCommandeList=new _.by(this.bonCommandList)})}openBonLivraisonDialog(n,e){const a=new d.vA;a.data={index:e,devislist:this.devisList,bonCommandList:this.bonCommandList,bonLivraisonList:this.bonLivraisonList,factType:n,typeTransaction:"VENTE"},a.minWidth="50%",this.dialog.open(F,a).afterClosed().subscribe(s=>{this.fournisseurService.gettiers(s.customer).subscribe(m=>{s.customerName=m.name}),this.bonLivraisonList.push(s),this.dataSourceBonLivraisonList=new _.by(this.bonLivraisonList)})}openFactureDialog(n,e){const a=new d.vA;a.data={index:e,devislist:this.devisList,bonCommandList:this.bonCommandList,bonLivraisonList:this.bonLivraisonList,factType:n,typeTransaction:"VENTE"},a.minWidth="50%",this.dialog.open(M,a).afterClosed().subscribe(s=>{this.fournisseurService.gettiers(s.customer).subscribe(m=>{s.customerName=m.name}),this.factureList.push(s),this.dataSourceFactureList=new _.by(this.factureList)})}onRowClick(n,e){this.selectedId=e.id}addDevis(){this.router.navigateByUrl("/invoice/vente",{state:{typePaper:"Devis",type:"BILLING"}})}addBonCommande(){this.router.navigateByUrl("/invoice/vente",{state:{typePaper:"BonCommande",type:"BILLING"}})}addBonLivraison(){this.router.navigateByUrl("/invoice/vente",{state:{typePaper:"BonLivraison",type:"BILLING"}})}addFacture(){this.router.navigateByUrl("/invoice/vente",{state:{typePaper:"FactureFournisseur",type:"BILLING"}})}openPayment(n){this.getRetenueSourceByInvoice(n)}getRetenueSourceByInvoice(n){this.buillingService.getRetenueSourceByInvoiceUuid(n.uuid).subscribe(e=>{this.has_retenue=!!e,this.retenue=this.has_retenue?e:[],this.dialog.open(U,{data:{invoice:n,has_retenue:this.has_retenue,retenue:this.retenue},width:"60%"}).afterClosed().subscribe(()=>{this.buillingService.getInvoiceByUUID(n.uuid).subscribe(a=>{n.left_to_pay=a.left_to_pay,n.status=a.status})})})}}V.\u0275fac=function(n){return new(n||V)(t.Y36(x.e),t.Y36(T.F0),t.Y36(d.uw),t.Y36(ot.K),t.Y36(st.C),t.Y36(x.e))},V.\u0275cmp=t.Xpm({type:V,selectors:[["app-facturation-vente"]],viewQuery:function(n,e){if(1&n&&t.Gf(z.NW,5),2&n){let a;t.iGM(a=t.CRH())&&(e.paginator=a.first)}},decls:1,vars:0,consts:[[4,"transloco"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","p-6","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"mt-2"],[1,"title-1"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex-auto","p-6","sm:p-10","bg-white"],[1,"w-full"],["active","",3,"label",4,"ngIf"],[3,"label",4,"ngIf"],["label","Facture client",4,"ngIf"],["active","",3,"label"],[1,"container"],["type","button",1,"button-yellow-plus","px-5","py-2.5","text-center","inline-flex","items-center",3,"click"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-2"],[1,"title-3","pt-8"],[1,"search-div","mt-7","py-5"],[1,"container","mx-5","px-4"],[1,"tab","overflow-x-auto"],["mat-table","",1,"overflow-x-auto","w-full",3,"dataSource"],["matColumnDef","ref"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","fournisseur"],["matColumnDef","montant_ttc"],["matColumnDef","etat"],["matColumnDef","actions"],[1,"md:w-2"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",1,"overflow-x-auto","w-full",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"text-center"],[1,"text-white","text-xs","font-bold","mr-2","px-6","py-1","rounded-full",3,"ngClass"],["mat-cell",""],[1,"flex","flex-row","justify-center"],[1,"p-0.3","mt-1","mr-4"],["src","./assets/imgs/eye.svg ",1,"image-svg","max-w-none","cursor-pointer"],[1,"p-0.3"],["src","./assets/images/icons/transfer-icon.svg",1,"image-svg","max-w-none","cursor-pointer",3,"matMenuTriggerFor"],["menu","matMenu"],[4,"ngIf"],["mat-menu-item","",4,"ngIf"],["mat-menu-item",""],[1,"cursor-pointer",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],[3,"label"],["svgIcon","heroicons_outline:plus-circle",1,"text-white","stroke-2","ml-3"],[1,"grid","xs:grid-cols-6","md:grid-cols-1","lg:grid-cols-6","gap-4"],[1,"grid-cols-2"],["type","text",1,"search",3,"ngModel","ngModelChange"],[1,"button-yellow-search","mt-9",3,"click"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row",""],["label","Facture client"]],template:function(n,e){1&n&&t.YNc(0,Gn,22,8,"ng-container",0)},dependencies:[u.mk,u.O5,K.KI,r.Fj,r.JJ,r.On,E.VK,E.OP,E.p6,y.uX,y.SP,Y.Hw,z.NW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,k]});const Hn=[{path:"",component:O},{path:"achat",component:j},{path:"vente",component:V}];class S{}S.\u0275fac=function(n){return new(n||S)},S.\u0275mod=t.oAB({type:S}),S.\u0275inj=t.cJS({imports:[T.Bz.forChild(Hn),T.Bz]}),c(21281),c(77579),c(68675),c(82722),c(12687),c(95017),c(29521);var zn=c(44850);let _a=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[l.uc,l.si,l.BQ,l.us,u.ez,l.uc,l.BQ,l.us,zn.t]}),i})();var da=c(77775),ua=c(81208);class D{}D.\u0275fac=function(n){return new(n||D)},D.\u0275mod=t.oAB({type:D}),D.\u0275inj=t.cJS({providers:[{provide:l.Ad,useValue:"en-GB"}],imports:[u.ez,S,y.Nh,Y.Ps,d.Is,A.c,r.u5,at.ot,K.y4,r.UX,w.LD,_a,ua.QG,da.fC]})},25993:(vt,H,c)=>{c.d(H,{U:()=>h});var u=c(80529),T=c(21261),r=c(54004),t=c(17414),$=c(70262),d=c(94650),A=c(97316);class h{constructor(l,p){this.http=l,this.localSt=p,this.baseUrl=T.N.sirhUrl}getAllContract(){return this.http.get(`${this.baseUrl}/contracts/list`).pipe((0,r.U)(l=>l))}getAllTypeContract(){return this.http.get(`${this.baseUrl}/config/contract/type/list`).pipe((0,r.U)(l=>l))}getAllContractActive(){return this.http.get(`${this.baseUrl}/contracts/active`).pipe((0,r.U)(l=>l))}createTypeContract(l){return this.http.post(`${this.baseUrl}/config/contract/type/create`,l).pipe((0,t.V)(6e4),(0,$.K)((p,v)=>[]),(0,r.U)(p=>p))}filterContract(l,p,v,L){return this.http.get(`${this.baseUrl}/contracts/filterContracts`,{params:this.setParamsContract(l,p,v,L)}).pipe((0,r.U)(g=>g))}getAllContractByCollaborator(l){return this.http.get(`${this.baseUrl}/contracts/getAllContractByCollaboratorId/${l}`).pipe((0,r.U)(p=>p))}setParamsContract(l,p,v,L){let g=new u.LE;return""!==l&&(g=g.set("firstname",l)),""!==p&&(g=g.set("secondname",p)),null!=v&&(g=g.set("salary",v)),""!==L&&(g=g.set("type",L)),g}getAllContractType(){return this.http.get(`${this.baseUrl}/config/contract/type/list`).pipe((0,r.U)(l=>l))}createContractDocument(l){return this.http.post(`${this.baseUrl}/contractdocument/create`,l).pipe((0,t.V)(6e4),(0,$.K)((p,v)=>[]),(0,r.U)(p=>p))}getAllContractDocument(){return this.http.get(`${this.baseUrl}/contractdocument/list`).pipe((0,r.U)(l=>l))}createContract(l){return this.http.post(`${this.baseUrl}/contracts/create`,l)}getContratByCollaborator(l){return this.http.get(`${this.baseUrl}/contracts/collaborator/${l}`,{headers:(new u.WM).set("Content-Type","application/json")}).pipe((0,r.U)(p=>p))}updateStatusContract(l){return this.http.patch(`${this.baseUrl}/contracts/update/v2`,l,{headers:(new u.WM).set("Content-Type","application/json")}).pipe((0,r.U)(p=>p))}}h.\u0275fac=function(l){return new(l||h)(d.LFG(u.eN),d.LFG(A.n))},h.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}}]);